# 关于 uniApp 开发的项目运行至客户端时的一些优化示例。

## 优化点一

> 记录业务登录状态，并在`onDisconnected`监听回调触发时获取当前的业务登录状态，如果为`true`则手动处理当前的登录，执行重新登录。如果为`false`,这里是指比如用户手动执行了关闭业务那么会主动设置当前值为 false，并且执行关闭 IM 连接，那么也会触发`onDisconnected`监听回调，此时则不需要执行重连逻辑。

**代码段详见 App.vue**

## 优化点二

> 在调用发送消息时根据当前的发送消息监听回调进行判断，此 demo 示例展示为在调用发送消息方法后开启定时如果大于 5s 并未受到成功的回调，则主动尝试调用补充重连逻辑。

**代码段详见 pages/index.vue**

## 优化点三

> 此方法并非必选，为最终选择的优化手段，即在 App.vue 组件中利用`onShow`以及`onHide`钩子函数，在整个 App 加载时调用登录 IM，在 onHide 切出应用或为息屏时断开与 IM 的连接，通常不推荐这种较重的操作形式，因此非必要可依赖上方的处理进行优化。

**代码段见 App.vue 注释的优化点三代码。**

## 更多详细优化描述以及说明可详见此篇文章

[探索环信 IM-集成 uni-app、H5、小程序类 SDK 断线重连的较好实践。](https://juejin.cn/post/7187648722732318781)
