(this["webpackJsonp"]=this["webpackJsonp"]||[]).push([["app-service"],{"0676":function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports["default"]=e.exports},"0893":function(e,t,r){"use strict";var n=r("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.SESSION_MESSAGE_TYPE=t.MESSAGE_TYPE=t.INFORM_TYPE=t.HANDLER_EVENT_NAME=t.GROUP_ROLE_TYPE_NAME=t.GROUP_ROLE_TYPE=t.EMOJIOBJ=t.EMOJI=t.CUSTOM_TYPE=t.CONNECT_CALLBACK_TYPE=t.CHAT_TYPE=void 0;var o,i=n(r("9523"));t.CHAT_TYPE={SINGLE_CHAT:"singleChat",GROUP_CHAT:"groupChat"};t.INFORM_TYPE={CONTACTS:"contacts",GROUPS:"groups"};t.HANDLER_EVENT_NAME={CONNECT_EVENT:"connectEvent",MESSAGES_EVENT:"messagesEvent",CONTACTS_EVENT:"contactsEvent",GROUP_EVENT:"groupEvent",ERROR_EVENT:"errorEvent"};t.CONNECT_CALLBACK_TYPE={CONNECT_CALLBACK:"connected",DISCONNECT_CALLBACK:"disconnected",RECONNECTING_CALLBACK:"reconnecting",ERROR_CALLBACK:"onerror"};t.SESSION_MESSAGE_TYPE={img:"[\u56fe\u7247]",file:"[\u6587\u4ef6]",audio:"[\u8bed\u97f3]",loc:"[\u4f4d\u7f6e]"};t.CUSTOM_TYPE={userCard:"\u4e2a\u4eba\u540d\u7247"};t.MESSAGE_TYPE={IMAGE:"img",TEXT:"txt",LOCATION:"location",VIDEO:"video",AUDIO:"audio",EMOJI:"emoji",FILE:"file",CUSTOM:"custom"};t.EMOJI={path:"@/static/images/faces",map:{"[):]":"ee_1.png","[:D]":"ee_2.png","[;)]":"ee_3.png","[:-o]":"ee_4.png","[:p]":"ee_5.png","[(H)]":"ee_6.png","[:@]":"ee_7.png","[:s]":"ee_8.png","[:$]":"ee_9.png","[:(]":"ee_10.png","[:'(]":"ee_11.png","[<o)]":"ee_12.png","[(a)]":"ee_13.png","[8o|]":"ee_14.png","[8-|]":"ee_15.png","[+o(]":"ee_16.png","[|-)]":"ee_17.png","[:|]":"ee_18.png","[*-)]":"ee_19.png","[:-#]":"ee_20.png","[^o)]":"ee_21.png","[:-*]":"ee_22.png","[8-)]":"ee_23.png","[del]":"btn_del.png","[(|)]":"ee_24.png","[(u)]":"ee_25.png","[(S)]":"ee_26.png","[(*)]":"ee_27.png","[(#)]":"ee_28.png","[(R)]":"ee_29.png","[({)]":"ee_30.png","[(})]":"ee_31.png","[(k)]":"ee_32.png","[(F)]":"ee_33.png","[(W)]":"ee_34.png","[(D)]":"ee_35.png"}};t.EMOJIOBJ={path:"/static/images/faces",map1:{"[):]":"ee_1.png","[:D]":"ee_2.png","[;)]":"ee_3.png","[:-o]":"ee_4.png","[:p]":"ee_5.png","[(H)]":"ee_6.png","[:@]":"ee_7.png"},map2:{"[:s]":"ee_8.png","[:$]":"ee_9.png","[:(]":"ee_10.png","[:'(]":"ee_11.png","[<o)]":"ee_12.png","[(a)]":"ee_13.png","[8o|]":"ee_14.png"},map3:{"[8-|]":"ee_15.png","[+o(]":"ee_16.png","[|-)]":"ee_17.png","[:|]":"ee_18.png","[*-)]":"ee_19.png","[:-#]":"ee_20.png","[del]":"del.png"},map4:{"[^o)]":"ee_21.png","[:-*]":"ee_22.png","[8-)]":"ee_23.png","[(|)]":"ee_24.png","[(u)]":"ee_25.png","[(S)]":"ee_26.png","[(*)]":"ee_27.png"},map5:{"[(#)]":"ee_28.png","[(R)]":"ee_29.png","[({)]":"ee_30.png","[(})]":"ee_31.png","[(k)]":"ee_32.png","[(F)]":"ee_33.png","[(W)]":"ee_34.png","[(D)]":"ee_35.png"},map6:{"[del]":"del.png"}};var a={OWNER:"owner",ADMIN:"admin",MEMBER:"member"};t.GROUP_ROLE_TYPE_NAME=a;var s=(o={},(0,i.default)(o,a.OWNER,0),(0,i.default)(o,a.ADMIN,1),(0,i.default)(o,a.MEMBER,2),o);t.GROUP_ROLE_TYPE=s},"0a4e":function(e,t,r){var n=r("7037");uni.addInterceptor({returnValue:function(e){return!e||"object"!==n(e)&&"function"!==typeof e||"function"!==typeof e.then?e:new Promise((function(t,r){e.then((function(e){return e[0]?r(e[0]):t(e[1])}))}))}})},"0d8a":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EM_WEB_SOCKET_URL=t.EM_APP_KEY=t.EM_API_URL=void 0;t.EM_API_URL="https://a1.easemob.com";t.EM_WEB_SOCKET_URL="wss://im-api-wechat.easemob.com/websocket";t.EM_APP_KEY="easemob-demo#support"},"0de9":function(e,t,r){"use strict";function n(e){var t=Object.prototype.toString.call(e);return t.substring(8,t.length-1)}function o(){return"string"===typeof __channelId__&&__channelId__}function i(e,t){switch(n(t)){case"Function":return"function() { [native code] }";default:return t}}function a(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];console[e].apply(console,r)}function s(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=t.shift();if(o())return t.push(t.pop().replace("at ","uni-app:///")),console[a].apply(console,t);var s=t.map((function(e){var t=Object.prototype.toString.call(e).toLowerCase();if("[object object]"===t||"[object array]"===t)try{e="---BEGIN:JSON---"+JSON.stringify(e,i)+"---END:JSON---"}catch(o){e=t}else if(null===e)e="---NULL---";else if(void 0===e)e="---UNDEFINED---";else{var r=n(e).toUpperCase();e="NUMBER"===r||"BOOLEAN"===r?"---BEGIN:"+r+"---"+e+"---END:"+r+"---":String(e)}return e})),c="";if(s.length>1){var u=s.pop();c=s.join("---COMMA---"),0===u.indexOf(" at ")?c+=u:c+="---COMMA---"+u}else c=s[0];console[a](c)}r.r(t),r.d(t,"log",(function(){return a})),r.d(t,"default",(function(){return s}))},1023:function(e,t,r){"use strict";var n=r("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.EMClient=void 0,Object.defineProperty(t,"EaseSDK",{enumerable:!0,get:function(){return o.default}});var o=n(r("1160")),i=r("0d8a"),a=uni.EMClient={};t.EMClient=a,o.default.logger.enableAll(),t.EMClient=a=new o.default.connection({appKey:i.EM_APP_KEY,apiUrl:i.EM_API_URL,url:i.EM_WEB_SOCKET_URL}),uni.EMClient=a},1160:function(e,t,r){(function(e,n,o){var i,a,s,c=r("7037");!function(e,r){"object"==c(t)&&"object"==c(o)?o.exports=r():(a=[],i=r,s="function"===typeof i?i.apply(t,a):i,void 0===s||(o.exports=s))}(0,(function(){return function(){var t={188:function(e,t,r){var n,o,i;!function(a){"use strict";if(null!=t&&"number"!=typeof t.nodeType)e.exports=a();else if(null!=r.amdO)o=[],void 0===(i="function"==typeof(n=a)?n.apply(t,o):n)||(e.exports=i);else{var s=a(),c="undefined"!=typeof self?self:$.global;"function"!=typeof c.btoa&&(c.btoa=s.btoa),"function"!=typeof c.atob&&(c.atob=s.atob)}}((function(){"use strict";var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function t(e){this.message=e}return t.prototype=new Error,t.prototype.name="InvalidCharacterError",{btoa:function(r){for(var n,o,i=String(r),a=0,s=e,c="";i.charAt(0|a)||(s="=",a%1);c+=s.charAt(63&n>>8-a%1*8)){if((o=i.charCodeAt(a+=3/4))>255)throw new t("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");n=n<<8|o}return c},atob:function(r){var n=String(r).replace(/[=]+$/,"");if(n.length%4==1)throw new t("'atob' failed: The string to be decoded is not correctly encoded.");for(var o,i,a=0,s=0,c="";i=n.charAt(s++);~i&&(o=a%4?64*o+i:i,a++%4)?c+=String.fromCharCode(255&o>>(-2*a&6)):0)i=e.indexOf(i);return c}}}))},720:function(e){e.exports=r;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function r(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function n(e){return!0===(e&&e.__isLong__)}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=n;var o={},i={};function a(e,t){var r,n,a;return t?(a=0<=(e>>>=0)&&e<256)&&(n=i[e])?n:(r=c(e,(0|e)<0?-1:0,!0),a&&(i[e]=r),r):(a=-128<=(e|=0)&&e<128)&&(n=o[e])?n:(r=c(e,e<0?-1:0,!1),a&&(o[e]=r),r)}function s(e,t){if(isNaN(e))return t?E:g;if(t){if(e<0)return E;if(e>=h)return O}else{if(e<=-f)return R;if(e+1>=f)return T}return e<0?s(-e,t).neg():c(e%d|0,e/d|0,t)}function c(e,t,n){return new r(e,t,n)}r.fromInt=a,r.fromNumber=s,r.fromBits=c;var u=Math.pow;function l(e,t,r){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"==typeof t?(r=t,t=!1):t=!!t,(r=r||10)<2||36<r)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return l(e.substring(1),t,r).neg();for(var o=s(u(r,8)),i=g,a=0;a<e.length;a+=8){var c=Math.min(8,e.length-a),p=parseInt(e.substring(a,a+c),r);if(c<8){var d=s(u(r,c));i=i.mul(d).add(s(p))}else i=(i=i.mul(o)).add(s(p))}return i.unsigned=t,i}function p(e,t){return"number"==typeof e?s(e,t):"string"==typeof e?l(e,t):c(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=l,r.fromValue=p;var d=4294967296,h=d*d,f=h/2,m=a(1<<24),g=a(0);r.ZERO=g;var E=a(0,!0);r.UZERO=E;var y=a(1);r.ONE=y;var v=a(1,!0);r.UONE=v;var _=a(-1);r.NEG_ONE=_;var T=c(-1,2147483647,!1);r.MAX_VALUE=T;var O=c(-1,-1,!0);r.MAX_UNSIGNED_VALUE=O;var R=c(0,-2147483648,!1);r.MIN_VALUE=R;var I=r.prototype;I.toInt=function(){return this.unsigned?this.low>>>0:this.low},I.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},I.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(R)){var t=s(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var o=s(u(e,6),this.unsigned),i=this,a="";;){var c=i.div(o),l=(i.sub(c.mul(o)).toInt()>>>0).toString(e);if((i=c).isZero())return l+a;for(;l.length<6;)l="0"+l;a=""+l+a}},I.getHighBits=function(){return this.high},I.getHighBitsUnsigned=function(){return this.high>>>0},I.getLowBits=function(){return this.low},I.getLowBitsUnsigned=function(){return this.low>>>0},I.getNumBitsAbs=function(){if(this.isNegative())return this.eq(R)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},I.isZero=function(){return 0===this.high&&0===this.low},I.eqz=I.isZero,I.isNegative=function(){return!this.unsigned&&this.high<0},I.isPositive=function(){return this.unsigned||this.high>=0},I.isOdd=function(){return 1==(1&this.low)},I.isEven=function(){return 0==(1&this.low)},I.equals=function(e){return n(e)||(e=p(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},I.eq=I.equals,I.notEquals=function(e){return!this.eq(e)},I.neq=I.notEquals,I.ne=I.notEquals,I.lessThan=function(e){return this.comp(e)<0},I.lt=I.lessThan,I.lessThanOrEqual=function(e){return this.comp(e)<=0},I.lte=I.lessThanOrEqual,I.le=I.lessThanOrEqual,I.greaterThan=function(e){return this.comp(e)>0},I.gt=I.greaterThan,I.greaterThanOrEqual=function(e){return this.comp(e)>=0},I.gte=I.greaterThanOrEqual,I.ge=I.greaterThanOrEqual,I.compare=function(e){if(n(e)||(e=p(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},I.comp=I.compare,I.negate=function(){return!this.unsigned&&this.eq(R)?R:this.not().add(y)},I.neg=I.negate,I.add=function(e){n(e)||(e=p(e));var t=this.high>>>16,r=65535&this.high,o=this.low>>>16,i=65535&this.low,a=e.high>>>16,s=65535&e.high,u=e.low>>>16,l=0,d=0,h=0,f=0;return h+=(f+=i+(65535&e.low))>>>16,d+=(h+=o+u)>>>16,l+=(d+=r+s)>>>16,l+=t+a,c((h&=65535)<<16|(f&=65535),(l&=65535)<<16|(d&=65535),this.unsigned)},I.subtract=function(e){return n(e)||(e=p(e)),this.add(e.neg())},I.sub=I.subtract,I.multiply=function(e){if(this.isZero())return g;if(n(e)||(e=p(e)),t)return c(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return g;if(this.eq(R))return e.isOdd()?R:g;if(e.eq(R))return this.isOdd()?R:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return s(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,o=65535&this.high,i=this.low>>>16,a=65535&this.low,u=e.high>>>16,l=65535&e.high,d=e.low>>>16,h=65535&e.low,f=0,E=0,y=0,v=0;return y+=(v+=a*h)>>>16,E+=(y+=i*h)>>>16,y&=65535,E+=(y+=a*d)>>>16,f+=(E+=o*h)>>>16,E&=65535,f+=(E+=i*d)>>>16,E&=65535,f+=(E+=a*l)>>>16,f+=r*h+o*d+i*l+a*u,c((y&=65535)<<16|(v&=65535),(f&=65535)<<16|(E&=65535),this.unsigned)},I.mul=I.multiply,I.divide=function(e){if(n(e)||(e=p(e)),e.isZero())throw Error("division by zero");var r,o,i;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?E:g;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return E;if(e.gt(this.shru(1)))return v;i=E}else{if(this.eq(R))return e.eq(y)||e.eq(_)?R:e.eq(R)?y:(r=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?y:_:(o=this.sub(e.mul(r)),i=r.add(o.div(e)));if(e.eq(R))return this.unsigned?E:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=g}for(o=this;o.gte(e);){r=Math.max(1,Math.floor(o.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),l=a<=48?1:u(2,a-48),d=s(r),h=d.mul(e);h.isNegative()||h.gt(o);)h=(d=s(r-=l,this.unsigned)).mul(e);d.isZero()&&(d=y),i=i.add(d),o=o.sub(h)}return i},I.div=I.divide,I.modulo=function(e){return n(e)||(e=p(e)),t?c((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},I.mod=I.modulo,I.rem=I.modulo,I.not=function(){return c(~this.low,~this.high,this.unsigned)},I.and=function(e){return n(e)||(e=p(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},I.or=function(e){return n(e)||(e=p(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},I.xor=function(e){return n(e)||(e=p(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},I.shiftLeft=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},I.shl=I.shiftLeft,I.shiftRight=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},I.shr=I.shiftRight,I.shiftRightUnsigned=function(e){if(n(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?c(this.low>>>e|t<<32-e,t>>>e,this.unsigned):c(32===e?t:t>>>e-32,0,this.unsigned)},I.shru=I.shiftRightUnsigned,I.shr_u=I.shiftRightUnsigned,I.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},I.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},I.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},I.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},I.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},969:function(e){"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this}},728:function(e){"use strict";e.exports=function(e,t){for(var r=new Array(arguments.length-1),n=0,o=2,i=!0;o<arguments.length;)r[n++]=arguments[o++];return new Promise((function(o,a){r[n]=function(e){if(i)if(i=!1,e)a(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];o.apply(null,t)}};try{e.apply(t||null,r)}catch(e){i&&(i=!1,a(e))}}))}},440:function(e){"use strict";var t=e.exports;t.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var r=new Array(64),n=new Array(123),o=0;o<64;)n[r[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;t.encode=function(e,t,n){for(var o,i=null,a=[],s=0,c=0;t<n;){var u=e[t++];switch(c){case 0:a[s++]=r[u>>2],o=(3&u)<<4,c=1;break;case 1:a[s++]=r[o|u>>4],o=(15&u)<<2,c=2;break;case 2:a[s++]=r[o|u>>6],a[s++]=r[63&u],c=0}s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,a)),s=0)}return c&&(a[s++]=r[o],a[s++]=61,1===c&&(a[s++]=61)),i?(s&&i.push(String.fromCharCode.apply(String,a.slice(0,s))),i.join("")):String.fromCharCode.apply(String,a.slice(0,s))};var i="invalid encoding";t.decode=function(e,t,r){for(var o,a=r,s=0,c=0;c<e.length;){var u=e.charCodeAt(c++);if(61===u&&s>1)break;if(void 0===(u=n[u]))throw Error(i);switch(s){case 0:o=u,s=1;break;case 1:t[r++]=o<<2|(48&u)>>4,o=u,s=2;break;case 2:t[r++]=(15&o)<<4|(60&u)>>2,o=u,s=3;break;case 3:t[r++]=(3&o)<<6|u,s=0}}if(1===s)throw Error(i);return r-a},t.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},72:function(e){e.exports=n;var t,r=/\/|\./;function n(e,t){r.test(e)||(e="google/protobuf/"+e+".proto",t={nested:{google:{nested:{protobuf:{nested:t}}}}}),n[e]=t}n("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}}),n("duration",{Duration:t={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),n("timestamp",{Timestamp:t}),n("empty",{Empty:{fields:{}}}),n("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),n("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),n("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),n.get=function(e){return n[e]||null}},525:function(e,t,r){var n,o,i=e.exports;function a(e,t,r,i){var a=i.m,s=i.d,u=i.types,l=i.ksi,p=void 0!==l;if(e.resolvedType)if(e.resolvedType instanceof n){for(var d=p?s[r][l]:s[r],h=e.resolvedType.values,f=Object.keys(h),m=0;m<f.length;m++)if(!(e.repeated&&h[f[m]]===e.typeDefault||f[m]!=d&&h[f[m]]!=d)){p?a[r][l]=h[f[m]]:a[r]=h[f[m]];break}}else{if("object"!=c(p?s[r][l]:s[r]))throw TypeError(e.fullName+": object expected");p?a[r][l]=u[t].fromObject(s[r][l]):a[r]=u[t].fromObject(s[r])}else{var g=!1;switch(e.type){case"double":case"float":p?a[r][l]=Number(s[r][l]):a[r]=Number(s[r]);break;case"uint32":case"fixed32":p?a[r][l]=s[r][l]>>>0:a[r]=s[r]>>>0;break;case"int32":case"sint32":case"sfixed32":p?a[r][l]=0|s[r][l]:a[r]=0|s[r];break;case"uint64":g=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":o.Long?p?a[r][l]=o.Long.fromValue(s[r][l]).unsigned=g:a[r]=o.Long.fromValue(s[r]).unsigned=g:"string"==typeof(p?s[r][l]:s[r])?p?a[r][l]=parseInt(s[r][l],10):a[r]=parseInt(s[r],10):"number"==typeof(p?s[r][l]:s[r])?p?a[r][l]=s[r][l]:a[r]=s[r]:"object"==c(p?s[r][l]:s[r])&&(p?a[r][l]=new o.LongBits(s[r][l].low>>>0,s[r][l].high>>>0).toNumber(g):a[r]=new o.LongBits(s[r].low>>>0,s[r].high>>>0).toNumber(g));break;case"bytes":"string"==typeof(p?s[r][l]:s[r])?p?o.base64.decode(s[r][l],a[r][l]=o.newBuffer(o.base64.length(s[r][l])),0):o.base64.decode(s[r],a[r]=o.newBuffer(o.base64.length(s[r])),0):(p?s[r][l]:s[r]).length&&(p?a[r][l]=s[r][l]:a[r]=s[r]);break;case"string":p?a[r][l]=String(s[r][l]):a[r]=String(s[r]);break;case"bool":p?a[r][l]=Boolean(s[r][l]):a[r]=Boolean(s[r])}}}function s(e,t,r,i){var a=i.m,s=i.d,c=i.types,u=i.ksi,l=i.o,p=void 0!==u;if(e.resolvedType)e.resolvedType instanceof n?p?s[r][u]=l.enums===String?c[t].values[a[r][u]]:a[r][u]:s[r]=l.enums===String?c[t].values[a[r]]:a[r]:p?s[r][u]=c[t].toObject(a[r][u],l):s[r]=c[t].toObject(a[r],l);else{var d=!1;switch(e.type){case"double":case"float":p?s[r][u]=l.json&&!isFinite(a[r][u])?String(a[r][u]):a[r][u]:s[r]=l.json&&!isFinite(a[r])?String(a[r]):a[r];break;case"uint64":d=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":"number"==typeof a[r][u]?p?s[r][u]=l.longs===String?String(a[r][u]):a[r][u]:s[r]=l.longs===String?String(a[r]):a[r]:p?s[r][u]=l.longs===String?o.Long.prototype.toString.call(a[r][u]):l.longs===Number?new o.LongBits(a[r][u].low>>>0,a[r][u].high>>>0).toNumber(d):a[r][u]:s[r]=l.longs===String?o.Long.prototype.toString.call(a[r]):l.longs===Number?new o.LongBits(a[r].low>>>0,a[r].high>>>0).toNumber(d):a[r];break;case"bytes":p?s[r][u]=l.bytes===String?o.base64.encode(a[r][u],0,a[r][u].length):l.bytes===Array?Array.prototype.slice.call(a[r][u]):a[r][u]:s[r]=l.bytes===String?o.base64.encode(a[r],0,a[r].length):l.bytes===Array?Array.prototype.slice.call(a[r]):a[r];break;default:p?s[r][u]=a[r][u]:s[r]=a[r]}}}i._configure=function(){n=r(582),o=r(935)},i.fromObject=function(e){var t=e.fieldsArray;return function(e){return function(r){if(r instanceof this.ctor)return r;if(!t.length)return new this.ctor;for(var i=new this.ctor,s=0;s<t.length;++s){var u,l=t[s].resolve(),p=l.name;if(l.map){if(r[p]){if("object"!=c(r[p]))throw TypeError(l.fullName+": object expected");i[p]={}}var d=Object.keys(r[p]);for(u=0;u<d.length;++u)a(l,s,p,o.merge(o.copy(e),{m:i,d:r,ksi:d[u]}))}else if(l.repeated){if(r[p]){if(!Array.isArray(r[p]))throw TypeError(l.fullName+": array expected");for(i[p]=[],u=0;u<r[p].length;++u)a(l,s,p,o.merge(o.copy(e),{m:i,d:r,ksi:u}))}}else(l.resolvedType instanceof n||null!=r[p])&&a(l,s,p,o.merge(o.copy(e),{m:i,d:r}))}return i}}},i.toObject=function(e){var t=e.fieldsArray.slice().sort(o.compareFieldsById);return function(r){return t.length?function(i,a){a=a||{};for(var c,u,l={},p=[],d=[],h=[],f=0;f<t.length;++f)t[f].partOf||(t[f].resolve().repeated?p:t[f].map?d:h).push(t[f]);if(p.length&&(a.arrays||a.defaults))for(f=0;f<p.length;++f)l[p[f].name]=[];if(d.length&&(a.objects||a.defaults))for(f=0;f<d.length;++f)l[d[f].name]={};if(h.length&&a.defaults)for(f=0;f<h.length;++f)if(u=(c=h[f]).name,c.resolvedType instanceof n)l[u]=a.enums=String?c.resolvedType.valuesById[c.typeDefault]:c.typeDefault;else if(c.long)if(o.Long){var m=new o.Long(c.typeDefault.low,c.typeDefault.high,c.typeDefault.unsigned);l[u]=a.longs===String?m.toString():a.longs===Number?m.toNumber():m}else l[u]=a.longs===String?c.typeDefault.toString():c.typeDefault.toNumber();else c.bytes?l[u]=a.bytes===String?String.fromCharCode.apply(String,c.typeDefault):Array.prototype.slice.call(c.typeDefault).join("*..*").split("*..*"):l[u]=c.typeDefault;var g=!1;for(f=0;f<t.length;++f){u=(c=t[f]).name;var E,y,v=e._fieldsArray.indexOf(c);if(c.map){if(g||(g=!0),i[u]&&(E=Object.keys(i[u]).length))for(l[u]={},y=0;y<E.length;++y)s(c,v,u,o.merge(o.copy(r),{m:i,d:l,ksi:E[y],o:a}))}else if(c.repeated){if(i[u]&&i[u].length)for(l[u]=[],y=0;y<i[u].length;++y)s(c,v,u,o.merge(o.copy(r),{m:i,d:l,ksi:y,o:a}))}else null!=i[u]&&i.hasOwnProperty(u)&&s(c,v,u,o.merge(o.copy(r),{m:i,d:l,o:a})),c.partOf&&a.oneofs&&(l[c.partOf.name]=u)}return l}:function(){return{}}}}},888:function(t,r,n){var o,i,a;function s(e){return"missing required '"+e.name+"'"}function u(t){return function(r){var n=r.Reader,u=r.types,l=r.util;return function(r,p){r instanceof n||(r=n.create(r));for(var d,h=void 0===p?r.len:r.pos+p,f=new this.ctor;r.pos<h;){var m=r.uint32();if(t.group&&4==(7&m))break;for(var g=m>>>3,E=0,y=!1;E<t.fieldsArray.length;++E){var v=t._fieldsArray[E].resolve(),_=v.name,T=v.resolvedType instanceof o?"int32":v.type;if(g==v.id){if(y=!0,v.map)r.skip().pos++,f[_]===l.emptyObject&&(f[_]={}),d=r[v.keyType](),r.pos++,null!=i.long[v.keyType]?null==i.basic[T]?f[_]["object"==c(d)?l.longToHash(d):d]=u[E].decode(r,r.uint32()):f[_]["object"==c(d)?l.longToHash(d):d]=r[T]():null==i.basic[T]?f[_]=u[E].decode(r,r.uint32()):f[_]=r[T]();else if(v.repeated)if(f[_]&&f[_].length||(f[_]=[]),null!=i.packed[T]&&2==(7&m))for(var O=r.uint32()+r.pos;r.pos<O;)f[_].push(r[T]());else null==i.basic[T]?v.resolvedType.group?f[_].push(u[E].decode(r)):f[_].push(u[E].decode(r,r.uint32())):f[_].push(r[T]());else null==i.basic[T]?v.resolvedType.group?f[_]=u[E].decode(r):f[_]=u[E].decode(r,r.uint32()):f[_]=r[T]();break}}y||(e("log","t",m," at SDK/4.1.7-uniapp-log.js:1"),r.skipType(7&m))}for(E=0;E<t._fieldsArray.length;++E){var R=t._fieldsArray[E];if(R.required&&!f.hasOwnProperty(R.name))throw a.ProtocolError(s(R),{instance:f})}return f}}}t.exports=u,u._configure=function(){o=n(582),i=n(696),a=n(935)}},929:function(t,r,n){var o,i;function a(t){return function(r){var n=r.Writer,a=r.types,s=r.util;return function(r,c){c=c||n.create();for(var u=t.fieldsArray.slice().sort(s.compareFieldsById),l=0;l<u.length;l++){var p=u[l],d=t._fieldsArray.indexOf(p),h=p.resolvedType instanceof o?"uint32":p.type,f=i.basic[h],m=r[p.name];if(p.resolvedType instanceof o&&"string"==typeof m&&(m=a[d].values[m]),p.map){if(null!=m&&r.hasOwnProperty(p.name))for(var g=Object.keys(m),E=0;E<g.length;++E)c.uint32((p.id<<3|2)>>>0).fork().uint32(8|i.mapKey[p.keyType])[p.keyType](g[E]),void 0===f?a[d].encode(m[g[E]],c.uint32(18).fork()).ldelim().ldelim():c.uint32(16|f)[h](m[g[E]]).ldelim()}else if(p.repeated){if(m&&m.length)if(p.packed&&void 0!==i.packed[h]){c.uint32((p.id<<3|2)>>>0).fork();for(var y=0;y<m.length;y++)c[h](m[y]);c.ldelim()}else for(var v=0;v<m.length;v++)void 0===f?p.resolvedType.group?a[d].encode(m[v],c.uint32((p.id<<3|3)>>>0)).uint32((p.id<<3|4)>>>0):a[d].encode(m[v],c.uint32((p.id<<3|2)>>>0).fork()).ldelim():c.uint32((p.id<<3|f)>>>0)[h](m[v])}else(!p.optional||null!=m&&r.hasOwnProperty(p.name))&&(p.optional||null!=m&&r.hasOwnProperty(p.name)||e("warn","\u6ce8\u610f\u5566!!!\u5f88\u5927\u6982\u7387\u4f1a\u62a5\u9519 \u7c7b\u578b:",r.$type?r.$type.name:"\u4e0d\u6653\u5f97","\u6ca1\u6709\u8bbe\u7f6e\u5bf9\u5e94\u7684\u5c5e\u6027:",p.name,"\u68c0\u67e5\u662f\u4e0d\u662fproto\u6587\u4ef6\u5c5e\u6027\u8bbe\u7f6e\u4e3a\u4e86required"," at SDK/4.1.7-uniapp-log.js:1"),void 0===f?p.resolvedType.group?a[d].encode(m,c.uint32((p.id<<3|3)>>>0)).uint32((p.id<<3|4)>>>0):a[d].encode(m,c.uint32((p.id<<3|2)>>>0).fork()).ldelim():c.uint32((p.id<<3|f)>>>0)[h](m))}return c}}}t.exports=a,a._configure=function(){o=n(582),i=n(696)}},582:function(e,t,r){e.exports=i;var n=r(998);((i.prototype=Object.create(n.prototype)).constructor=i).className="Enum";var o=r(476);function i(e,t,r,o,i){if(n.call(this,e,r),t&&"object"!=c(t))throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=o,this.comments=i||{},this.reserved=void 0,t)for(var a=Object.keys(t),s=0;s<a.length;++s)"number"==typeof t[a[s]]&&(this.valuesById[this.values[a[s]]=t[a[s]]]=a[s])}i.fromJSON=function(e,t){var r=new i(e,t.values,t.options,t.comment,t.comments);return r.reserved=t.reserved,r},i.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return util.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])},i.prototype.add=function(e,t,r){if(!util.isString(e))throw TypeError("name must be a string");if(!util.isInteger(t))throw TypeError("id must be an integer");if(void 0!==this.values[e])throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(void 0!==this.valuesById[t]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return this.comments[e]=r||null,this},i.prototype.remove=function(e){if(!util.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this},i.prototype.isReservedId=function(e){return o.isReservedId(this.reserved,e)},i.prototype.isReservedName=function(e){return o.isReservedName(this.reserved,e)}},286:function(e,t,r){e.exports=l;var n,o,i,a,s=r(998);((l.prototype=Object.create(s.prototype)).constructor=l).className="Field";var u=/^required|optional|repeated$/;function l(e,t,r,n,a,c,l){if(i.isObject(n)?(l=a,c=n,n=a=void 0):i.isObject(a)&&(l=c,c=a,a=void 0),s.call(this,e,c),!i.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!i.isString(r))throw TypeError("type must be a string");if(void 0!==n&&!u.test(n=n.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==a&&!i.isString(a))throw TypeError("extend must be a string");this.rule=n&&"optional"!==n?n:void 0,this.type=r,this.id=t,this.extend=a||void 0,this.required="required"===n,this.optional=!this.required,this.repeated="repeated"===n,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!i.Long&&void 0!==o.long[r],this.bytes="bytes"===r,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=l}l.fromJSON=function(e,t){return new l(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(l.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),l.prototype.setOption=function(e,t,r){return"packed"===e&&(this._packed=null),s.prototype.setOption.call(this,e,t,r)},l.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},l.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=o.defaults[this.type])&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof a?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof n&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof n)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=i.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var e;i.utf8.write(this.typeDefault,e=i.newBuffer(i.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=i.emptyObject:this.repeated?this.defaultValue=i.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof a&&(this.parent.ctor.prototype[this.name]=this.defaultValue),s.prototype.resolve.call(this)},l.d=function(e,t,r,n){return"function"==typeof t?t=i.decorateType(t).name:t&&"object"==c(t)&&(t=i.decorateEnum(t).name),function(o,a){i.decorateType(o.constructor).add(new l(a,e,t,r,{default:n}))}},l._configure=function(){a=r(192),n=r(582),o=r(696),i=r(935)}},283:function(e){function t(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=128===r[3];function o(e,n,o){t[0]=e,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3]}function i(e,n,o){t[0]=e,n[o]=r[3],n[o+1]=r[2],n[o+2]=r[1],n[o+3]=r[0]}function a(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],t[0]}function s(e,n){return r[3]=e[n],r[2]=e[n+1],r[1]=e[n+2],r[0]=e[n+3],t[0]}e.writeFloatLE=n?o:i,e.writeFloatBE=n?i:o,e.readFloatLE=n?a:s,e.readFloatBE=n?s:a}():function(){function t(e,t,r,n){var o=t<0?1:0;if(o&&(t=-t),0===t)e(1/t>0?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(t>34028234663852886e22)e((o<<31|2139095040)>>>0,r,n);else if(t<11754943508222875e-54)e((o<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var i=Math.floor(Math.log(t)/Math.LN2);e((o<<31|i+127<<23|8388607&Math.round(t*Math.pow(2,-i)*8388608))>>>0,r,n)}}function a(e,t,r){var n=e(t,r),o=2*(n>>31)+1,i=n>>>23&255,a=8388607&n;return 255===i?a?NaN:o*(1/0):0===i?1401298464324817e-60*o*a:o*Math.pow(2,i-150)*(a+8388608)}e.writeFloatLE=t.bind(null,r),e.writeFloatBE=t.bind(null,n),e.readFloatLE=a.bind(null,o),e.readFloatBE=a.bind(null,i)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=128===r[7];function o(e,n,o){t[0]=e,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3],n[o+4]=r[4],n[o+5]=r[5],n[o+6]=r[6],n[o+7]=r[7]}function i(e,n,o){t[0]=e,n[o]=r[7],n[o+1]=r[6],n[o+2]=r[5],n[o+3]=r[4],n[o+4]=r[3],n[o+5]=r[2],n[o+6]=r[1],n[o+7]=r[0]}function a(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],r[4]=e[n+4],r[5]=e[n+5],r[6]=e[n+6],r[7]=e[n+7],t[0]}function s(e,n){return r[7]=e[n],r[6]=e[n+1],r[5]=e[n+2],r[4]=e[n+3],r[3]=e[n+4],r[2]=e[n+5],r[1]=e[n+6],r[0]=e[n+7],t[0]}e.writeDoubleLE=n?o:i,e.writeDoubleBE=n?i:o,e.readDoubleLE=n?a:s,e.readDoubleBE=n?s:a}():function(){function t(e,t,r,n,o,i){var a=n<0?1:0;if(a&&(n=-n),0===n)e(0,o,i+t),e(1/n>0?0:2147483648,o,i+r);else if(isNaN(n))e(0,o,i+t),e(2146959360,o,i+r);else if(n>17976931348623157e292)e(0,o,i+t),e((a<<31|2146435072)>>>0,o,i+r);else{var s;if(n<22250738585072014e-324)e((s=n/5e-324)>>>0,o,i+t),e((a<<31|s/4294967296)>>>0,o,i+r);else{var c=Math.floor(Math.log(n)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(s=n*Math.pow(2,-c))>>>0,o,i+t),e((a<<31|c+1023<<20|1048576*s&1048575)>>>0,o,i+r)}}}function a(e,t,r,n,o){var i=e(n,o+t),a=e(n,o+r),s=2*(a>>31)+1,c=a>>>20&2047,u=4294967296*(1048575&a)+i;return 2047===c?u?NaN:s*(1/0):0===c?5e-324*s*u:s*Math.pow(2,c-1075)*(u+4503599627370496)}e.writeDoubleLE=t.bind(null,r,0,4),e.writeDoubleBE=t.bind(null,n,4,0),e.readDoubleLE=a.bind(null,o,0,4),e.readDoubleBE=a.bind(null,i,4,0)}(),e}function r(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function n(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function o(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function i(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},939:function(e){e.exports=r;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function r(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function n(e){return!0===(e&&e.__isLong__)}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=n;var o={},i={};function a(e,t){var r,n,a;return t?(a=0<=(e>>>=0)&&e<256)&&(n=i[e])?n:(r=c(e,(0|e)<0?-1:0,!0),a&&(i[e]=r),r):(a=-128<=(e|=0)&&e<128)&&(n=o[e])?n:(r=c(e,e<0?-1:0,!1),a&&(o[e]=r),r)}function s(e,t){if(isNaN(e))return t?E:g;if(t){if(e<0)return E;if(e>=h)return O}else{if(e<=-f)return R;if(e+1>=f)return T}return e<0?s(-e,t).neg():c(e%d|0,e/d|0,t)}function c(e,t,n){return new r(e,t,n)}r.fromInt=a,r.fromNumber=s,r.fromBits=c;var u=Math.pow;function l(e,t,r){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"==typeof t?(r=t,t=!1):t=!!t,(r=r||10)<2||36<r)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return l(e.substring(1),t,r).neg();for(var o=s(u(r,8)),i=g,a=0;a<e.length;a+=8){var c=Math.min(8,e.length-a),p=parseInt(e.substring(a,a+c),r);if(c<8){var d=s(u(r,c));i=i.mul(d).add(s(p))}else i=(i=i.mul(o)).add(s(p))}return i.unsigned=t,i}function p(e,t){return"number"==typeof e?s(e,t):"string"==typeof e?l(e,t):c(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=l,r.fromValue=p;var d=4294967296,h=d*d,f=h/2,m=a(1<<24),g=a(0);r.ZERO=g;var E=a(0,!0);r.UZERO=E;var y=a(1);r.ONE=y;var v=a(1,!0);r.UONE=v;var _=a(-1);r.NEG_ONE=_;var T=c(-1,2147483647,!1);r.MAX_VALUE=T;var O=c(-1,-1,!0);r.MAX_UNSIGNED_VALUE=O;var R=c(0,-2147483648,!1);r.MIN_VALUE=R;var I=r.prototype;I.toInt=function(){return this.unsigned?this.low>>>0:this.low},I.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},I.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(R)){var t=s(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var o=s(u(e,6),this.unsigned),i=this,a="";;){var c=i.div(o),l=(i.sub(c.mul(o)).toInt()>>>0).toString(e);if((i=c).isZero())return l+a;for(;l.length<6;)l="0"+l;a=""+l+a}},I.getHighBits=function(){return this.high},I.getHighBitsUnsigned=function(){return this.high>>>0},I.getLowBits=function(){return this.low},I.getLowBitsUnsigned=function(){return this.low>>>0},I.getNumBitsAbs=function(){if(this.isNegative())return this.eq(R)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},I.isZero=function(){return 0===this.high&&0===this.low},I.eqz=I.isZero,I.isNegative=function(){return!this.unsigned&&this.high<0},I.isPositive=function(){return this.unsigned||this.high>=0},I.isOdd=function(){return 1==(1&this.low)},I.isEven=function(){return 0==(1&this.low)},I.equals=function(e){return n(e)||(e=p(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},I.eq=I.equals,I.notEquals=function(e){return!this.eq(e)},I.neq=I.notEquals,I.ne=I.notEquals,I.lessThan=function(e){return this.comp(e)<0},I.lt=I.lessThan,I.lessThanOrEqual=function(e){return this.comp(e)<=0},I.lte=I.lessThanOrEqual,I.le=I.lessThanOrEqual,I.greaterThan=function(e){return this.comp(e)>0},I.gt=I.greaterThan,I.greaterThanOrEqual=function(e){return this.comp(e)>=0},I.gte=I.greaterThanOrEqual,I.ge=I.greaterThanOrEqual,I.compare=function(e){if(n(e)||(e=p(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},I.comp=I.compare,I.negate=function(){return!this.unsigned&&this.eq(R)?R:this.not().add(y)},I.neg=I.negate,I.add=function(e){n(e)||(e=p(e));var t=this.high>>>16,r=65535&this.high,o=this.low>>>16,i=65535&this.low,a=e.high>>>16,s=65535&e.high,u=e.low>>>16,l=0,d=0,h=0,f=0;return h+=(f+=i+(65535&e.low))>>>16,d+=(h+=o+u)>>>16,l+=(d+=r+s)>>>16,l+=t+a,c((h&=65535)<<16|(f&=65535),(l&=65535)<<16|(d&=65535),this.unsigned)},I.subtract=function(e){return n(e)||(e=p(e)),this.add(e.neg())},I.sub=I.subtract,I.multiply=function(e){if(this.isZero())return g;if(n(e)||(e=p(e)),t)return c(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return g;if(this.eq(R))return e.isOdd()?R:g;if(e.eq(R))return this.isOdd()?R:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return s(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,o=65535&this.high,i=this.low>>>16,a=65535&this.low,u=e.high>>>16,l=65535&e.high,d=e.low>>>16,h=65535&e.low,f=0,E=0,y=0,v=0;return y+=(v+=a*h)>>>16,E+=(y+=i*h)>>>16,y&=65535,E+=(y+=a*d)>>>16,f+=(E+=o*h)>>>16,E&=65535,f+=(E+=i*d)>>>16,E&=65535,f+=(E+=a*l)>>>16,f+=r*h+o*d+i*l+a*u,c((y&=65535)<<16|(v&=65535),(f&=65535)<<16|(E&=65535),this.unsigned)},I.mul=I.multiply,I.divide=function(e){if(n(e)||(e=p(e)),e.isZero())throw Error("division by zero");var r,o,i;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?E:g;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return E;if(e.gt(this.shru(1)))return v;i=E}else{if(this.eq(R))return e.eq(y)||e.eq(_)?R:e.eq(R)?y:(r=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?y:_:(o=this.sub(e.mul(r)),i=r.add(o.div(e)));if(e.eq(R))return this.unsigned?E:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=g}for(o=this;o.gte(e);){r=Math.max(1,Math.floor(o.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),l=a<=48?1:u(2,a-48),d=s(r),h=d.mul(e);h.isNegative()||h.gt(o);)h=(d=s(r-=l,this.unsigned)).mul(e);d.isZero()&&(d=y),i=i.add(d),o=o.sub(h)}return i},I.div=I.divide,I.modulo=function(e){return n(e)||(e=p(e)),t?c((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},I.mod=I.modulo,I.rem=I.modulo,I.not=function(){return c(~this.low,~this.high,this.unsigned)},I.and=function(e){return n(e)||(e=p(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},I.or=function(e){return n(e)||(e=p(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},I.xor=function(e){return n(e)||(e=p(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},I.shiftLeft=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},I.shl=I.shiftLeft,I.shiftRight=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},I.shr=I.shiftRight,I.shiftRightUnsigned=function(e){if(n(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?c(this.low>>>e|t<<32-e,t>>>e,this.unsigned):c(32===e?t:t>>>e-32,0,this.unsigned)},I.shru=I.shiftRightUnsigned,I.shr_u=I.shiftRightUnsigned,I.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},I.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},I.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},I.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},I.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},365:function(e,t,r){e.exports=o;var n=r(935);function o(e,t){this.lo=e>>>0,this.hi=t>>>0}var i=o.zero=new o(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var a=o.zeroHash="\0\0\0\0\0\0\0\0";o.fromNumber=function(e){if(0===e)return i;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/4294967296>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new o(r,n)},o.from=function(e){if("number"==typeof e)return o.fromNumber(e);if("string"==typeof e||e instanceof String){if(!n.Long)return o.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new o(e.low>>>0,e.high>>>0):i},o.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},o.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var s=String.prototype.charCodeAt;o.fromHash=function(e){return e===a?i:new o((s.call(e,0)|s.call(e,1)<<8|s.call(e,2)<<16|s.call(e,3)<<24)>>>0,(s.call(e,4)|s.call(e,5)<<8|s.call(e,6)<<16|s.call(e,7)<<24)>>>0)},o.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},o.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},o.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},o.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},435:function(e,t,r){e.exports=a;var n,o,i=r(286);function a(e,t,r,n,a,s){if(i.call(this,e,t,n,void 0,void 0,a,s),!o.isString(r))throw TypeError("keyType must be a string");this.keyType=r,this.resolvedKeyType=null,this.map=!0}((a.prototype=Object.create(i.prototype)).constructor=a).className="MapField",a.fromJSON=function(e,t){return new a(e,t.id,t.keyType,t.type,t.options,t.comment)},a.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},a.prototype.resolve=function(){if(this.resolved)return this;if(void 0===n.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return i.prototype.resolve.call(this)},a.d=function(e,t,r){return"function"==typeof r?r=o.decorateType(r).name:r&&"object"==c(r)&&(r=o.decorateEnum(r).name),function(n,i){o.decorateType(n.constructor).add(new a(i,e,t,r))}},a._configure=function(){n=r(696),o=r(935)}},339:function(e,t,r){"use strict";var n;function o(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)this[t[r]]=e[t[r]]}e.exports=o,o.create=function(e){return this.$type.create(e)},o.encode=function(e,t){return arguments.length?1==arguments.length?this.$type.encode(arguments[0]):this.$type.encode(arguments[0],arguments[1]):this.$type.encode(this)},o.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},o.decode=function(e){return this.$type.decode(e)},o.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},o.verify=function(e){return this.$type.verify(e)},o.fromObject=function(e){return this.$type.fromObject(e)},o.toObject=function(e,t){return e=e||this,this.$type.toObject(e,t)},o.prototype.toJSON=function(){return this.$type.toObject(this,n.toJSONOptions)},o.set=function(e,t){o[e]=t},o.get=function(e){return o[e]},o._configure=function(){n=r(935)}},484:function(e,t,r){"use strict";e.exports=i;var n,o=r(998);function i(e,t,r,i,a,s,c,u){if(n.isObject(a)?(c=a,a=s=void 0):n.isObject(s)&&(c=s,s=void 0),void 0!==t&&!n.isString(t))throw TypeError("type must be a string");if(!n.isString(r))throw TypeError("requestType must be a string");if(!n.isString(i))throw TypeError("responseType must be a string");o.call(this,e,c),this.type=t||"rpc",this.requestType=r,this.requestStream=!!a||void 0,this.responseType=i,this.responseStream=!!s||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=u}((i.prototype=Object.create(o.prototype)).constructor=i).className="Method",i.fromJSON=function(e,t){return new i(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment)},i.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return n.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0])},i.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),o.prototype.resolve.call(this))},i._configure=function(){n=r(935)}},476:function(e,t,r){e.exports=l;var n,o,i,a,s,c=r(998);function u(e,t){if(e&&e.length){for(var r={},n=0;n<e.length;++n)r[e[n].name]=e[n].toJSON(t);return r}}function l(e,t){c.call(this,e,t),this.nested=void 0,this._nestedArray=null}function p(e){return e._nestedArray=null,e}((l.prototype=Object.create(c.prototype)).constructor=l).className="Namespace",l.fromJSON=function(e,t){return new l(e,t.options).addJSON(t.nested)},l.arrayToJSON=u,l.isReservedId=function(e,t){if(e)for(var r=0;r<e.length;++r)if("string"!=typeof e[r]&&e[r][0]<=t&&e[r][1]>=t)return!0;return!1},l.isReservedName=function(e,t){if(e)for(var r=0;r<e.length;++r)if(e[r]===t)return!0;return!1},Object.defineProperty(l.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=i.toArray(this.nested))}}),l.prototype.toJSON=function(e){return i.toObject(["options",this.options,"nested",u(this.nestedArray,e)])},l.prototype.addJSON=function(e){if(e)for(var t,r=Object.keys(e),i=0;i<r.length;++i)t=e[r[i]],this.add((void 0!==t.fields?a.fromJSON:void 0!==t.values?n.fromJSON:void 0!==t.methods?s.fromJSON:void 0!==t.id?o.fromJSON:l.fromJSON)(r[i],t));return this},l.prototype.get=function(e){return this.nested&&this.nested[e]||null},l.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof n)return this.nested[e].values;throw Error("no such enum: "+e)},l.prototype.add=function(e){if(!(e instanceof o&&void 0!==e.extend||e instanceof a||e instanceof n||e instanceof s||e instanceof l))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(!(t instanceof l&&e instanceof l)||t instanceof a||t instanceof s)throw Error("duplicate name '"+e.name+"' in "+this);for(var r=t.nestedArray,i=0;i<r.length;++i)e.add(r[i]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}}else this.nested={};return this.nested[e.name]=e,e.onAdd(this),p(this)},l.prototype.remove=function(e){if(!(e instanceof c))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),p(this)},l.prototype.define=function(e,t){if(i.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var r=this;e.length>0;){var n=e.shift();if(r.nested&&r.nested[n]){if(!((r=r.nested[n])instanceof l))throw Error("path conflicts with non-namespace objects")}else r.add(r=new l(n))}return t&&r.addJSON(t),r},l.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof l?e[t++].resolveAll():e[t++].resolve();return this.resolve()},l.prototype.lookup=function(e,t,r){if("boolean"==typeof t?(r=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),i.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var n=this.get(e[0]);if(n){if(1===e.length){if(!t||t.indexOf(n.constructor)>-1)return n}else if(n instanceof l&&(n=n.lookup(e.slice(1),t,!0)))return n}else for(var o=0;o<this.nestedArray.length;++o)if(this._nestedArray[o]instanceof l&&(n=this._nestedArray[o].lookup(e,t,!0)))return n;return null===this.parent||r?null:this.parent.lookup(e,t)},l.prototype.lookupType=function(e){var t=this.lookup(e,[a]);if(!t)throw Error("no such type: "+e);return t},l.prototype.lookupEnum=function(e){var t=this.lookup(e,[n]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},l.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[a,n]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},l.prototype.lookupService=function(e){var t=this.lookup(e,[s]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},l._configure=function(){n=r(582),o=r(286),i=r(935),a=r(192),s=r(447)}},998:function(e,t,r){"use strict";var n,o;function i(e,t){if(!n.isString(e))throw TypeError("name must be a string");if(t&&!n.isObject(t))throw TypeError("options must be an object");this.options=t,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}e.exports=i,i.className="ReflectionObject",Object.defineProperties(i.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),i.prototype.toJSON=function(){throw Error()},i.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof o&&t._handleAdd(this)},i.prototype.onRemove=function(e){var t=e.root;t instanceof o&&t._handleRemove(this),this.parent=null,this.resolved=!1},i.prototype.resolve=function(){return this.resolved||this.root instanceof o&&(this.resolved=!0),this},i.prototype.getOption=function(e){if(this.options)return this.options[e]},i.prototype.setOption=function(e,t,r){return r&&this.options&&void 0!==this.options[e]||((this.options||(this.options={}))[e]=t),this},i.prototype.setOptions=function(e,t){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)this.setOption(r[n],e[r[n]],t);return this},i.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},i._configure=function(e){o=r(685),n=r(935)}},735:function(e,t,r){e.exports=a;var n,o,i=r(998);function a(e,t,r,n){if(Array.isArray(t)||(r=t,t=void 0),i.call(this,e,r),void 0!==t&&!Array.isArray(t))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=n}function s(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}((a.prototype=Object.create(i.prototype)).constructor=a).className="OneOf",a.fromJSON=function(e,t){return new a(e,t.oneof,t.options,t.comment)},a.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])},a.prototype.add=function(e){if(!(e instanceof n))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,s(this),this},a.prototype.remove=function(e){if(!(e instanceof n))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),(t=this.oneof.indexOf(e.name))>-1&&this.oneof.splice(t,1),e.partOf=null,this},a.prototype.onAdd=function(e){i.prototype.onAdd.call(this,e);for(var t=0;t<this.oneof.length;++t){var r=e.get(this.oneof[t]);r&&!r.partOf&&(r.partOf=this,this.fieldsArray.push(r))}s(this)},a.prototype.onRemove=function(e){for(var t,r=0;r<this.fieldsArray.length;++r)(t=this.fieldsArray[r]).parent&&t.parent.remove(t);i.prototype.onRemove.call(this,e)},a.d=function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,r){o.decorateType(t.constructor).add(new a(r,e)),Object.defineProperty(t,r,{get:o.oneOfGetter(e),set:o.oneOfSetter(e)})}},a._configure=function(){n=r(286),o=r(935)}},845:function(e,t,r){"use strict";var n,o,i,a,s,c,u,l,p,d,h;e.exports=I,I.filename=null,I.defaults={keepCase:!1};var f=/^[1-9][0-9]*$/,m=/^-?[1-9][0-9]*$/,g=/^0[x][0-9a-fA-F]+$/,E=/^-?0[x][0-9a-fA-F]+$/,y=/^0[0-7]+$/,v=/^-?0[0-7]+$/,_=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,T=/^[a-zA-Z_][a-zA-Z_0-9]*$/,O=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)+$/,R=/^(?:\.[a-zA-Z][a-zA-Z_0-9]*)+$/;function I(e,t,r){t instanceof o||(r=t,t=new o),r||(r=I.defaults);var S,C,N,A,b,M=n(e,r.alternateCommentMode||!1),w=M.next,U=M.push,P=M.peek,k=M.skip,L=M.cmnt,x=!0,D=!1,j=t,G=r.keepCase?function(e){return e}:h.camelCase;function B(e,t,r){var n=I.filename;return r||(I.filename=null),Error("illegal "+(t||"token")+" '"+e+"' ("+(n?n+", ":"")+"line "+M.line+")")}function H(){var e,t=[];do{if('"'!==(e=w())&&"'"!==e)throw B(e);t.push(w()),k(e),e=P()}while('"'===e||"'"===e);return t.join("")}function F(e){var t=w();switch(t){case"'":case'"':return U(t),H();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return function(e,t){var r=1;switch("-"===e.charAt(0)&&(r=-1,e=e.substring(1)),e){case"inf":case"INF":case"Inf":return r*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(f.test(e))return r*parseInt(e,10);if(g.test(e))return r*parseInt(e,16);if(y.test(e))return r*parseInt(e,8);if(_.test(e))return r*parseFloat(e);throw B(e,"number",!0)}(t)}catch(r){if(e&&O.test(t))return t;throw B(t,"value")}}function W(e,t){var r,n;do{!t||'"'!==(r=P())&&"'"!==r?e.push([n=K(w()),k("to",!0)?K(w()):n]):e.push(H())}while(k(",",!0));k(";")}function K(e,t){switch(e){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!t&&"-"===e.charAt(0))throw B(e,"id");if(m.test(e))return parseInt(e,10);if(E.test(e))return parseInt(e,16);if(v.test(e))return parseInt(e,8);throw B(e,"id")}function V(){if(void 0!==S)throw B("package");if(S=w(),!O.test(S))throw B(S,"name");j=j.define(S),k(";")}function q(){var e,t=P();switch(t){case"weak":e=N||(N=[]),w();break;case"public":w();default:e=C||(C=[])}t=H(),k(";"),e.push(t)}function z(){if(k("="),A=H(),!(D="proto3"===A)&&"proto2"!==A)throw B(A,"syntax");k(";")}function J(e,t){switch(t){case"option":return X(e,t),k(";"),!0;case"message":return function(e,t){if(!T.test(t=w()))throw B(t,"type name");var r=new i(t);$(r,(function(e){if(!J(r,e))switch(e){case"map":!function(e){k("<");var t=w();if(void 0===d.mapKey[t])throw B(t,"type");k(",");var r=w();if(!O.test(r))throw B(r,"type");k(">");var n=w();if(!T.test(n))throw B(n,"name");k("=");var o=new s(G(n),K(w()),t,r);$(o,(function(e){if("option"!==e)throw B(e);X(o,e),k(";")}),(function(){Z(o)})),e.add(o)}(r);break;case"required":case"optional":case"repeated":Y(r,e);break;case"oneof":!function(e,t){if(!T.test(t=w()))throw B(t,"name");var r=new c(G(t));$(r,(function(e){"option"===e?(X(r,e),k(";")):(U(e),Y(r,"optional"))})),e.add(r)}(r,e);break;case"extensions":W(r.extensions||(r.extensions=[]));break;case"reserved":W(r.reserved||(r.reserved=[]),!0);break;default:if(!D||!O.test(e))throw B(e);U(e),Y(r,"optional")}})),e.add(r)}(e,t),!0;case"enum":return function(e,t){if(!T.test(t=w()))throw B(t,"name");var r=new u(t);$(r,(function(e){switch(e){case"option":X(r,e),k(";");break;case"reserved":W(r.reserved||(r.reserved=[]),!0);break;default:!function(e,t){if(!T.test(t))throw B(t,"name");k("=");var r=K(w(),!0),n={};$(n,(function(e){if("option"!==e)throw B(e);X(n,e),k(";")}),(function(){Z(n)})),e.add(t,r,n.comment)}(r,e)}})),e.add(r)}(e,t),!0;case"service":return function(e,t){if(!T.test(t=w()))throw B(t,"service name");var r=new l(t);$(r,(function(e){if(!J(r,e)){if("rpc"!==e)throw B(e);!function(e,t){var r=t;if(!T.test(t=w()))throw B(t,"name");var n,o,i,a,s=t;if(k("("),k("stream",!0)&&(o=!0),!O.test(t=w()))throw B(t);if(n=t,k(")"),k("returns"),k("("),k("stream",!0)&&(a=!0),!O.test(t=w()))throw B(t);i=t,k(")");var c=new p(s,r,n,i,o,a);$(c,(function(e){if("option"!==e)throw B(e);X(c,e),k(";")})),e.add(c)}(r,e)}})),e.add(r)}(e,t),!0;case"extend":return function(e,t){if(!O.test(t=w()))throw B(t,"reference");var r=t;$(null,(function(t){switch(t){case"required":case"repeated":case"optional":Y(e,t,r);break;default:if(!D||!O.test(t))throw B(t);U(t),Y(e,"optional",r)}}))}(e,t),!0}return!1}function $(e,t,r){var n=M.line;if(e&&(e.comment=L(),e.filename=I.filename),k("{",!0)){for(var o;"}"!==(o=w());)t(o);k(";",!0)}else r&&r(),k(";"),e&&"string"!=typeof e.comment&&(e.comment=L(n))}function Y(e,t,r){var n=w();if("group"!==n){if(!O.test(n))throw B(n,"type");var o=w();if(!T.test(o))throw B(o,"name");o=G(o),k("=");var s=new a(o,K(w()),n,t,r);$(s,(function(e){if("option"!==e)throw B(e);X(s,e),k(";")}),(function(){Z(s)})),e.add(s),D||!s.repeated||void 0===d.packed[n]&&void 0!==d.basic[n]||s.setOption("packed",!1,!0)}else!function(e,t){var r=w();if(!T.test(r))throw B(r,"name");var n=h.lcFirst(r);r===n&&(r=h.ucFirst(r)),k("=");var o=K(w()),s=new i(r);s.group=!0;var c=new a(n,o,r,t);c.filename=I.filename,$(s,(function(e){switch(e){case"option":X(s,e),k(";");break;case"required":case"optional":case"repeated":Y(s,e);break;default:throw B(e)}})),e.add(s).add(c)}(e,t)}function X(e,t){var r=k("(",!0);if(!O.test(t=w()))throw B(t,"name");var n=t;r&&(k(")"),n="("+n+")",t=P(),R.test(t)&&(n+=t,w())),k("="),function e(t,r){if(k("{",!0))do{if(!T.test(b=w()))throw B(b,"name");"{"===P()?e(t,r+"."+b):(k(":"),"{"===P()?e(t,r+"."+b):Q(t,r+"."+b,F(!0)))}while(!k("}",!0));else Q(t,r,F(!0))}(e,n)}function Q(e,t,r){e.setOption&&e.setOption(t,r)}function Z(e){if(k("[",!0)){do{X(e,"option")}while(k(",",!0));k("]")}return e}for(;null!==(b=w());)switch(b){case"package":if(!x)throw B(b);V();break;case"import":if(!x)throw B(b);q();break;case"syntax":if(!x)throw B(b);z();break;case"option":if(!x)throw B(b);X(j,b),k(";");break;default:if(J(j,b)){x=!1;continue}throw B(b)}return I.filename=null,{package:S,imports:C,weakImports:N,syntax:A,root:t}}I._configure=function(){n=r(869),o=r(685),i=r(192),a=r(286),s=r(435),c=r(735),u=r(582),l=r(447),p=r(484),d=r(696),h=r(935)}},444:function(e){var t=e.exports,r=t.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},n=t.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),n=r(e),o="";n&&(o=t.shift()+"/");for(var i=0;i<t.length;)".."===t[i]?i>0&&".."!==t[i-1]?t.splice(--i,2):n?t.splice(i,1):++i:"."===t[i]?t.splice(i,1):++i;return o+t.join("/")};t.resolve=function(e,t,o){return o||(t=n(t)),r(t)?t:(o||(e=n(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?n(e+"/"+t):t)}},997:function(e){e.exports=function(e,t,r){var n=r||8192,o=n>>>1,i=null,a=n;return function(r){if(r<1||r>o)return e(r);a+r>n&&(i=e(n),a=0);var s=t.call(i,a,a+=r);return 7&a&&(a=1+(7|a)),s}}},494:function(t,r,n){t.exports=c;var o,i,a=n(935);function s(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var u,l="undefined"!=typeof Uint8Array?function(t){return t instanceof Uint8Array||Array.isArray(t)?new c(t):("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer&&e("warn",""," at SDK/4.1.7-uniapp-log.js:1"),new c(new Uint8Array(t)))}:function(e){if(Array.isArray(e))return new c(e)};function p(){var e=new o(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw s(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw s(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function d(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function h(){if(this.pos+8>this.len)throw s(this,8);return new o(d(this.buf,this.pos+=4),d(this.buf,this.pos+=4))}c.create=a.Buffer?function(e){return(c.create=function(e){return a.Buffer.isBuffer(e)?new(void 0)(e):l(e)})(e)}:l,c.prototype._slice=a.Array.prototype.subarray||a.Array.prototype.slice,c.prototype.uint32=(u=4294967295,function(){if(u=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return u;if((this.pos+=5)>this.len)throw this.pos=this.len,s(this,10);return u}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw s(this,4);return d(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw s(this,4);return 0|d(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw s(this,4);var e=a.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw s(this,4);var e=a.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw s(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},c.prototype.string=function(){var e=this.bytes();return i.read(e,0,e.length)},c.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw s(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw s(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(){o=n(365),i=n(498);var e=a.Long?"toLong":"toNumber";a.merge(c.prototype,{int64:function(){return p.call(this)[e](!1)},uint64:function(){return p.call(this)[e](!0)},sint64:function(){return p.call(this).zzDecode()[e](!1)},fixed64:function(){return h.call(this)[e](!0)},sfixed64:function(){return h.call(this)[e](!1)}})}},685:function(t,r,n){t.exports=h;var o=n(476);((h.prototype=Object.create(o.prototype)).constructor=h).className="Root";var i,a,s,u=n(286),l=n(582),p=n(735),d=n(935);function h(e){o.call(this,"",e),this.deferred=[],this.files=[],this.names=[]}function f(){}h.fromJSON=function(e,t){return e="string"==typeof e?JSON.parse(e):e,t||(t=new h),e.options&&t.setOptions(e.options),t.addJSON(e.nested)},h.prototype.resolvePath=d.path.resolve,h.prototype.parseFromPbString=function t(r,n,o){"function"==typeof n&&(o=n,n=void 0);var i=this;if(!o)return d.asPromise(t,i,r,n);var u=null;if("string"==typeof r)u=JSON.parse(r);else{if("object"!=c(r))return void e("log","pb\u683c\u5f0f\u8f6c\u5316\u5931\u8d25"," at SDK/4.1.7-uniapp-log.js:1");u=r}function l(e,t){if(o){var r=o;o=null,r(e,t)}}function p(e,t){try{if(d.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),d.isString(t)){a.filename=e;var r,o=a(t,i,n),s=0;if(o.imports)for(;s<o.imports.length;++s)h(r=o.imports[s]);if(o.weakImports){for(s=0;s<o.weakImports.length;++s)r=o.weakImports[s];h(r)}}else i.setOptions(t.options).addJSON(t.nested)}catch(e){l(e)}l(null,i)}function h(e){i.names.indexOf(e)>-1||(i.names.push(e),e in s&&p(e,s[e]))}p(u.name,u.pbJsonStr)},h.prototype.load=function e(t,r,n){"function"==typeof r&&(n=r,r=void 0);var o=this;if(!n)return d.asPromise(e,o,t,r);var i=n===f;function c(e,t){if(n){var r=n;if(n=null,i)throw e;r(e,t)}}function u(e,t){try{if(d.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),d.isString(t)){a.filename=e;var n,s=a(t,o,r),u=0;if(s.imports)for(;u<s.imports.length;++u)(n=o.resolvePath(e,s.imports[u]))&&l(n);if(s.weakImports)for(u=0;u<s.weakImports.length;++u)(n=o.resolvePath(e,s.weakImports[u]))&&l(n,!0)}else o.setOptions(t.options).addJSON(t.nested)}catch(e){c(e)}i||p||c(null,o)}function l(e,t){var r=e.lastIndexOf("google/protobuf/");if(r>-1){var a=e.substring(r);a in s&&(e=a)}if(!(o.files.indexOf(e)>-1))if(o.files.push(e),e in s)i?u(e,s[e]):(++p,setTimeout((function(){--p,u(e,s[e])})));else if(i){var l;try{l=d.fs.readFileSync(e).toString("utf8")}catch(e){return void(t||c(e))}u(e,l)}else++p,d.fetch(e,(function(r,i){--p,n&&(r?t?p||c(null,o):c(r):u(e,i))}))}var p=0;d.isString(t)&&(t=[t]);for(var h,m=0;m<t.length;++m)(h=o.resolvePath("",t[m]))&&l(h);if(i)return o;p||c(null,o)},h.prototype.loadSync=function(e,t){if(!d.isNode)throw Error("not supported");return this.load(e,t,f)},h.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(e){return"'extend "+e.extend+"' in "+e.parent.fullName})).join(", "));return o.prototype.resolveAll.call(this)};var m=/^[A-Z]/;function g(e,t){var r=t.parent.lookup(t.extend);if(r){var n=new u(t.fullName,t.id,t.type,t.rule,void 0,t.options);return n.declaringField=t,t.extensionField=n,r.add(n),!0}return!1}h.prototype._handleAdd=function(e){if(e instanceof u)void 0===e.extend||e.extensionField||g(0,e)||this.deferred.push(e);else if(e instanceof l)m.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof p)){if(e instanceof i)for(var t=0;t<this.deferred.length;)g(0,this.deferred[t])?this.deferred.splice(t,1):++t;for(var r=0;r<e.nestedArray.length;++r)this._handleAdd(e._nestedArray[r]);m.test(e.name)&&(e.parent[e.name]=e)}},h.prototype._handleRemove=function(e){if(e instanceof u){if(void 0!==e.extend)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof l)m.test(e.name)&&delete e.parent[e.name];else if(e instanceof o){for(var r=0;r<e.nestedArray.length;++r)this._handleRemove(e._nestedArray[r]);m.test(e.name)&&delete e.parent[e.name]}},h._configure=function(){i=n(192),a=n(845),s=n(72),u=n(286),l=n(582),p=n(735),d=n(935)}},889:function(e){e.exports={}},325:function(e,t,r){"use strict";e.exports=o;var n=r(935);function o(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(o.prototype=Object.create(n.EventEmitter.prototype)).constructor=o,o.prototype.rpcCall=function e(t,r,o,i,a){if(!i)throw TypeError("request must be specified");var s=this;if(!a)return n.asPromise(e,s,t,r,o,i);if(s.rpcImpl)try{return s.rpcImpl(t,r[s.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,r){if(e)return s.emit("error",e,t),a(e);if(null!==r){if(!(r instanceof o))try{r=o[s.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return s.emit("error",e,t),a(e)}return s.emit("data",r,t),a(null,r)}s.end(!0)}))}catch(e){return s.emit("error",e,t),void setTimeout((function(){a(e)}),0)}else setTimeout((function(){a(Error("already ended"))}),0)},o.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},447:function(e,t,r){"use strict";e.exports=s;var n,o,i,a=r(476);function s(e,t){a.call(this,e,t),this.methods={},this._methodsArray=null}function c(e){return e._methodsArray=null,e}((s.prototype=Object.create(a.prototype)).constructor=s).className="Service",s.fromJSON=function(e,t){var r=new s(e,t.options);if(t.methods)for(var o=Object.keys(t.methods),i=0;i<o.length;++i)r.add(n.fromJSON(o[i],t.methods[o[i]]));return t.nested&&r.addJSON(t.nested),r.comment=t.comment,r},s.prototype.toJSON=function(e){var t=a.prototype.toJSON.call(this,e),r=!!e&&Boolean(e.keepComments);return o.toObject(["options",t&&t.options||void 0,"methods",a.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])},Object.defineProperty(s.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=o.toArray(this.methods))}}),s.prototype.get=function(e){return this.methods[e]||a.prototype.get.call(this,e)},s.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return a.prototype.resolve.call(this)},s.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof n?(this.methods[e.name]=e,e.parent=this,c(this)):a.prototype.add.call(this,e)},s.prototype.remove=function(e){if(e instanceof n){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,c(this)}return a.prototype.remove.call(this,e)},s.prototype.create=function(e,t,r){for(var n,a=new i.Service(e,t,r),s=0;s<this.methodsArray.length;++s){var c=o.lcFirst((n=this._methodsArray[s]).resolve().name).replace(/[^$\w_]/g,"");a[c]=o.codegen(["r","c"],o.isReserved(c)?c+"_":c)("return this.rpcCall(m,q,s,r,c)")({m:n,q:n.resolvedRequestType.ctor,s:n.resolvedResponseType.ctor})}return a},s._configure=function(){n=r(484),o=r(935),i=r(325)}},869:function(e){e.exports=p;var t=/[\s{}=;:[\],'"()<>]/g,r=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,n=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,o=/^ *[*/]+ */,i=/^\s*\*?\/*/,a=/\n/g,s=/\s/,c=/\\(.?)/g,u={0:"\0",r:"\r",n:"\n",t:"\t"};function l(e){return e.replace(c,(function(e,t){switch(t){case"\\":case"":return t;default:return u[t]||""}}))}function p(e,c){e=e.toString();var u=0,p=e.length,d=1,h=null,f=null,m=0,g=!1,E=[],y=null;function v(e){return Error("illegal "+e+" (line "+d+")")}function _(t){return e.charAt(t)}function T(t,r){h=e.charAt(t++),m=d,g=!1;var n,s=t-(c?2:3);do{if(--s<0||"\n"===(n=e.charAt(s))){g=!0;break}}while(" "===n||"\t"===n);for(var u=e.substring(t,r).split(a),l=0;l<u.length;++l)u[l]=u[l].replace(c?i:o,"").trim();f=u.join("\n").trim()}function O(t){var r=R(t),n=e.substring(t,r);return/^\s*\/{1,2}/.test(n)}function R(e){for(var t=e;t<p&&"\n"!==_(t);)t++;return t}function I(){if(E.length>0)return E.shift();if(y)return function(){var t="'"===y?n:r;t.lastIndex=u-1;var o=t.exec(e);if(!o)throw v("string");return u=t.lastIndex,S(y),y=null,l(o[1])}();var o,i,a,h,f;do{if(u===p)return null;for(o=!1;s.test(a=_(u));)if("\n"===a&&++d,++u===p)return null;if("/"===_(u)){if(++u===p)throw v("comment");if("/"===_(u))if(c){if(h=u,f=!1,O(u)){f=!0;do{if((u=R(u))===p)break;u++}while(O(u))}else u=Math.min(p,R(u)+1);f&&T(h,u),d++,o=!0}else{for(f="/"===_(h=u+1);"\n"!==_(++u);)if(u===p)return null;++u,f&&T(h,u-1),++d,o=!0}else{if("*"!==(a=_(u)))return"/";h=u+1,f=c||"*"===_(h);do{if("\n"===a&&++d,++u===p)throw v("comment");i=a,a=_(u)}while("*"!==i||"/"!==a);++u,f&&T(h,u-2),o=!0}}}while(o);var m=u;if(t.lastIndex=0,!t.test(_(m++)))for(;m<p&&!t.test(_(m));)++m;var g=e.substring(u,u=m);return'"'!==g&&"'"!==g||(y=g),g}function S(e){E.push(e)}function C(){if(!E.length){var e=I();if(null===e)return null;S(e)}return E[0]}return Object.defineProperty({next:I,peek:C,push:S,skip:function(e,t){var r=C();if(r===e)return I(),!0;if(!t)throw v("token '"+r+"', '"+e+"' expected");return!1},cmnt:function(e){var t=null;return void 0===e?m===d-1&&(c||"*"===h||g)&&(t=f):(m<e&&C(),m!==e||g||!c&&"/"!==h||(t=f)),t}},"line",{get:function(){return d}})}p.unescape=l},192:function(e,t,r){e.exports=y;var n,o,i,a,s,c,u,l,p,d,h,f,m,g,E=r(476);function y(e,t){E.call(this,e,t),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function v(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}((y.prototype=Object.create(E.prototype)).constructor=y).className="Type",Object.defineProperties(y.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var r=this.fields[e[t]],n=r.id;if(this._fieldsById[n])throw Error("duplicate id "+n+" in "+this);this._fieldsById[n]=r}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=u.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=u.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=y.generateConstructor(this))},set:function(e){var t=e.prototype;t instanceof i||((e.prototype=new i).constructor=e,u.merge(e.prototype,t)),e.$type=e.prototype.$type=this,u.merge(e,i,!0),u.merge(e.prototype,i,!0),this._ctor=e;for(var r=0;r<this.fieldsArray.length;++r)this._fieldsArray[r].resolve();var n={};for(r=0;r<this.oneofsArray.length;++r){var o=this._oneofsArray[r].resolve().name,a=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=0;return{setter:function(r){if(!(e.indexOf(r)<0)){t[r]=1;for(var n=0;n<e.length;++n)e[n]!==r&&delete this[e[n]]}},getter:function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}}}(this._oneofsArray[r].oneof);n[o]={get:a.getter,set:a.setter}}r&&Object.defineProperties(e.prototype,n)}}}),y.generateConstructor=function(e){return function(t){for(var r,n=0;n<e.fieldsArray.length;n++)(r=e._fieldsArray[n]).map?this[r.name]={}:r.repeated&&(this[r.name]=[]);if(t)for(var o=Object.keys(t),i=0;i<o.length;++i)null!=t[o[i]]&&(this[o[i]]=t[o[i]])}},y.fromJSON=function(e,t){var r=new y(e,t.options);r.extensions=t.extensions,r.reserved=t.reserved;for(var i=Object.keys(t.fields),s=0;s<i.length;++s)r.add((void 0!==t.fields[i[s]].keyType?g.fromJSON:o.fromJSON)(i[s],t.fields[i[s]]));if(t.oneofs)for(i=Object.keys(t.oneofs),s=0;s<i.length;++s)r.add(a.fromJSON(i[s],t.oneofs[i[s]]));if(t.nested)for(i=Object.keys(t.nested),s=0;s<i.length;++s){var c=t.nested[i[s]];r.add((void 0!==c.id?o.fromJSON:void 0!==c.fields?y.fromJSON:void 0!==c.values?n.fromJSON:void 0!==c.methods?h.fromJSON:E.fromJSON)(i[s],c))}return t.extensions&&t.extensions.length&&(r.extensions=t.extensions),t.reserved&&t.reserved.length&&(r.reserved=t.reserved),t.group&&(r.group=!0),t.comment&&(r.comment=t.comment),r},y.prototype.toJSON=function(e){var t=E.prototype.toJSON.call(this,e),r=!!e&&Boolean(e.keepComments);return{options:t&&t.options||void 0,oneofs:E.arrayToJSON(this.oneofsArray,e),fields:E.arrayToJSON(this.fieldsArray.filter((function(e){return!e.declaringField})),e)||{},extensions:this.extensions&&this.extensions.length?this.extensions:void 0,reserved:this.reserved&&this.reserved.length?this.reserved:void 0,group:this.group||void 0,nested:t&&t.nested||void 0,comment:r?this.comment:void 0}},y.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var r=this.oneofsArray;for(t=0;t<r.length;)r[t++].resolve();return E.prototype.resolveAll.call(this)},y.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},y.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof o&&void 0===e.extend){if(this._fieldsById&&this._fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),v(this)}return e instanceof a?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),v(this)):E.prototype.add.call(this,e)},y.prototype.remove=function(e){if(e instanceof o&&void 0===e.extend){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),v(this)}if(e instanceof a){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),v(this)}return E.prototype.remove.call(this,e)},y.prototype.isReservedId=function(e){return E.isReservedId(this.reserved,e)},y.prototype.isReservedName=function(e){return E.isReservedName(this.reserved,e)},y.prototype.create=function(e){return new this.ctor(e)},y.prototype.setup=function(){for(var e=this.fullName,t=[],r=0;r<this.fieldsArray.length;++r)t.push(this._fieldsArray[r].resolve().resolvedType);this.encode=p(this)({Writer:s,types:t,util:u}),this.decode=d(this)({Reader:c,types:t,util:u}),this.verify=l(this)({types:t,util:u}),this.fromObject=m.fromObject(this)({types:t,util:u}),this.toObject=m.toObject(this)({types:t,util:u});var n=f[e];if(n){var o=Object.create(this);o.fromObject=this.fromObject,this.fromObject=n.fromObject.bind(o),o.toObject=this.toObject,this.toObject=n.toObject.bind(o)}return this},y.prototype.encode=function(e,t){return this.setup().encode(e,t)},y.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},y.prototype.decode=function(e,t){return this.setup().decode(e,t)},y.prototype.decodeDelimited=function(e){return e instanceof c||(e=c.create(e)),this.decode(e,e.uint32())},y.prototype.verify=function(e){return this.setup().verify(e)},y.prototype.fromObject=function(e){return this.setup().fromObject(e)},y.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},y.d=function(e){return function(t){u.decorateType(t,e)}},y._configure=function(){n=r(582),o=r(286),i=r(339),a=r(735),s=r(244),c=r(494),u=r(935),l=r(216),p=r(929),d=r(888),h=r(447),f=r(834),m=r(525),g=r(435)}},696:function(e,t,r){"use strict";var n=e.exports,o=r(935),i=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function a(e,t){var r=0,n={};for(t|=0;r<e.length;)n[i[r+t]]=e[r++];return n}n.basic=a([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),n.defaults=a([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",o.emptyArray,null]),n.long=a([0,0,0,1,1],7),n.mapKey=a([0,0,0,5,5,0,0,0,1,1,0,2],2),n.packed=a([1,5,0,0,0,5,5,0,0,0,1,1,0]),n._configure=function(){o=r(935)}},498:function(e){"use strict";var t=e.exports;t.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},t.read=function(e,t,r){if(r-t<1)return"";for(var n,o=null,i=[],a=0;t<r;)(n=e[t++])<128?i[a++]=n:n>191&&n<224?i[a++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[a++]=55296+(n>>10),i[a++]=56320+(1023&n)):i[a++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,i)),a=0);return o?(a&&o.push(String.fromCharCode.apply(String,i.slice(0,a))),o.join("")):String.fromCharCode.apply(String,i.slice(0,a))},t.write=function(e,t,r){for(var n,o,i=r,a=0;a<e.length;++a)(n=e.charCodeAt(a))<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,t[r++]=63&n|128):55296==(64512&n)&&56320==(64512&(o=e.charCodeAt(a+1)))?(n=65536+((1023&n)<<10)+(1023&o),++a,t[r++]=n>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=63&n|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=63&n|128);return r-i}},935:function(e,t,r){var n=e.exports,o=r(889);n.LongBits=r(365),n.Long=r(939),n.pool=r(997),n.float=r(283),n.asPromise=r(728),n.EventEmitter=r(969),n.path=r(444),n.base64=r(440),n.utf8=r(498),n.compareFieldsById=function(e,t){return e.id-t.id},n.toArray=function(e){if(e){for(var t=Object.keys(e),r=new Array(t.length),n=0;n<t.length;)r[n]=e[t[n++]];return r}return[]},n.toObject=function(e){for(var t={},r=0;r<e.length;){var n=e[r++],o=e[r++];void 0!==o&&(t[n]=o)}return t},n.isString=function(e){return"string"==typeof e||e instanceof String},n.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},n.isObject=function(e){return e&&"object"==c(e)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},n.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},n.merge=function(e,t,r){for(var n=Object.keys(t),o=0;o<n.length;++o)void 0!==e[n[o]]&&r||(e[n[o]]=t[n[o]]);return e},n.decorateType=function(e,t){if(e.$type)return t&&e.$type.name!==t&&(n.decorateRoot.remove(e.$type),e.$type.name=t,n.decorateRoot.add(e.$type)),e.$type;Type||(Type=r(192));var o=new Type(t||e.name);return n.decorateRoot.add(o),o.ctor=e,Object.defineProperty(e,"$type",{value:o,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:o,enumerable:!1}),o},n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.copy=function(e){if("object"!=c(e))return e;var t={};for(var r in e)t[r]=e[r];return t},n.deepCopy=function e(t){if("object"!=c(t))return t;var r={};for(var n in t)r[n]=e(t[n]);return r},n.ProtocolError=function(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&merge(this,r)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n.Buffer=null,n.newBuffer=function(e){return"number"==typeof e?new n.Array(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},n.stringToBytes=function(e){var t,r,n=[];t=e.length;for(var o=0;o<t;o++)(r=e.charCodeAt(o))>=65536&&r<=1114111?(n.push(r>>18&7|240),n.push(r>>12&63|128),n.push(r>>6&63|128),n.push(63&r|128)):r>=2048&&r<=65535?(n.push(r>>12&15|224),n.push(r>>6&63|128),n.push(63&r|128)):r>=128&&r<=2047?(n.push(r>>6&31|192),n.push(63&r|128)):n.push(255&r);return n},n.byteToString=function(e){if("string"==typeof e)return e;for(var t="",r=e,n=0;n<r.length;n++){var o=r[n].toString(2),i=o.match(/^1+?(?=0)/);if(i&&8==o.length){for(var a=i[0].length,s=r[n].toString(2).slice(7-a),c=1;c<a;c++)s+=r[c+n].toString(2).slice(2);t+=String.fromCharCode(parseInt(s,2)),n+=a-1}else t+=String.fromCharCode(r[n])}return t},n.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},Object.defineProperty(n,"decorateRoot",{get:function(){return o.decorated||(o.decorated=new(r(685)))}})},216:function(e,t,r){var n,o;function i(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function a(e,t,r,a){var s=a.types;if(e.resolvedType)if(e.resolvedType instanceof n){if(Object.keys(e.resolvedType.values).indexOf(r)<0)return i(e,"enum value")}else{var c=s[t].verify(r);if(c)return e.name+"."+c}else switch(e.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":if(!o.isInteger(r))return i(e,"integer");break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":if(!(o.isInteger(r)||r&&o.isInteger(r.low)&&o.isInteger(r.high)))return i(e,"integer|Long");break;case"float":case"double":if("number"!=typeof r)return i(e,"number");break;case"bool":if("boolean"!=typeof r)return i(e,"boolean");break;case"string":if(!o.isString(r))return i(e,"string");break;case"bytes":if(!(r&&"number"==typeof r.length||o.isString(r)))return i(e,"buffer")}}function s(e,t){switch(e.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":if(!o.key32Re.test(t))return i(e,"integer key");break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":if(!o.key64Re.test(t))return i(e,"integer|Long key");break;case"bool":if(!o.key2Re.test(t))return i(e,"boolean key")}}function u(e){return function(t){return function(r){var n;if("object"!=c(r)||null===r)return"object expected";var u,l={};e.oneofsArray.length&&(u={});for(var p=0;p<e.fieldsArray.length;++p){var d,h=e._fieldsArray[p].resolve(),f=r[h.name];if(!h.optional||null!=f&&r.hasOwnProperty(h.name))if(h.map){if(!o.isObject(f))return i(h,"object");var m=Object.keys(f);for(d=0;d<m.length;++d){if(n=s(h,m[d]))return n;if(n=a(h,p,f[m[d]],t))return n}}else if(h.repeated){if(!Array.isArray(f))return i(h,"array");for(d=0;d<f.length;++d)if(n=a(h,p,f[d],t))return n}else{if(h.partOf){var g=h.partOf.name;if(1===l[h.partOf.name]&&1===u[g])return h.partOf.name+": multiple values";u[g]=1}if(n=a(h,p,f,t))return n}}}}}e.exports=u,u._configure=function(){n=r(582),o=r(935)}},834:function(e,t,r){var n,o=t;o[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=this.lookup(e["@type"]);if(t){var r="."===e["@type"].charAt(0)?e["@type"].substr(1):e["@type"];return this.create({type_url:"/"+r,value:t.encode(t.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){if(t&&t.json&&e.type_url&&e.value){var r=e.type_url.substring(e.type_url.lastIndexOf("/")+1),o=this.lookup(r);o&&(e=o.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof n){var i=e.$type.toObject(e,t);return i["@type"]=e.$type.fullName,i}return this.toObject(e,t)}},o._configure=function(){n=r(339)}},244:function(e,t,r){e.exports=u;var n,o=r(935),i=r(498);function a(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function s(){}function c(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function u(){this.len=0,this.head=new a(s,0,0),this.tail=this.head,this.states=null}function l(e,t,r){t[r]=255&e}function p(e,t){this.len=e,this.next=void 0,this.val=t}function d(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function h(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}u.create=o.Buffer?function(){return(u.create=function(){return new(void 0)})()}:function(){return new u},u.alloc=function(e){return new o.Array(e)},o.Array!==Array&&(u.alloc=o.pool(u.alloc,o.Array.prototype.subarray)),u.prototype._push=function(e,t,r){return this.tail=this.tail.next=new a(e,t,r),this.len+=t,this},p.prototype=Object.create(a.prototype),p.prototype.fn=function(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e},u.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new p((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},u.prototype.int32=function(e){return e<0?this._push(d,10,n.fromNumber(e)):this.uint32(e)},u.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},u.prototype.uint64=function(e){var t=n.from(e);return this._push(d,t.length(),t)},u.prototype.int64=u.prototype.uint64,u.prototype.sint64=function(e){var t=n.from(e).zzEncode();return this._push(d,t.length(),t)},u.prototype.bool=function(e){return this._push(l,1,e?1:0)},u.prototype.fixed32=function(e){return this._push(h,4,e>>>0)},u.prototype.sfixed32=u.prototype.fixed32,u.prototype.fixed64=function(e){var t=n.from(e);return this._push(h,4,t.lo)._push(h,4,t.hi)},u.prototype.sfixed64=u.prototype.fixed64,u.prototype.float=function(e){return this._push(o.float.writeFloatLE,4,e)},u.prototype.double=function(e){return this._push(o.float.writeDoubleLE,8,e)};var f=o.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};u.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(l,1,0);if(o.isString(e)){var r=u.alloc(t=i.length(e));i.write(e,r,0),e=r}return this.uint32(t)._push(f,t,e)},u.prototype.string=function(e){var t=i.length(e);return t?this.uint32(t)._push(i.write,t,e):this._push(l,1,0)},u.prototype.fork=function(){return this.states=new c(this),this.head=this.tail=new a(s,0,0),this.len=0,this},u.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new a(s,0,0),this.len=0),this},u.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},u.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},u._configure=function(){n=r(365),r(440),i=r(498)}}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var i=r[e]={exports:{}};return t[e](i,i.exports,o),i.exports}o.amdO={},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},o.d=function(e,t){for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.g=function(){if("object"==("undefined"===typeof globalThis?"undefined":c(globalThis)))return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==("undefined"===typeof window?"undefined":c(window)))return window}}(),o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return function(){"use strict";o.r(i),o.d(i,{default:function(){return fa}});var t={};o.r(t),o.d(t,{acceptContactInvite:function(){return yr},acceptInvitation:function(){return Er},addContact:function(){return fr},addReaction:function(){return Ar},addToBlackList:function(){return Tr},addUsersToBlacklist:function(){return Or},addUsersToBlocklist:function(){return Rr},declineContactInvite:function(){return _r},declineInvitation:function(){return vr},deleteContact:function(){return gr},deleteConversation:function(){return ir},deleteReaction:function(){return br},deleteSession:function(){return or},fetchHistoryMessages:function(){return pr},fetchUserInfoById:function(){return cr},getBlacklist:function(){return Yt},getBlocklist:function(){return Xt},getChatToken:function(){return lr},getContacts:function(){return Zt},getConversationlist:function(){return nr},getHistoryMessages:function(){return hr},getReactionDetail:function(){return Ur},getReactionList:function(){return Mr},getReactionlist:function(){return wr},getRoster:function(){return Qt},getServerConversations:function(){return Lr},getServerPinnedConversations:function(){return Dr},getSessionList:function(){return rr},pinConversation:function(){return jr},recallMessage:function(){return Nr},removeFromBlackList:function(){return Ir},removeHistoryMessages:function(){return kr},removeRoster:function(){return mr},removeUserFromBlackList:function(){return Sr},removeUserFromBlocklist:function(){return Cr},reportMessage:function(){return Pr},updateCurrentUserNick:function(){return ur},updateOwnUserInfo:function(){return ar},updateUserInfo:function(){return sr},uploadPushToken:function(){return tr},uploadToken:function(){return er}});var r={};o.r(r),o.d(r,{acceptGroupInvite:function(){return En},acceptGroupJoinRequest:function(){return hn},addUsersToGroupAllowlist:function(){return Vn},addUsersToGroupWhitelist:function(){return Kn},agreeInviteIntoGroup:function(){return gn},agreeJoinGroup:function(){return dn},blockGroup:function(){return Hr},blockGroupMember:function(){return Un},blockGroupMembers:function(){return kn},blockGroupMessages:function(){return Fr},changeGroupOwner:function(){return Jr},changeOwner:function(){return zr},createGroup:function(){return Br},createGroupNew:function(){return Gr},deleteGroupSharedFile:function(){return io},destroyGroup:function(){return an},disableSendGroupMsg:function(){return Fn},dissolveGroup:function(){return on},downloadGroupSharedFile:function(){return co},enableSendGroupMsg:function(){return Wn},fetchGroupAnnouncement:function(){return ro},fetchGroupSharedFileList:function(){return ao},getGroup:function(){return Vr},getGroupAdmin:function(){return Zr},getGroupAllowlist:function(){return Yn},getGroupBlacklist:function(){return Bn},getGroupBlacklistNew:function(){return Gn},getGroupBlocklist:function(){return Hn},getGroupInfo:function(){return $r},getGroupMemberAttributes:function(){return lo},getGroupMembersAttributes:function(){return po},getGroupMsgReadUser:function(){return to},getGroupMuteList:function(){return bn},getGroupMutelist:function(){return Mn},getGroupSharedFilelist:function(){return so},getGroupWhitelist:function(){return $n},getJoinedGroups:function(){return qr},getMuted:function(){return An},getPublicGroups:function(){return Kr},groupBlockMulti:function(){return Pn},groupBlockSingle:function(){return wn},inviteToGroup:function(){return un},inviteUsersToGroup:function(){return ln},isGroupWhiteUser:function(){return Xn},isInGroupAllowlist:function(){return Zn},isInGroupMutelist:function(){return eo},isInGroupWhiteList:function(){return Qn},joinGroup:function(){return pn},leaveGroup:function(){return cn},listGroupMember:function(){return Xr},listGroupMembers:function(){return Qr},listGroups:function(){return Wr},modifyGroup:function(){return Yr},mute:function(){return In},muteGroupMember:function(){return Sn},quitGroup:function(){return sn},rejectGroupInvite:function(){return vn},rejectGroupJoinRequest:function(){return mn},rejectInviteIntoGroup:function(){return yn},rejectJoinGroup:function(){return fn},removeAdmin:function(){return rn},removeGroupAdmin:function(){return nn},removeGroupAllowlistMember:function(){return Jn},removeGroupBlockMulti:function(){return Dn},removeGroupBlockSingle:function(){return Ln},removeGroupMember:function(){return Tn},removeGroupMembers:function(){return Rn},removeGroupWhitelistMember:function(){return zn},removeMultiGroupMember:function(){return On},removeMute:function(){return Cn},removeSingleGroupMember:function(){return _n},rmUsersFromGroupWhitelist:function(){return qn},setAdmin:function(){return en},setGroupAdmin:function(){return tn},setGroupMemberAttributes:function(){return uo},unblockGroupMember:function(){return xn},unblockGroupMembers:function(){return jn},unmuteGroupMember:function(){return Nn},updateGroupAnnouncement:function(){return no},uploadGroupSharedFile:function(){return oo}});var a={};o.r(a),o.d(a,{addUsersToChatRoom:function(){return Oo},addUsersToChatRoomAllowlist:function(){return Xo},addUsersToChatRoomWhitelist:function(){return Yo},blockChatRoomMember:function(){return jo},blockChatRoomMembers:function(){return Bo},chatRoomBlockMulti:function(){return Go},chatRoomBlockSingle:function(){return Do},createChatRoom:function(){return fo},deleteChatRoomSharedFile:function(){return ui},destroyChatRoom:function(){return mo},disableSendChatRoomMsg:function(){return Jo},enableSendChatRoomMsg:function(){return $o},fetchChatRoomAnnouncement:function(){return ai},fetchChatRoomSharedFileList:function(){return li},getChatRoomAdmin:function(){return Ao},getChatRoomAllowlist:function(){return ri},getChatRoomAttributes:function(){return di},getChatRoomBlacklist:function(){return qo},getChatRoomBlacklistNew:function(){return Vo},getChatRoomBlocklist:function(){return zo},getChatRoomDetails:function(){return go},getChatRoomMuteList:function(){return Lo},getChatRoomMuted:function(){return ko},getChatRoomMutelist:function(){return xo},getChatRoomSharedFilelist:function(){return pi},getChatRoomWhitelist:function(){return ti},getChatRooms:function(){return ho},isChatRoomWhiteUser:function(){return ni},isInChatRoomAllowlist:function(){return oi},isInChatRoomMutelist:function(){return ii},joinChatRoom:function(){return Ro},leaveChatRoom:function(){return So},listChatRoomMember:function(){return Co},listChatRoomMembers:function(){return No},modifyChatRoom:function(){return Eo},muteChatRoomMember:function(){return wo},quitChatRoom:function(){return Io},removeChatRoomAdmin:function(){return Mo},removeChatRoomAllowlistMember:function(){return ei},removeChatRoomAttribute:function(){return gi},removeChatRoomAttributes:function(){return mi},removeChatRoomBlockMulti:function(){return Wo},removeChatRoomBlockSingle:function(){return Ho},removeChatRoomMember:function(){return vo},removeChatRoomMembers:function(){return To},removeChatRoomWhitelistMember:function(){return Zo},removeMultiChatRoomMember:function(){return _o},removeMuteChatRoomMember:function(){return Uo},removeSingleChatRoomMember:function(){return yo},rmUsersFromChatRoomWhitelist:function(){return Qo},setChatRoomAdmin:function(){return bo},setChatRoomAttribute:function(){return fi},setChatRoomAttributes:function(){return hi},unblockChatRoomMember:function(){return Fo},unblockChatRoomMembers:function(){return Ko},unmuteChatRoomMember:function(){return Po},updateChatRoomAnnouncement:function(){return si},uploadChatRoomSharedFile:function(){return ci}});var s={};o.r(s),o.d(s,{getPresenceStatus:function(){return Ii},getSubscribedPresenceList:function(){return Oi},getSubscribedPresencelist:function(){return Ri},publishPresence:function(){return vi},subscribePresence:function(){return _i},unsubscribePresence:function(){return Ti}});var u={};o.r(u),o.d(u,{clearRemindTypeForConversation:function(){return Ai},getPushPerformLanguage:function(){return Ui},getSilentModeForAll:function(){return Ci},getSilentModeForConversation:function(){return bi},getSilentModeForConversations:function(){return Mi},setPushPerformLanguage:function(){return wi},setSilentModeForAll:function(){return Si},setSilentModeForConversation:function(){return Ni}});var l={};o.r(l),o.d(l,{changeChatThreadName:function(){return Gi},createChatThread:function(){return Li},destroyChatThread:function(){return ji},getChatThreadDetail:function(){return Vi},getChatThreadLastMessage:function(){return Ki},getChatThreadMembers:function(){return Bi},getChatThreads:function(){return Wi},getJoinedChatThreads:function(){return Fi},joinChatThread:function(){return xi},leaveChatThread:function(){return Di},removeChatThreadMember:function(){return Hi}});var p={};o.r(p),o.d(p,{getSupportedLanguages:function(){return qi},translateMessage:function(){return zi}});var d={};function h(){d.converter._configure(),d.decoder._configure(),d.encoder._configure(),d.Field._configure(),d.MapField._configure(),d.Message._configure(),d.Namespace._configure(),d.Method._configure(),d.ReflectionObject._configure(),d.OneOf._configure(),d.parse._configure(),d.Reader._configure(),d.Root._configure(),d.Service._configure(),d.verifier._configure(),d.Type._configure(),d.types._configure(),d.wrappers._configure(),d.Writer._configure()}d.build="minimal",d.Writer=o(244),d.encoder=o(929),d.Reader=o(494),d.util=o(935),d.rpc=o(325),d.roots=o(889),d.verifier=o(216),d.tokenize=o(869),d.parse=o(845),d.common=o(72),d.ReflectionObject=o(998),d.Namespace=o(476),d.Root=o(685),d.Enum=o(582),d.Type=o(192),d.Field=o(286),d.OneOf=o(735),d.MapField=o(435),d.Service=o(447),d.Method=o(484),d.converter=o(525),d.decoder=o(888),d.Message=o(339),d.wrappers=o(834),d.types=o(696),d.util=o(935),d.configure=h,d.load=function(e,t,r){return"function"==typeof t?(r=t,t=new d.Root):t||(t=new d.Root),t.load(e,r)},d.loadSync=function(e,t){return t||(t=new d.Root),t.loadSync(e)},d.parseFromPbString=function(e,t,r){return"function"==typeof t?(r=t,t=new d.Root):t||(t=new d.Root),t.parseFromPbString(e,r)},h();var f,m=d,g=o(720),E=o.n(g),y=function(){function e(e){this.type=e.type,this.message=e.message,this.data=e.data}return e.create=function(t){return new e(t)},e}();!function(e){e[e.REQUEST_SUCCESS=0]="REQUEST_SUCCESS",e[e.REQUEST_TIMEOUT=-1]="REQUEST_TIMEOUT",e[e.REQUEST_UNKNOWN=-2]="REQUEST_UNKNOWN",e[e.REQUEST_PARAMETER_ERROR=-3]="REQUEST_PARAMETER_ERROR",e[e.REQUEST_ABORT=-4]="REQUEST_ABORT",e[e.WEBIM_CONNCTION_USER_NOT_ASSIGN_ERROR=0]="WEBIM_CONNCTION_USER_NOT_ASSIGN_ERROR",e[e.WEBIM_CONNCTION_OPEN_ERROR=1]="WEBIM_CONNCTION_OPEN_ERROR",e[e.WEBIM_CONNCTION_AUTH_ERROR=2]="WEBIM_CONNCTION_AUTH_ERROR",e[e.WEBIM_CONNCTION_OPEN_USERGRID_ERROR=3]="WEBIM_CONNCTION_OPEN_USERGRID_ERROR",e[e.WEBIM_CONNCTION_ATTACH_ERROR=4]="WEBIM_CONNCTION_ATTACH_ERROR",e[e.WEBIM_CONNCTION_ATTACH_USERGRID_ERROR=5]="WEBIM_CONNCTION_ATTACH_USERGRID_ERROR",e[e.WEBIM_CONNCTION_REOPEN_ERROR=6]="WEBIM_CONNCTION_REOPEN_ERROR",e[e.WEBIM_CONNCTION_SERVER_CLOSE_ERROR=7]="WEBIM_CONNCTION_SERVER_CLOSE_ERROR",e[e.WEBIM_CONNCTION_SERVER_ERROR=8]="WEBIM_CONNCTION_SERVER_ERROR",e[e.WEBIM_CONNCTION_IQ_ERROR=9]="WEBIM_CONNCTION_IQ_ERROR",e[e.WEBIM_CONNCTION_PING_ERROR=10]="WEBIM_CONNCTION_PING_ERROR",e[e.WEBIM_CONNCTION_NOTIFYVERSION_ERROR=11]="WEBIM_CONNCTION_NOTIFYVERSION_ERROR",e[e.WEBIM_CONNCTION_GETROSTER_ERROR=12]="WEBIM_CONNCTION_GETROSTER_ERROR",e[e.WEBIM_CONNCTION_CROSSDOMAIN_ERROR=13]="WEBIM_CONNCTION_CROSSDOMAIN_ERROR",e[e.WEBIM_CONNCTION_LISTENING_OUTOF_MAXRETRIES=14]="WEBIM_CONNCTION_LISTENING_OUTOF_MAXRETRIES",e[e.WEBIM_CONNCTION_RECEIVEMSG_CONTENTERROR=15]="WEBIM_CONNCTION_RECEIVEMSG_CONTENTERROR",e[e.WEBIM_CONNCTION_DISCONNECTED=16]="WEBIM_CONNCTION_DISCONNECTED",e[e.WEBIM_CONNCTION_AJAX_ERROR=17]="WEBIM_CONNCTION_AJAX_ERROR",e[e.WEBIM_CONNCTION_JOINROOM_ERROR=18]="WEBIM_CONNCTION_JOINROOM_ERROR",e[e.WEBIM_CONNCTION_GETROOM_ERROR=19]="WEBIM_CONNCTION_GETROOM_ERROR",e[e.WEBIM_CONNCTION_GETROOMINFO_ERROR=20]="WEBIM_CONNCTION_GETROOMINFO_ERROR",e[e.WEBIM_CONNCTION_GETROOMMEMBER_ERROR=21]="WEBIM_CONNCTION_GETROOMMEMBER_ERROR",e[e.WEBIM_CONNCTION_GETROOMOCCUPANTS_ERROR=22]="WEBIM_CONNCTION_GETROOMOCCUPANTS_ERROR",e[e.WEBIM_CONNCTION_LOAD_CHATROOM_ERROR=23]="WEBIM_CONNCTION_LOAD_CHATROOM_ERROR",e[e.WEBIM_CONNCTION_NOT_SUPPORT_CHATROOM_ERROR=24]="WEBIM_CONNCTION_NOT_SUPPORT_CHATROOM_ERROR",e[e.WEBIM_CONNCTION_JOINCHATROOM_ERROR=25]="WEBIM_CONNCTION_JOINCHATROOM_ERROR",e[e.WEBIM_CONNCTION_QUITCHATROOM_ERROR=26]="WEBIM_CONNCTION_QUITCHATROOM_ERROR",e[e.WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR=27]="WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR",e[e.WEBIM_CONNCTION_TOKEN_NOT_ASSIGN_ERROR=28]="WEBIM_CONNCTION_TOKEN_NOT_ASSIGN_ERROR",e[e.WEBIM_CONNCTION_SESSIONID_NOT_ASSIGN_ERROR=29]="WEBIM_CONNCTION_SESSIONID_NOT_ASSIGN_ERROR",e[e.WEBIM_CONNCTION_RID_NOT_ASSIGN_ERROR=30]="WEBIM_CONNCTION_RID_NOT_ASSIGN_ERROR",e[e.WEBIM_CONNCTION_CALLBACK_INNER_ERROR=31]="WEBIM_CONNCTION_CALLBACK_INNER_ERROR",e[e.WEBIM_CONNCTION_CLIENT_OFFLINE=32]="WEBIM_CONNCTION_CLIENT_OFFLINE",e[e.WEBIM_CONNCTION_CLIENT_LOGOUT=33]="WEBIM_CONNCTION_CLIENT_LOGOUT",e[e.WEBIM_CONNCTION_CLIENT_TOO_MUCH_ERROR=34]="WEBIM_CONNCTION_CLIENT_TOO_MUCH_ERROR",e[e.WEBIM_CONNECTION_ACCEPT_INVITATION_FROM_GROUP=35]="WEBIM_CONNECTION_ACCEPT_INVITATION_FROM_GROUP",e[e.WEBIM_CONNECTION_DECLINE_INVITATION_FROM_GROUP=36]="WEBIM_CONNECTION_DECLINE_INVITATION_FROM_GROUP",e[e.WEBIM_CONNECTION_ACCEPT_JOIN_GROUP=37]="WEBIM_CONNECTION_ACCEPT_JOIN_GROUP",e[e.WEBIM_CONNECTION_DECLINE_JOIN_GROUP=38]="WEBIM_CONNECTION_DECLINE_JOIN_GROUP",e[e.WEBIM_CONNECTION_CLOSED=39]="WEBIM_CONNECTION_CLOSED",e[e.WEBIM_CONNECTION_ERROR=40]="WEBIM_CONNECTION_ERROR",e[e.MAX_LIMIT=50]="MAX_LIMIT",e[e.MESSAGE_NOT_FOUND=51]="MESSAGE_NOT_FOUND",e[e.NO_PERMISSION=52]="NO_PERMISSION",e[e.OPERATION_UNSUPPORTED=53]="OPERATION_UNSUPPORTED",e[e.OPERATION_NOT_ALLOWED=54]="OPERATION_NOT_ALLOWED",e[e.WEBIM_UPLOADFILE_BROWSER_ERROR=100]="WEBIM_UPLOADFILE_BROWSER_ERROR",e[e.WEBIM_UPLOADFILE_ERROR=101]="WEBIM_UPLOADFILE_ERROR",e[e.WEBIM_UPLOADFILE_NO_LOGIN=102]="WEBIM_UPLOADFILE_NO_LOGIN",e[e.WEBIM_UPLOADFILE_NO_FILE=103]="WEBIM_UPLOADFILE_NO_FILE",e[e.WEBIM_DOWNLOADFILE_ERROR=200]="WEBIM_DOWNLOADFILE_ERROR",e[e.WEBIM_DOWNLOADFILE_NO_LOGIN=201]="WEBIM_DOWNLOADFILE_NO_LOGIN",e[e.WEBIM_DOWNLOADFILE_BROWSER_ERROR=202]="WEBIM_DOWNLOADFILE_BROWSER_ERROR",e[e.USER_NOT_FOUND=204]="USER_NOT_FOUND",e[e.MESSAGE_PARAMETER_ERROR=205]="MESSAGE_PARAMETER_ERROR",e[e.WEBIM_CONNCTION_USER_LOGIN_ANOTHER_DEVICE=206]="WEBIM_CONNCTION_USER_LOGIN_ANOTHER_DEVICE",e[e.WEBIM_CONNCTION_USER_REMOVED=207]="WEBIM_CONNCTION_USER_REMOVED",e[e.WEBIM_CONNCTION_USER_KICKED_BY_CHANGE_PASSWORD=216]="WEBIM_CONNCTION_USER_KICKED_BY_CHANGE_PASSWORD",e[e.WEBIM_CONNCTION_USER_KICKED_BY_OTHER_DEVICE=217]="WEBIM_CONNCTION_USER_KICKED_BY_OTHER_DEVICE",e[e.USER_MUTED_BY_ADMIN=219]="USER_MUTED_BY_ADMIN",e[e.USER_NOT_FRIEND=221]="USER_NOT_FRIEND",e[e.WEBIM_MESSAGE_REC_TEXT=300]="WEBIM_MESSAGE_REC_TEXT",e[e.WEBIM_MESSAGE_REC_TEXT_ERROR=301]="WEBIM_MESSAGE_REC_TEXT_ERROR",e[e.WEBIM_MESSAGE_REC_EMOTION=302]="WEBIM_MESSAGE_REC_EMOTION",e[e.WEBIM_MESSAGE_REC_PHOTO=303]="WEBIM_MESSAGE_REC_PHOTO",e[e.WEBIM_MESSAGE_REC_AUDIO=304]="WEBIM_MESSAGE_REC_AUDIO",e[e.WEBIM_MESSAGE_REC_AUDIO_FILE=305]="WEBIM_MESSAGE_REC_AUDIO_FILE",e[e.WEBIM_MESSAGE_REC_VEDIO=306]="WEBIM_MESSAGE_REC_VEDIO",e[e.WEBIM_MESSAGE_REC_VEDIO_FILE=307]="WEBIM_MESSAGE_REC_VEDIO_FILE",e[e.WEBIM_MESSAGE_REC_FILE=308]="WEBIM_MESSAGE_REC_FILE",e[e.WEBIM_MESSAGE_SED_TEXT=309]="WEBIM_MESSAGE_SED_TEXT",e[e.WEBIM_MESSAGE_SED_EMOTION=310]="WEBIM_MESSAGE_SED_EMOTION",e[e.WEBIM_MESSAGE_SED_PHOTO=311]="WEBIM_MESSAGE_SED_PHOTO",e[e.WEBIM_MESSAGE_SED_AUDIO=312]="WEBIM_MESSAGE_SED_AUDIO",e[e.WEBIM_MESSAGE_SED_AUDIO_FILE=313]="WEBIM_MESSAGE_SED_AUDIO_FILE",e[e.WEBIM_MESSAGE_SED_VEDIO=314]="WEBIM_MESSAGE_SED_VEDIO",e[e.WEBIM_MESSAGE_SED_VEDIO_FILE=315]="WEBIM_MESSAGE_SED_VEDIO_FILE",e[e.WEBIM_MESSAGE_SED_FILE=316]="WEBIM_MESSAGE_SED_FILE",e[e.WEBIM_MESSAGE_SED_ERROR=317]="WEBIM_MESSAGE_SED_ERROR",e[e.STATUS_INIT=400]="STATUS_INIT",e[e.STATUS_DOLOGIN_USERGRID=401]="STATUS_DOLOGIN_USERGRID",e[e.STATUS_DOLOGIN_IM=402]="STATUS_DOLOGIN_IM",e[e.STATUS_OPENED=403]="STATUS_OPENED",e[e.STATUS_CLOSING=404]="STATUS_CLOSING",e[e.STATUS_CLOSED=405]="STATUS_CLOSED",e[e.STATUS_ERROR=406]="STATUS_ERROR",e[e.SERVER_BUSY=500]="SERVER_BUSY",e[e.MESSAGE_INCLUDE_ILLEGAL_CONTENT=501]="MESSAGE_INCLUDE_ILLEGAL_CONTENT",e[e.MESSAGE_EXTERNAL_LOGIC_BLOCKED=502]="MESSAGE_EXTERNAL_LOGIC_BLOCKED",e[e.SERVER_UNKNOWN_ERROR=503]="SERVER_UNKNOWN_ERROR",e[e.MESSAGE_RECALL_TIME_LIMIT=504]="MESSAGE_RECALL_TIME_LIMIT",e[e.SERVICE_NOT_ENABLED=505]="SERVICE_NOT_ENABLED",e[e.SERVICE_NOT_ALLOW_MESSAGING=506]="SERVICE_NOT_ALLOW_MESSAGING",e[e.SERVICE_NOT_ALLOW_MESSAGING_MUTE=507]="SERVICE_NOT_ALLOW_MESSAGING_MUTE",e[e.MESSAGE_MODERATION_BLOCKED=508]="MESSAGE_MODERATION_BLOCKED",e[e.MESSAGE_CURRENT_LIMITING=509]="MESSAGE_CURRENT_LIMITING",e[e.MESSAGE_WEBSOCKET_DISCONNECTED=510]="MESSAGE_WEBSOCKET_DISCONNECTED",e[e.MESSAGE_SIZE_LIMIT=511]="MESSAGE_SIZE_LIMIT",e[e.GROUP_NOT_EXIST=605]="GROUP_NOT_EXIST",e[e.GROUP_NOT_JOINED=602]="GROUP_NOT_JOINED",e[e.GROUP_MEMBERS_FULL=606]="GROUP_MEMBERS_FULL",e[e.PERMISSION_DENIED=603]="PERMISSION_DENIED",e[e.WEBIM_LOAD_MSG_ERROR=604]="WEBIM_LOAD_MSG_ERROR",e[e.GROUP_ALREADY_JOINED=601]="GROUP_ALREADY_JOINED",e[e.GROUP_MEMBERS_LIMIT=607]="GROUP_MEMBERS_LIMIT",e[e.GROUP_IS_DISABLED=608]="GROUP_IS_DISABLED",e[e.GROUP_MEMBER_ATTRIBUTES_SET_FAILED=609]="GROUP_MEMBER_ATTRIBUTES_SET_FAILED",e[e.REST_PARAMS_STATUS=700]="REST_PARAMS_STATUS",e[e.CHATROOM_NOT_JOINED=702]="CHATROOM_NOT_JOINED",e[e.CHATROOM_MEMBERS_FULL=704]="CHATROOM_MEMBERS_FULL",e[e.CHATROOM_NOT_EXIST=705]="CHATROOM_NOT_EXIST",e[e.SDK_RUNTIME_ERROR=999]="SDK_RUNTIME_ERROR",e[e.PRESENCE_PARAM_EXCEED=1100]="PRESENCE_PARAM_EXCEED",e[e.REACTION_ALREADY_ADDED=1101]="REACTION_ALREADY_ADDED",e[e.REACTION_CREATING=1102]="REACTION_CREATING",e[e.REACTION_OPERATION_IS_ILLEGAL=1103]="REACTION_OPERATION_IS_ILLEGAL",e[e.TRANSLATION_NOT_VALID=1200]="TRANSLATION_NOT_VALID",e[e.TRANSLATION_TEXT_TOO_LONG=1201]="TRANSLATION_TEXT_TOO_LONG",e[e.TRANSLATION_FAILED=1204]="TRANSLATION_FAILED",e[e.THREAD_NOT_EXIST=1300]="THREAD_NOT_EXIST",e[e.THREAD_ALREADY_EXIST=1301]="THREAD_ALREADY_EXIST",e[e.CONVERSATION_NOT_EXIST=1400]="CONVERSATION_NOT_EXIST"}(f||(f={}));var v,_,T,O,R,I,S=function(){return S=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},S.apply(this,arguments)};!function(e){e[e.UNKNOWOPERATION=-1]="UNKNOWOPERATION",e[e.REST_GET_SESSION_LIST=1]="REST_GET_SESSION_LIST",e[e.REST_DEL_SESSION=2]="REST_DEL_SESSION",e[e.REST_GET_HISTORY_MESSAGE=3]="REST_GET_HISTORY_MESSAGE",e[e.REST_PIN_CONVERSATION=4]="REST_PIN_CONVERSATION",e[e.REST_OPERATE=10]="REST_OPERATE",e[e.MSYNC_SENDMESSAGE=11]="MSYNC_SENDMESSAGE",e[e.MSYNC_RECALLMESSAGE=12]="MSYNC_RECALLMESSAGE",e[e.MSYNC_OPERATE=20]="MSYNC_OPERATE",e[e.ROSTER_ADD=21]="ROSTER_ADD",e[e.ROSTER_REMOVE=22]="ROSTER_REMOVE",e[e.ROSTER_ACCEPT=23]="ROSTER_ACCEPT",e[e.ROSTER_DECLINE=24]="ROSTER_DECLINE",e[e.ROSTER_BAN=25]="ROSTER_BAN",e[e.ROSTER_ALLOW=26]="ROSTER_ALLOW",e[e.ROSTER_BLACKLIST=27]="ROSTER_BLACKLIST",e[e.ROSTER_CONTACTS=28]="ROSTER_CONTACTS",e[e.ROSTER_OPERATE=30]="ROSTER_OPERATE",e[e.USER_LOGIN=31]="USER_LOGIN",e[e.USER_CREATE=32]="USER_CREATE",e[e.USER_UPDATE_USERINFO=33]="USER_UPDATE_USERINFO",e[e.USER_FETCH_USERINFO=34]="USER_FETCH_USERINFO",e[e.USER_UPDATE_NICK=35]="USER_UPDATE_NICK",e[e.USER_UPLOAD_PUSH_TOKEN=36]="USER_UPLOAD_PUSH_TOKEN",e[e.USER_OPERATE=40]="USER_OPERATE",e[e.GROUP_CREATEGROUP=41]="GROUP_CREATEGROUP",e[e.GROUP_BLOCK_MESSAGE=42]="GROUP_BLOCK_MESSAGE",e[e.GROUP_FETCH_PUBLICGROUPS_WITHCURSOR=43]="GROUP_FETCH_PUBLICGROUPS_WITHCURSOR",e[e.GROUP_FETCH_USERS_GROUP=44]="GROUP_FETCH_USERS_GROUP",e[e.GROUP_CHANGE_OWNER=45]="GROUP_CHANGE_OWNER",e[e.GROUP_FETCH_SPECIFICATION=46]="GROUP_FETCH_SPECIFICATION",e[e.GROUP_CHANGE_GROUPATTRIBUTE=47]="GROUP_CHANGE_GROUPATTRIBUTE",e[e.GROUP_FETCH_MEMEBERS=48]="GROUP_FETCH_MEMEBERS",e[e.GROUP_GET_ADMIN=49]="GROUP_GET_ADMIN",e[e.GROUP_SET_ADMIN=50]="GROUP_SET_ADMIN",e[e.GROUP_REMOVE_ADMIN=51]="GROUP_REMOVE_ADMIN",e[e.GROUP_DESTOTYGROUP=52]="GROUP_DESTOTYGROUP",e[e.GROUP_LEAVEGROUP=53]="GROUP_LEAVEGROUP",e[e.GROUP_INVITE_TO_GROUP=54]="GROUP_INVITE_TO_GROUP",e[e.GROUP_JOIN_PUBLICGROUP=55]="GROUP_JOIN_PUBLICGROUP",e[e.GROUP_ACCEPT_JOINPUBLICGROUPAPPL=56]="GROUP_ACCEPT_JOINPUBLICGROUPAPPL",e[e.GROUP_DECLINE_JOINPUBLICGROUPAPPL=57]="GROUP_DECLINE_JOINPUBLICGROUPAPPL",e[e.GROUP_ACCEPT_INVITATION=58]="GROUP_ACCEPT_INVITATION",e[e.GROUP_DECLINE_INVITATION=59]="GROUP_DECLINE_INVITATION",e[e.GROUP_REMOVE_MEMBER=60]="GROUP_REMOVE_MEMBER",e[e.GROUP_REMOVE_MEMBERS=61]="GROUP_REMOVE_MEMBERS",e[e.GROUP_MUTE_MEMBERS=62]="GROUP_MUTE_MEMBERS",e[e.GROUP_UNMUTE_MEMBERS=63]="GROUP_UNMUTE_MEMBERS",e[e.GROUP_FETCH_MUTES=64]="GROUP_FETCH_MUTES",e[e.GROUP_BLOCK_MEMBER=65]="GROUP_BLOCK_MEMBER",e[e.GROUP_BLOCK_MEMBERS=66]="GROUP_BLOCK_MEMBERS",e[e.GROUP_UNBLOCK_MEMBER=67]="GROUP_UNBLOCK_MEMBER",e[e.GROUP_UNBLOCK_MEMBERS=68]="GROUP_UNBLOCK_MEMBERS",e[e.GROUP_GET_BLOCK_LIST=69]="GROUP_GET_BLOCK_LIST",e[e.GROUP_MUTE_ALLMEMBERS=70]="GROUP_MUTE_ALLMEMBERS",e[e.GROUP_UNMUTE_ALLMEMBERS=71]="GROUP_UNMUTE_ALLMEMBERS",e[e.GROUP_ADD_WHITELIST=72]="GROUP_ADD_WHITELIST",e[e.GROUP_REMOVE_WHITELIST=73]="GROUP_REMOVE_WHITELIST",e[e.GROUP_FETCH_WHITELIST=74]="GROUP_FETCH_WHITELIST",e[e.GROUP_IS_IN_WHITELIST=75]="GROUP_IS_IN_WHITELIST",e[e.GROUP_GET_READ_USERS=76]="GROUP_GET_READ_USERS",e[e.GROUP_FETCH_ANNOUNCEMENT=77]="GROUP_FETCH_ANNOUNCEMENT",e[e.GROUP_UPDATE_ANNOUNCEMENT=78]="GROUP_UPDATE_ANNOUNCEMENT",e[e.GROUP_UPLOAD_SHAREDFILE=79]="GROUP_UPLOAD_SHAREDFILE",e[e.GROUP_DELETE_SHAREDFILE=80]="GROUP_DELETE_SHAREDFILE",e[e.GROUP_FETCH_SHAREDFILE=81]="GROUP_FETCH_SHAREDFILE",e[e.GROUP_DOWNLOAD_SHAREDFILE=82]="GROUP_DOWNLOAD_SHAREDFILE",e[e.GROUP_MEMBER_SET_META_DATA=83]="GROUP_MEMBER_SET_META_DATA",e[e.GROUP_MEMBER_FETCH_META_DATA=84]="GROUP_MEMBER_FETCH_META_DATA",e[e.GROUP_OPERATE=100]="GROUP_OPERATE",e[e.CHATROOM_FETCH_CHATROOMSWITHPAGE=101]="CHATROOM_FETCH_CHATROOMSWITHPAGE",e[e.CHATROOM_CREATECHATROOM=102]="CHATROOM_CREATECHATROOM",e[e.CHATROOM_DESTORYCHATROOM=103]="CHATROOM_DESTORYCHATROOM",e[e.CHATROOM_FETCH_SPECIFICATION=104]="CHATROOM_FETCH_SPECIFICATION",e[e.CHATROOM_CHANGE_ATTRIBUTE=105]="CHATROOM_CHANGE_ATTRIBUTE",e[e.CHATROOM_REMOVE_MEMBER=106]="CHATROOM_REMOVE_MEMBER",e[e.CHATROOM_REMOVE_MEMBERS=107]="CHATROOM_REMOVE_MEMBERS",e[e.CHATROOM_ADD_MEMBERS=108]="CHATROOM_ADD_MEMBERS",e[e.CHATROOM_JOINCAHTROOM=109]="CHATROOM_JOINCAHTROOM",e[e.CHATROOM_LEAVECAHTROOM=110]="CHATROOM_LEAVECAHTROOM",e[e.CHATROOM_FETCH_MEMBERS=111]="CHATROOM_FETCH_MEMBERS",e[e.CHATROOM_GET_ADMIN=112]="CHATROOM_GET_ADMIN",e[e.CHATROOM_SET_ADMIN=113]="CHATROOM_SET_ADMIN",e[e.CHATROOM_REMOVE_ADMIN=114]="CHATROOM_REMOVE_ADMIN",e[e.CHATROOM_MUTE_USER=115]="CHATROOM_MUTE_USER",e[e.CHATROOM_UNMUTE_USER=116]="CHATROOM_UNMUTE_USER",e[e.CHATROOM_FETCH_MUTES=117]="CHATROOM_FETCH_MUTES",e[e.CHATROOM_BLOCK_USER=118]="CHATROOM_BLOCK_USER",e[e.CHATROOM_BLOCK_USERS=119]="CHATROOM_BLOCK_USERS",e[e.CHATROOM_UNBLOCK_USER=120]="CHATROOM_UNBLOCK_USER",e[e.CHATROOM_UNBLOCK_USERS=121]="CHATROOM_UNBLOCK_USERS",e[e.CHATROOM_FETCH_BANS=122]="CHATROOM_FETCH_BANS",e[e.CHATROOM_MUTE_ALLMEMEBERS=123]="CHATROOM_MUTE_ALLMEMEBERS",e[e.CHATROOM_UNMUTE_ALLMEMEBERS=124]="CHATROOM_UNMUTE_ALLMEMEBERS",e[e.CHATROOM_ADD_WHITELIST=125]="CHATROOM_ADD_WHITELIST",e[e.CHATROOM_REMOVE_WHITELIST=126]="CHATROOM_REMOVE_WHITELIST",e[e.CHATROOM_FETCH_WHITELIST=127]="CHATROOM_FETCH_WHITELIST",e[e.CHATROOM_FETCH_MEMBERIN_WHITELIST=128]="CHATROOM_FETCH_MEMBERIN_WHITELIST",e[e.CHATROOM_FETCH_ANNOUNCEMENT=129]="CHATROOM_FETCH_ANNOUNCEMENT",e[e.CHATROOM_UPDATE_ANNOUNCEMENT=130]="CHATROOM_UPDATE_ANNOUNCEMENT",e[e.CHATROOM_REMOVE_SHARE_FILE=131]="CHATROOM_REMOVE_SHARE_FILE",e[e.CHATROOM_GET_SHARE_FILE_LIST=132]="CHATROOM_GET_SHARE_FILE_LIST",e[e.CHATROOM_UPLOAD_FILE=133]="CHATROOM_UPLOAD_FILE",e[e.CHATROOM_SET_META_DATA=134]="CHATROOM_SET_META_DATA",e[e.CHATROOM_DELETE_META_DATA=135]="CHATROOM_DELETE_META_DATA",e[e.CHATROOM_FETCH_META_DATA=136]="CHATROOM_FETCH_META_DATA",e[e.CHATROOM_OPERATE=150]="CHATROOM_OPERATE"}(v||(v={})),function(e){e.SDK_INTERNAL="SDK_INTERNAL",e.LOGIN="USER_LOGIN",e.REGISTER="USER_CREATE",e.GET_CHATROOM_LIST="CHATROOM_FETCH_CHATROOMSWITHPAGE",e.CREATE_CHATROOM="CHATROOM_CREATECHATROOM",e.DESTROY_CHATROOM="CHATROOM_DESTORYCHATROOM",e.GET_CHATROOM_DETAIL="CHATROOM_FETCH_SPECIFICATION",e.MODIFY_CHATROOM="CHATROOM_CHANGE_ATTRIBUTE",e.REMOVE_CHATROOM_MEMBER="CHATROOM_REMOVE_MEMBER",e.MULTI_REMOVE_CHATROOM_MEMBER="CHATROOM_REMOVE_MEMBERS",e.ADD_USERS_TO_CHATROOM="CHATROOM_ADD_MEMBERS",e.JOIN_CHATROOM="CHATROOM_JOINCAHTROOM",e.QUIT_CHATROOM="CHATROOM_LEAVECAHTROOM",e.LIST_CHATROOM_MEMBERS="CHATROOM_FETCH_MEMBERS",e.GET_CHATROOM_ADMIN="CHATROOM_GET_ADMIN",e.SET_CHATROOM_ADMIN="CHATROOM_SET_ADMIN",e.REMOVE_CHATROOM_ADMIN="CHATROOM_REMOVE_ADMIN",e.MUTE_CHATROOM_MEMBER="CHATROOM_MUTE_USER",e.REMOVE_MUTE_CHATROOM_MEMBER="CHATROOM_UNMUTE_USER",e.GET_MUTE_CHATROOM_MEMBERS="CHATROOM_FETCH_MUTES",e.SET_CHATROOM_MEMBER_TO_BLACK="CHATROOM_BLOCK_USER",e.MULTI_SET_CHATROOM_MEMBER_TO_BLACK="CHATROOM_BLOCK_USERS",e.REMOVE_CHATROOM_MEMBER_BLACK="CHATROOM_UNBLOCK_USER",e.MULTI_REMOVE_CHATROOM_MEMBER_BLACK="CHATROOM_UNBLOCK_USERS",e.GET_CHATROOM_BLOCK_MEMBERS="CHATROOM_FETCH_BANS",e.DISABLED_CHATROOM_SEND_MSG="CHATROOM_MUTE_ALLMEMEBERS",e.ENABLE_CHATROOM_SEND_MSG="CHATROOM_UNMUTE_ALLMEMEBERS",e.ADD_CHATROOM_WHITE_USERS="CHATROOM_ADD_WHITELIST",e.REMOVE_CHATROOM_WHITE_USERS="CHATROOM_REMOVE_WHITELIST",e.GET_CHATROOM_WHITE_USERS="CHATROOM_FETCH_WHITELIST",e.CHECK_CHATROOM_WHITE_USER="CHATROOM_FETCH_MEMBERIN_WHITELIST",e.GET_CHATROOM_ANN="CHATROOM_FETCH_ANNOUNCEMENT",e.UPDATE_CHATROOM_ANN="CHATROOM_UPDATE_ANNOUNCEMENT",e.DELETE_CHATROOM_FILE="CHATROOM_REMOVE_SHARE_FILE",e.GET_CHATROOM_FILES="CHATROOM_GET_SHARE_FILE_LIST",e.UPLOAD_CHATROOM_FILE="CHATROOM_UPLOAD_FILE",e.SET_CHATROOM_ATTR="CHATROOM_SET_META_DATA",e.DELETE_CHATROOM_ATTR="CHATROOM_DELETE_META_DATA",e.GET_CHATROOM_ATTR="CHATROOM_FETCH_META_DATA",e.CREATE_GROUP="GROUP_CREATEGROUP",e.BLOCK_GROUP="GROUP_BLOCK_MESSAGE",e.LIST_GROUP="GROUP_FETCH_PUBLICGROUPS_WITHCURSOR",e.GET_USER_GROUP="GROUP_FETCH_USERS_GROUP",e.CHANGE_OWNER="GROUP_CHANGE_OWNER",e.GET_GROUP_INFO="GROUP_FETCH_SPECIFICATION",e.MODIFY_GROUP="GROUP_CHANGE_GROUPATTRIBUTE",e.LIST_GROUP_MEMBER="GROUP_FETCH_MEMEBERS",e.GET_GROUP_ADMIN="GROUP_GET_ADMIN",e.SET_GROUP_ADMIN="GROUP_SET_ADMIN",e.REMOVE_GROUP_ADMIN="GROUP_REMOVE_ADMIN",e.DISSOLVE_GROUP="GROUP_DESTOTYGROUP",e.QUIT_GROUP="GROUP_LEAVEGROUP",e.INVITE_TO_GROUP="GROUP_INVITE_TO_GROUP",e.JOIN_GROUP="GROUP_JOIN_PUBLICGROUP",e.AGREE_JOIN_GROUP="GROUP_ACCEPT_JOINPUBLICGROUPAPPL",e.REJECT_JOIN_GROUP="GROUP_DECLINE_JOINPUBLICGROUPAPPL",e.AGREE_INVITE_GROUP="GROUP_ACCEPT_INVITATION",e.REJECT_INVITE_GROUP="GROUP_DECLINE_INVITATION",e.REMOVE_GROUP_MEMBER="GROUP_REMOVE_MEMBER",e.MULTI_REMOVE_GROUP_MEMBER="GROUP_REMOVE_MEMBERS",e.MUTE_GROUP_MEMBER="GROUP_MUTE_MEMBERS",e.UNMUTE_GROUP_MEMBER="GROUP_UNMUTE_MEMBERS",e.GET_GROUP_MUTE_LIST="GROUP_FETCH_MUTES",e.BLOCK_GROUP_MEMBER="GROUP_BLOCK_MEMBER",e.BLOCK_GROUP_MEMBERS="GROUP_BLOCK_MEMBERS",e.UNBLOCK_GROUP_MEMBER="GROUP_UNBLOCK_MEMBER",e.UNBLOCK_GROUP_MEMBERS="GROUP_UNBLOCK_MEMBERS",e.GET_GROUP_BLACK_LIST="GROUP_GET_BLOCK_LIST",e.DISABLED_SEND_GROUP_MSG="GROUP_MUTE_ALLMEMBERS",e.ENABLE_SEND_GROUP_MSG="GROUP_UNMUTE_ALLMEMBERS",e.ADD_USERS_TO_GROUP_WHITE="GROUP_ADD_WHITELIST",e.REMOVE_GROUP_WHITE_MEMBER="GROUP_REMOVE_WHITELIST",e.GET_GROUP_WHITE_LIST="GROUP_FETCH_WHITELIST",e.IS_IN_GROUP_WHITE_LIST="GROUP_IS_IN_WHITELIST",e.GET_GROUP_MSG_READ_USER="GROUP_GET_READ_USERS",e.GET_GROUP_ANN="GROUP_FETCH_ANNOUNCEMENT",e.UPDATE_GROUP_ANN="GROUP_UPDATE_ANNOUNCEMENT",e.UPLOAD_GROUP_FILE="GROUP_UPLOAD_SHAREDFILE",e.DELETE_GROUP_FILE="GROUP_DELETE_SHAREDFILE",e.GET_GROUP_FILE_LIST="GROUP_FETCH_SHAREDFILE",e.DOWN_GROUP_FILE="GROUP_DOWNLOAD_SHAREDFILE",e.SET_GROUP_MEMBER_ATTRS="GROUP_MEMBER_SET_META_DATA",e.GET_GROUP_MEMBER_ATTR="GROUP_MEMBER_FETCH_META_DATA",e.GET_SESSION_LIST="REST_GET_SESSION_LIST",e.DELETE_SESSION="REST_DEL_SESSION",e.GET_HISTORY_MSG="REST_GET_HISTORY_MESSAGE",e.PIN_CONVERSATION="REST_PIN_CONVERSATION",e.UPDATE_USER_INFO="USER_UPDATE_USERINFO",e.GET_USER_INFO="USER_FETCH_USERINFO",e.UPDATE_USER_NICK="USER_UPDATE_NICK",e.UPLOAD_PUSH_TOKEN="USER_UPLOAD_PUSH_TOKEN",e.GET_BLACK_LIST="ROSTER_BLACKLIST",e.GET_CONTACTS="ROSTER_CONTACTS",e.add="ROSTER_ADD",e.remove="ROSTER_REMOVE",e.accept="ROSTER_ACCEPT",e.decline="ROSTER_DECLINE",e.ban="ROSTER_BAN",e.allow="ROSTER_ALLOW",e.SEND_MSG="MSYNC_SENDMESSAGE",e.UPLOAD_MSG_ATTACH="UPLOAD_MSG_ATTACH",e.SEND_RECALL_MSG="MSYNC_RECALLMESSAGE"}(_||(_={})),function(e){e.GET_DNS="REST_DNSLIST",e.LOGIN_BY_AGORA_TOKEN="LOGIN_BY_AGORA_TOKEN",e.LOGIN_BY_PWD="LOGIN_BY_PWD",e.RESISTER="REGISTER"}(T||(T={})),function(e){e[e["5G"]=7]="5G",e[e["4G"]=7]="4G",e[e["3G"]=7]="3G",e[e["2G"]=7]="2G",e[e["SLOW-2G"]=7]="SLOW-2G",e[e.WIFI=2]="WIFI",e[e.LAN=1]="LAN",e[e.DISCONNECTED=0]="DISCONNECTED",e[e.NONE=0]="NONE",e[e.UNKNOWN=-1]="UNKNOWN",e[e["WEBIM UNABLE TO GET"]=-2]="WEBIM UNABLE TO GET"}(O||(O={})),function(e){e[e.success=200]="success",e[e.failed=500]="failed"}(R||(R={})),function(e){e[e.web=0]="web",e[e.native=1]="native"}(I||(I={}));var C=new Map,N=new Map,A=1e3,b=9675;function M(){console.log&&(console.log.apply?console.log.apply(console,Array.prototype.slice.call(arguments)):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}var w="undefined"!=typeof window&&void 0!==window.navigator&&/Trident\/|MSIE /.test(window.navigator.userAgent),U=o.g.plus,P="im-log",k="app-log",L="log",x="_doc/".concat(k,"/").concat(P,"/").concat(L);function D(e,t){if(void 0===t&&(t="*"),"string"!=typeof e)throw new Error("Invalid input parameter. The argument should be a string.");var r=e.indexOf("#");return-1===r||r<3?e:e.slice(0,r).slice(0,r-3)+t.repeat(3)+e.slice(r)}var j,G=function(e,t){if(void 0===t&&(t="*"),"string"!=typeof e)throw new Error("Invalid input parameter. The argument should be a string.");var r=Array.from(e.matchAll(/(\.)([^.]*)(?=\.|$)/g));if(r.length<2)return e;for(var n="",o=0,i=0;i<r.length-1;i++){var a=r[i],s=t.repeat(a[2].length);n+=e.slice(o,a.index)+a[1]+s,o=a.index+a[0].length}return n+e.slice(o)},B=function(){var e=(new Date).getFullYear(),t=(new Date).getMonth()+1,r=(new Date).getDate(),n=(new Date).getHours(),o=(new Date).getMinutes()<10?"0"+(new Date).getMinutes():(new Date).getMinutes(),i=(new Date).getSeconds()<10?"0"+(new Date).getSeconds():(new Date).getSeconds();return"".concat(e,"/").concat(t,"/").concat(r," ").concat(n,":").concat(o,":").concat(i)},H=function(){function t(e){var r,n,o=e.conn;this.env=le.getEnvInfo(),this.conn=o,this.logTextData="",this.writeLogTimer=void 0,t.instance=this;var i=(null===(n=null===(r=this.env.global)||void 0===r?void 0:r.getDeviceInfo)||void 0===n?void 0:n.call(r))||{},a=i.deviceModel,s=i.deviceBrand,c=i.system,u=i.platform;this.deviceInfo={deviceBrand:s,deviceModel:a,platform:u,system:c},$.debug("deviceInfo",this.deviceInfo)}return t.getInstance=function(){return t.instance},t.prototype.writeLog=function(e){var t=this,r=e.log,n=e.args;if(o.g&&o.g.plus&&o.g.plus.io){var i="".concat(r," ").concat(JSON.stringify(n));this.logTextData+="\r\n "+i,this.writeLogTimer&&clearTimeout(this.writeLogTimer),this.writeLogTimer=setTimeout((function(){t.writeLogTxt()}),3e3)}},t.prototype.writeLogTxt=function(){var t=this;U.io.requestFileSystem(U.io.PRIVATE_DOC,(function(r){r.root.getDirectory(k,{create:!0,exclusive:!1},(function(r){r.getDirectory(P,{create:!0,exclusive:!1},(function(r){e("log","Directory Entry Name: "+r.fullPath+L," at SDK/4.1.7-uniapp-log.js:1"),r.getFile(L,{create:!0},(function(e){e.file((function(r){e.createWriter((function(e){r.size<=2e6?e.seek(e.length):e.seek(0),e.write(t.logTextData),t.logTextData=""}),(function(e){}))}))}))}),(function(e){}))}),(function(e){}))}),(function(e){}))},t.prototype.getLogFile=function(){return new Promise((function(e,t){U.io.resolveLocalFileSystemURL(x,(function(){e(x)}),(function(e){t(e)}))}))},t.prototype.zipCompress=function(e){return new Promise((function(t,r){var n="_doc/".concat(k,"/").concat(P,"/").concat((new Date).getTime(),".zip");U.zip.compress(e,n,(function(){t(n)}),(function(e){r(e)}))}))},t.prototype.removeFile=function(e){U.io.resolveLocalFileSystemURL(e,(function(e){e.remove((function(){}),(function(e){}))}))},t.prototype.uploadLogFile=function(){return e=this,void 0,r=function(){var e,t,r,n,o,i=this;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,this.getLogFile()];case 1:return e=a.sent(),[4,this.zipCompress(e)];case 2:return t=a.sent(),r=this.conn.apiUrl,n=this.conn.context.accessToken,o="".concat(r,"/easemob/logger/chatfiles"),this.env.global.uploadFile({url:o,filePath:t,name:"file",header:{Authorization:"Bearer ".concat(n)},success:function(e){i.uploadLogUUID(JSON.parse(e.data).entities[0].uuid)},complete:function(){i.removeFile(t)}}),[3,4];case 3:return a.sent(),[3,4];case 4:return[2]}}))},new((t=void 0)||(t=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(e){o(e)}}function a(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var r;e.done?n(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,a)}s((r=r.apply(e,[])).next())}));var e,t,r},t.prototype.uploadLogUUID=function(e){var t=this.conn,r=t.apiUrl,n=t.version,o=t.user,i=this.conn.context,a=i.accessToken,s=i.appKey,c="".concat(r,"/easemob/logger/devicelogs"),u={model:16,logfile_uuid:e,sdk_version:n,os_version:"UNIAPP ".concat(this.deviceInfo.system),login_username:o,appkey:s,uploadDate:B()};this.env.global.request({url:c,data:u,method:"POST",header:{Authorization:"Bearer ".concat(a)},success:function(e){}})},t}(),F=H,W=function(){},K={};!function(e){e[e.TRACE=0]="TRACE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(j||(j={}));var V=function(){function e(e,t,r){this.name=e||"defaultLogger",this.currentLevel=0,this.useCookiePersist=!1,this.storageLogLevelKey="loglevel",this.levels=j,this.logMethods=["trace","debug","info","warn","error"],this.methodFactory=r||this.defaultMethodFactory;var n=this._getPersistedLevel();null==n&&(n=null===t?"WARN":t),this.logs=[],this.config={useCache:!1,maxCache:3145728,color:"",background:""},this.logBytes=0,this.setLevel(n,!1,"")}return e.prototype.setConfig=function(e){this.config=e},e.prototype.getLevel=function(){return this.currentLevel},e.prototype.setLevel=function(e,t,r){if("string"==typeof e&&(e=j[e]),void 0===e&&(e=0),!("number"==typeof e&&e>=0&&e<=this.levels.SILENT))throw Error("log.setLevel() called with invalid level: "+e);if(this.currentLevel=e,!1!==t&&this._persistLevel(e),this.replaceLoggingMethods(e,r),"undefined"==typeof console&&e<j.SILENT)throw Error("No console available for logging")},e.prototype.setDefaultLevel=function(e){this._getPersistedLevel()||this.setLevel(e,!1,"")},e.prototype.enableAll=function(e){this.setLevel(this.levels.TRACE,!0,"")},e.prototype.disableAll=function(e){this.setLevel(this.levels.SILENT,!0,"")},e.prototype.getLogs=function(){return this.logs},e.prototype.download=function(){if("undefined"!=typeof window&&"undefined"!=typeof document){var e=this.getLogs().join("\n"),t=new Blob([e],{type:"text/plain;charset=UTF-8"}),r=window.URL.createObjectURL(t),n=document.createElement("a");n.style.display="none",n.href=r,n.setAttribute("download","sdklog"),document.body.appendChild(n),n.click()}},e.prototype._bindMethod=function(e,t,r){var n=this,o=e[t],i=this.getTime(),a=new Date,s=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate();if(r)return this._cacheLog;if("function"==typeof o.bind)return function(){for(var r,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var c=n.getTime();o.call.apply(o,function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}([e,"".concat(c," IM SDK [").concat("log"===t?"debug":t,"]: ")],i,!1)),n.onLog&&n.onLog({time:c,level:"log"===t?"debug":t,logs:i}),null===(r=null==F?void 0:F.getInstance())||void 0===r||r.writeLog({log:"".concat(s," ").concat(c," IM SDK [").concat("log"===t?"debug":t,"]: "),args:i})};try{return Function.prototype.bind.call(o,e,"".concat(i," IM SDK [").concat("log"===t?"debug":t,"]: "))}catch(t){return function(){return Function.prototype.apply.apply(o,[e,arguments])}}},e.prototype.getTime=function(){var e=new Date;return e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()},e.prototype._cacheLog=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=(new Date).toLocaleString()+": ",n="";e.forEach((function(e){n+="object"==c(e)?JSON.stringify(e)+" ":e+" "})),this._cacheLogCall(r+n)},e.prototype._cacheLogCall=function(e){var t=q(e),r=this.logBytes+t,n=this.config.maxCache;if(!(t>=n)){if(r<n)this.logBytes+=t;else for(var o=r-n,i=0;i<o;){var a=this.logs.shift();void 0!==a&&(i+=q(a))}this.logs.push(e)}},e.prototype._getPersistedLevel=function(){var e;if("undefined"==typeof window)return 5;if("undefined"===(e=window&&window.localStorage&&window.localStorage[this.storageLogLevelKey])){var t=window.document.cookie,r=t.indexOf(encodeURIComponent(this.storageLogLevelKey));-1!==r&&(e=/^([^;]+)/.exec(t.slice(r))[1])}return e||5},e.prototype._persistLevel=function(e){var t=this.logMethods[e]||"SILENT";"undefined"!=typeof window&&(window.localStorage&&(window.localStorage[this.storageLogLevelKey]=t),this.useCookiePersist&&(window.document.cookie=encodeURIComponent(this.storageLogLevelKey)+"="+t+";"))},e.prototype.replaceLoggingMethods=function(e,t){for(var r=0;r<this.logMethods.length;r++){var n=this.logMethods[r];this[n]=r<e?W:this.methodFactory(n,e,t)}this.log=this.debug},e.prototype.defaultMethodFactory=function(e,t,r){return this.realMethod(e)||this.enableLoggingWhenConsoleArrives.apply(this,[e,t,r])},e.prototype.realMethod=function(e){return"debug"===e&&(e="log"),"undefined"!=typeof console&&("trace"===e&&w?M:void 0!==console[e]?this._bindMethod(console,e,this.config.useCache):void 0!==console.log?this._bindMethod(console,"log",this.config.useCache):W)},e.prototype.enableLoggingWhenConsoleArrives=function(e,t,r){return function(){"undefined"!=typeof console&&(this.replaceLoggingMethods.call(this,t,r),this[e].apply(this,arguments))}.bind(this)},e}();function q(e){for(var t=e.length,r=0;r<e.length;r++)e.charCodeAt(r)>255&&t++;return t}var z=new V;z.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");return this};var J="undefined"!=typeof window?window.log:void 0;z.noConflict=function(){return"undefined"!=typeof window&&window.log===z&&(window.log=J),z},z.getLoggers=function(){return K};var $=z,Y=function(){return Y=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Y.apply(this,arguments)},X=function(){};function Q(e,t){var r,n=this;return ie().platform===ne.WEB?new Promise((function(t,n){var o=e.dataType||"text",i=e.success||X,a=e.error||X,s=new XMLHttpRequest;s.ontimeout=function(){n({type:f.REQUEST_TIMEOUT,message:"Request Timeout",errorType:"timeout_error",xhr:s})},s.onerror=function(){n({type:f.REQUEST_UNKNOWN,message:"Request Unknow Error",errorType:"onerror",xhr:s})},s.onabort=function(){n({type:f.REQUEST_ABORT,message:"Request Abort",errorType:"onabort",xhr:s})},s.onreadystatechange=function(){if(4===s.readyState){var e=(new Date).getTime()-r,c=s.status||0,u={elapse:e,httpCode:c};if(200===c){le.ajaxUnconventionalErrorTimes=0;try{switch(o){case"text":return i(s.responseText),void t(s.responseText);case"json":var l=JSON.parse(s.responseText);return l.extraInfo=u,i(l),void t(l);case"xml":return s.responseXML&&s.responseXML.documentElement?(i(s.responseXML.documentElement),void t(s.responseXML.documentElement)):(a({type:f.WEBIM_CONNCTION_AJAX_ERROR,data:s.responseText,message:"XHR.responseXML is null or XHR.responseXML.documentElement is null"}),void n({type:f.WEBIM_CONNCTION_AJAX_ERROR,data:s.responseText,message:"XHR.responseXML is null or XHR.responseXML.documentElement is null"}));default:a({type:f.WEBIM_CONNCTION_AJAX_ERROR,data:s.responseText,message:"Invalid dataType"}),n({type:f.WEBIM_CONNCTION_AJAX_ERROR,data:s.responseText,message:"Invalid dataType"})}return t(s.response||s.responseText),void i(s.response||s.responseText,s)}catch(e){n(e)}return}[400,401,403,404,429,500,503].includes(c)||($.debug("rest api request fail status:",c),le.ajaxUnconventionalErrorTimes++),function(e,t,r,n){var o,i,a,s,c,u,l,p,d,h,m,g,E,y,v,_,T,O,R,I,C=e.response;C&&"string"==typeof C&&(C=JSON.parse(C));var N=e.status,A={elapse:n,httpCode:N,errDesc:null==C?void 0:C.error_description};if(400===N){if(40002===C.error_code)return void t({type:f.THREAD_ALREADY_EXIST,message:null==C?void 0:C.error_description,extraInfo:A});if(40009===C.error_code)return void t({type:f.OPERATION_UNSUPPORTED,message:null==C?void 0:C.error_description,extraInfo:A});if(60005===C.error_code)return void t({type:f.GROUP_MEMBER_ATTRIBUTES_SET_FAILED,message:(null==C?void 0:C.desc)||(null==C?void 0:C.error_description),extraInfo:A});if(60010===C.error_code)return void((null==C?void 0:C.error_description.includes("exceeds chatgroup user metadata single value limit"))?t({type:f.MAX_LIMIT,message:(null==C?void 0:C.desc)||C.error_description,extraInfo:A}):t({type:f.NO_PERMISSION,message:(null==C?void 0:C.desc)||C.error_description,extraInfo:A}));if(60011===C.error_code)return void t({type:f.CHATROOM_NOT_JOINED,message:null==C?void 0:C.desc,extraInfo:A});if(60006===C.error_code||60007===C.error_code||60009===C.error_code||60012===C.error_code)return void t({type:f.MAX_LIMIT,message:(null==C?void 0:C.desc)||(null==C?void 0:C.error_description),extraInfo:A});if(null===(o=C.error_description)||void 0===o?void 0:o.includes("are not members of this group"))return(null===(i=e.responseURL)||void 0===i?void 0:i.includes("chatgroups"))?t({type:f.GROUP_NOT_JOINED,data:e.response||e.responseText,message:C.error_description,extraInfo:A}):t({type:f.CHATROOM_NOT_JOINED,data:e.response||e.responseText,message:C.error_description,extraInfo:A}),void r({type:f.WEBIM_CONNCTION_AJAX_ERROR,message:null==C?void 0:C.error_description,data:e.responseText,extraInfo:A});if("the app not open presence"===(null==C?void 0:C.result))return void t({type:f.SERVICE_NOT_ENABLED,message:null==C?void 0:C.result,extraInfo:A});switch(null==C?void 0:C.error_description){case"the user is already operation this message":t({type:f.REACTION_ALREADY_ADDED,message:null==C?void 0:C.error_description,extraInfo:A});break;case"The quantity has exceeded the limit!":t({type:f.MAX_LIMIT,message:null==C?void 0:C.error_description,extraInfo:A});break;case"The user not in this group!":t({type:f.GROUP_NOT_JOINED,message:null==C?void 0:C.error_description,extraInfo:A});break;case"the user operation is illegal!":t({type:f.REACTION_OPERATION_IS_ILLEGAL,message:null==C?void 0:C.error_description,extraInfo:A});break;case"this appKey is not open reaction service!":case"this appKey not open message roaming":t({type:f.SERVICE_NOT_ENABLED,message:null==C?void 0:C.error_description,extraInfo:A});break;case"this message is creating reaction, please try again.":t({type:f.REACTION_CREATING,message:null==C?void 0:C.error_description,extraInfo:A});break;case"groupId can not be null!":t({type:f.GROUP_NOT_EXIST,message:null==C?void 0:C.error_description,extraInfo:A});break;case"The input text is too long.":t({type:f.TRANSLATION_TEXT_TOO_LONG,message:null==C?void 0:C.error_description,extraInfo:A});break;case"The target language is not valid.":t({type:f.TRANSLATION_NOT_VALID,message:null==C?void 0:C.error_description,extraInfo:A});break;case"report failed, get message by id failed":t({type:f.MESSAGE_NOT_FOUND,message:null==C?void 0:C.error_description,extraInfo:A});break;case"ext is too big ":t({type:f.PRESENCE_PARAM_EXCEED,message:null==C?void 0:C.error_description,extraInfo:A});break;case"Request body not readable.Please check content type is correct!":t({type:f.REQUEST_PARAMETER_ERROR,message:null==C?void 0:C.error_description,extraInfo:A});break;default:t({type:f.WEBIM_CONNCTION_AJAX_ERROR,message:null==C?void 0:C.error_description,data:e.responseText,extraInfo:A}),r({type:f.WEBIM_CONNCTION_AJAX_ERROR,message:null==C?void 0:C.error_description,data:e.responseText,extraInfo:A})}}else if(401===N)40001===C.error_code||60001===C.error_code||"Unable to authenticate (OAuth)"===C.error_description?t({type:f.NO_PERMISSION,message:null==C?void 0:C.error_description,extraInfo:A}):(r({type:f.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:e.responseText,extraInfo:A}),t({type:f.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:e.responseText,extraInfo:A}));else if(403===N)4e4===C.error_code||60004===C.error_code||15002===C.error_code?t({type:f.SERVICE_NOT_ENABLED,message:null==C?void 0:C.error_description,extraInfo:A}):40003===C.error_code||40004===C.error_code?t({type:f.THREAD_ALREADY_EXIST,message:null==C?void 0:C.error_description,extraInfo:A}):40005===C.error_code||40007===C.error_code||91002===C.error_code?t({type:f.MAX_LIMIT,message:null==C?void 0:C.error_description,extraInfo:A}):60002===C.error_code&&t({type:f.PERMISSION_DENIED,message:null==C?void 0:C.error_description,extraInfo:A}),"group member list is full!"===C.error_description?(null===(a=e.responseURL)||void 0===a?void 0:a.includes("chatgroups"))?t({type:f.GROUP_MEMBERS_FULL,data:e.response||e.responseText,message:C.error_description,extraInfo:A}):t({type:f.CHATROOM_MEMBERS_FULL,data:e.response||e.responseText,message:C.error_description,extraInfo:A}):(null===(s=C.error_description)||void 0===s?void 0:s.includes(C.error_description.includes("already in group")))?(null===(c=e.responseURL)||void 0===c?void 0:c.includes("chatgroups"))&&t({type:f.GROUP_ALREADY_JOINED,data:e.response||e.responseText,message:C.error_description,extraInfo:A}):(null===(u=C.error_description)||void 0===u?void 0:u.includes("are not members of this group"))?(null===(l=e.responseURL)||void 0===l?void 0:l.includes("chatgroups"))?t({type:f.GROUP_NOT_JOINED,data:e.response||e.responseText,message:C.error_description,extraInfo:A}):t({type:f.CHATROOM_NOT_JOINED,data:e.response||e.responseText,message:C.error_description,extraInfo:A}):(null===(p=C.error_description)||void 0===p?void 0:p.includes("service not open!"))||(null===(d=C.error_description)||void 0===d?void 0:d.includes("message report not open"))||(null===(h=C.error_description)||void 0===h?void 0:h.includes("messageroaming function not open"))?t({type:f.SERVICE_NOT_ENABLED,data:e.response||e.responseText,message:C.error_description,extraInfo:A}):(null===(m=C.error_description)||void 0===m?void 0:m.includes("members size is greater than max user size !"))?t({type:f.GROUP_MEMBERS_LIMIT,data:e.response||e.responseText,message:C.error_description,extraInfo:A}):(null===(g=C.error_description)||void 0===g?void 0:g.includes("can not operate this group, reason: group is disabled"))?t({type:f.GROUP_IS_DISABLED,data:e.response||e.responseText,message:C.error_description,extraInfo:A}):t({type:f.PERMISSION_DENIED,data:e.response||e.responseText,message:"permission denied",extraInfo:S(S({},A),{errDesc:"permission denied"})}),r({type:f.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:e.responseText,extraInfo:A});else if(404===N)40011===C.error_code?t({type:f.THREAD_NOT_EXIST,message:null==C?void 0:C.error_description,extraInfo:A}):40012===C.error_code?t({type:f.NO_PERMISSION,message:null==C?void 0:C.error_description,extraInfo:A}):60003===C.error_code||20004===C.error_code?t({type:f.GROUP_NOT_JOINED,message:null==C?void 0:C.error_description,extraInfo:A}):91001===C.error_code&&t({type:f.CONVERSATION_NOT_EXIST,message:null==C?void 0:C.error_description,extraInfo:A}),(null===(E=C.error_description)||void 0===E?void 0:E.includes("do not find this group"))||(null===(y=C.error_description)||void 0===y?void 0:y.includes("does not exist"))?(null===(v=e.responseURL)||void 0===v?void 0:v.includes("chatgroups"))?t({type:f.GROUP_NOT_EXIST,data:e.response||e.responseText,message:"The chat room dose not exist.",extraInfo:S(S({},A),{errDesc:"The chat room dose not exist."})}):t({type:f.CHATROOM_NOT_EXIST,data:e.response||e.responseText,message:"The chat room dose not exist.",extraInfo:S(S({},A),{errDesc:"The chat room dose not exist."})}):(null===(_=C.error_description)||void 0===_?void 0:_.includes("username"))&&(null===(T=C.error_description)||void 0===T?void 0:T.includes("doesn't exist!'"))||(null===(O=C.error_description)||void 0===O?void 0:O.includes("user not found"))?t({type:f.USER_NOT_FOUND,data:e.response||e.responseText,message:C.error_description,extraInfo:A}):t({type:f.WEBIM_CONNCTION_AJAX_ERROR,data:e.response||e.responseText,message:e.responseText,extraInfo:A}),r({type:f.WEBIM_CONNCTION_AJAX_ERROR,data:e.response||e.responseText,message:e.responseText,extraInfo:A});else if(406===N)90004===C.error_code&&t({type:f.OPERATION_NOT_ALLOWED,message:null==C?void 0:C.error_description,extraInfo:A});else if(429===N||503===N){if(null===(R=C.error_description)||void 0===R?void 0:R.includes("The request has reached the maximum limit"))return void t({type:f.MAX_LIMIT,message:e.responseText,extraInfo:A});t({type:f.SERVER_BUSY,data:e.response||e.responseText,message:"Server is busy.",extraInfo:S(S({},A),{errDesc:"Server is busy."})}),r({type:f.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:"Server is busy.",extraInfo:S(S({},A),{errDesc:"Server is busy."})})}else if(500===N){if(40006===C.error_code||40008===C.error_code||40010===C.error_code)return void t({type:f.SERVER_UNKNOWN_ERROR,message:null==C?void 0:C.error_description,extraInfo:A});if(90005===C.error_code||99999===C.error_code)return void t({type:f.REQUEST_UNKNOWN,message:null==C?void 0:C.error_description,extraInfo:A});if(null===(I=C.error_description)||void 0===I?void 0:I.includes("translte failed!"))return void t({type:f.TRANSLATION_FAILED,message:e.responseText,extraInfo:A});t({type:f.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:"",extraInfo:A}),r({type:f.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:"",extraInfo:A})}else t({type:f.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:e.responseText,extraInfo:S(S({},A),{errDesc:"ajax error"})}),r({type:f.WEBIM_CONNCTION_AJAX_ERROR,data:e.responseText,message:e.responseText,extraInfo:S(S({},A),{errDesc:"ajax error"})})}(s,n,a,e)}0===s.readyState&&(a({type:f.WEBIM_CONNCTION_AJAX_ERROR,data:s.responseText,message:"Request not initialized"}),n({type:f.WEBIM_CONNCTION_AJAX_ERROR,data:s.responseText,message:"Request not initialized"}))},e.responseType&&s.responseType&&(s.responseType=e.responseType),e.mimeType&&s.overrideMimeType(e.mimeType);var c=e.type||"POST",u=e.data||null,l="";if("get"===c.toLowerCase()&&u){for(var p in u)u.hasOwnProperty(p)&&(l+=p+"="+u[p]+"&");l=l?l.slice(0,-1):l,e.url+=(e.url.indexOf("?")>0?"&":"?")+(l?l+"&":l)+"_v="+(new Date).getTime(),u=null,l=""}r=(new Date).getTime(),s.open(c,e.url);var d=e.headers||{};for(var h in d["Content-Type"]||(d["Content-Type"]="application/json"),d)d.hasOwnProperty(h)&&s.setRequestHeader(h,d[h]);s.send(u)})).then((function(r){return n.dataReport&&t&&t!==_.SDK_INTERNAL&&n.dataReport.geOperateFun({operationName:t})({isEndApi:!0,data:Y({isSuccess:1,requestUrl:e.url,requestName:t,requestMethod:e.type},ue(r.extraInfo))}),t!==_.SDK_INTERNAL&&delete r.extraInfo,"Object"===Z(r)?Y(Y({},r),{type:f.REQUEST_SUCCESS}):{data:r,type:f.REQUEST_SUCCESS}})).catch((function(r){throw n.dataReport&&t&&t!==_.SDK_INTERNAL&&n.dataReport.geOperateFun({operationName:t})({isEndApi:!0,data:Y({isSuccess:0,requestUrl:e.url,requestName:t,requestMethod:e.type},ue(r.extraInfo))}),t!==_.SDK_INTERNAL&&delete r.extraInfo,r})):ee.call(this,e,t)}function Z(e){return Object.prototype.toString.call(e).slice(8,-1)}function ee(e,t){var r=this;return new Promise((function(t,r){var n=e.success||X,o=e.error||X,i=e.type||"POST",a=e.data||null,s="",c=(new Date).getTime(),u=le.getEnvInfo();if("get"===i.toLowerCase()&&a){for(var l in a)a.hasOwnProperty(l)&&(s+=l+"="+a[l]+"&");s=s?s.slice(0,-1):s,e.url+=(e.url.indexOf("?")>0?"&":"?")+(s?s+"&":s)+"_v="+(new Date).getTime(),a=null,s=""}var p={url:e.url,data:e.data,method:i,headers:{},success:function(e){var i,a,s,u,l,p={elapse:(new Date).getTime()-c,httpCode:Number((null===(i=e.statusCode)||void 0===i?void 0:i.toString())||(null===(a=e.status)||void 0===a?void 0:a.toString())),errDesc:(null===(s=null==e?void 0:e.data)||void 0===s?void 0:s.error_description)||""};if("200"===(null===(u=e.statusCode)||void 0===u?void 0:u.toString())||"200"===(null===(l=e.status)||void 0===l?void 0:l.toString())){e.data.extraInfo=p;var d=e.data;n(d),t(d)}else e.extraInfo=p,o(d=e),r(d)},complete:function(){},fail:function(e){var t={elapse:(new Date).getTime()-c,httpCode:-1,errDesc:"request:fail"};e.extraInfo=t,e.data={error:"request:fail",error_description:"request:fail"},o(e),r(e)}};if("zfb"===u.platform||"dd"===u.platform?p.headers=e.headers:p.header=e.headers,"dd"===u.platform)return dd.httpRequest(p);u.global.request(p)})).then((function(n){return r.dataReport&&t&&t!==_.SDK_INTERNAL&&r.dataReport.geOperateFun({operationName:t})({isEndApi:!0,data:Y({isSuccess:1,requestUrl:e.url,requestName:t,requestMethod:e.type},ue(n.extraInfo))}),t!==_.SDK_INTERNAL&&delete n.extraInfo,"Object"===Z(n)?Y(Y({},n),{type:f.REQUEST_SUCCESS}):{data:n,type:f.REQUEST_SUCCESS}})).catch((function(n){throw r.dataReport&&t&&t!==_.SDK_INTERNAL&&r.dataReport.geOperateFun({operationName:t})({isEndApi:!0,data:Y({isSuccess:0,requestUrl:e.url,requestName:t,requestMethod:e.type},ue(n.extraInfo))}),t!==_.SDK_INTERNAL&&delete n.extraInfo,n}))}var te,re,ne,oe=(te=function(e,t){var r=ie();if(r.platform!==ne.WEB){var n=r.global,o=function(r){r.isConnected?e():t(),$.debug("offNetworkStatusChange:networkType",null==r?void 0:r.networkType)};n.offNetworkStatusChange&&n.offNetworkStatusChange(o),n.onNetworkStatusChange&&n.onNetworkStatusChange(o)}else"undefined"!=typeof addEventListener&&(window.addEventListener("online",e),window.addEventListener("offline",t))},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!te)return re;re=te.apply(void 0,e),te=null});function ie(){return"undefined"!=typeof swan&&ae(swan)?{platform:ne.BAIDU,global:swan}:"undefined"!=typeof tt&&ae(tt)?{platform:ne.TT,global:tt}:"undefined"!=typeof dd&&ae(dd)?{platform:ne.DD,global:dd}:"undefined"!=typeof my&&ae(my)?{platform:ne.ZFB,global:my}:"undefined"!=typeof n&&ae(n)?{platform:ne.WX,global:n}:"undefined"!=typeof uni&&ae(uni)?{platform:ne.UNI,global:uni}:"undefined"!=typeof window&&window.WebSocket?{platform:ne.WEB,global:window}:{platform:ne.NODE,global:o.g||{}}}function ae(e){for(var t=["canIUse","getSystemInfo"],r=0,n=t.length;r<n;r++)if(!e[t[r]])return!1;return!0}function se(e,t){var r,n,o=this,i=(new Date).getTime(),a=e.accessToken;if(a){var s=e.appKey,c=[],u="",l="";if(s&&(u=(c=s.split("#"))[0],l=c[1]),u||l){var p=e.apiUrl,d=e.uploadUrl||p+"/"+u+"/"+l+"/chatfiles";if((null===(n=null===(r=null==e?void 0:e.file)||void 0===r?void 0:r.data)||void 0===n?void 0:n.size)<=0)e.onFileUploadError&&e.onFileUploadError({type:f.WEBIM_UPLOADFILE_ERROR,message:"fileSize must be greater than 0"});else{var h=new XMLHttpRequest;h.upload&&h.upload.addEventListener("progress",e.onFileUploadProgress||X,!1),h.addEventListener("abort",e.onFileUploadCanceled||X,!1),h.addEventListener("error",(function(e){g({type:f.WEBIM_UPLOADFILE_ERROR,data:h})}),!1),h.addEventListener("load",(function(r){try{var n=JSON.parse(h.responseText);if(400===h.status)return g({type:f.WEBIM_UPLOADFILE_ERROR,data:n}),!1;try{!function(r){var n=(new Date).getTime()-i;o.dataReport&&t&&[_.UPLOAD_MSG_ATTACH,_.UPLOAD_CHATROOM_FILE,_.UPLOAD_GROUP_FILE].includes(t)&&o.dataReport.geOperateFun({operationName:t})({isEndApi:!0,data:{isSuccess:(null==r?void 0:r.error)?0:1,requestMethod:"POST",requestName:t,requestElapse:n,requestUrl:d,code:h.status,codeDesc:(null==r?void 0:r.error_description)||""}}),e.onFileUploadComplete&&e.onFileUploadComplete(r)}(n)}catch(r){g({type:f.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,data:r})}}catch(r){g({type:f.WEBIM_UPLOADFILE_ERROR,data:h.responseText})}}),!1),h.open("POST",d),h.setRequestHeader("restrict-access","true"),h.setRequestHeader("Accept","*/*"),h.setRequestHeader("Authorization","Bearer "+a);var m=new FormData;m.append("file",e.file.data),e.thumbnailWidth&&m.append("thumbnail-width",e.thumbnailWidth+""),e.thumbnailHeight&&m.append("thumbnail-height",e.thumbnailHeight+""),h.send(m)}}else e.onFileUploadError&&e.onFileUploadError({type:f.WEBIM_UPLOADFILE_ERROR,message:"AppKey illegal"})}else e.onFileUploadError&&e.onFileUploadError({type:f.WEBIM_UPLOADFILE_NO_LOGIN,message:"AccessToken cannot be empty"});function g(r){var n=(new Date).getTime()-i;o.dataReport&&t&&[_.UPLOAD_MSG_ATTACH,_.UPLOAD_CHATROOM_FILE,_.UPLOAD_GROUP_FILE].includes(t)&&o.dataReport.geOperateFun({operationName:t})({isEndApi:!0,data:{isSuccess:0,requestMethod:"POST",requestName:t,requestElapse:n,requestUrl:d,code:(null==h?void 0:h.status)||0,codeDesc:"upload file error"}}),e.onFileUploadError&&e.onFileUploadError(r)}}function ce(e,t){e.onFileDownloadComplete=e.onFileDownloadComplete||X,e.onFileDownloadError=e.onFileDownloadError||X;var r=(new Date).getTime(),n=new XMLHttpRequest,o=this;n.addEventListener("load",(function(i){var a=(new Date).getTime()-r;o.dataReport&&t&&t===_.DOWN_GROUP_FILE&&o.dataReport.geOperateFun({operationName:t})({isEndApi:!0,data:{isSuccess:200===n.status?1:0,requestMethod:"POST",requestName:t,requestElapse:a,requestUrl:null==e?void 0:e.url,code:n.status,codeDesc:200===n.status?"":"download file error"}}),e.onFileDownloadComplete&&e.onFileDownloadComplete(n.response)}),!1),n.addEventListener("error",(function(i){var a=(new Date).getTime()-r;o.dataReport&&t&&t===_.DOWN_GROUP_FILE&&o.dataReport.geOperateFun({operationName:t})({isEndApi:!0,data:{isSuccess:0,requestMethod:"POST",requestName:t,requestElapse:a,requestUrl:null==e?void 0:e.url,code:(null==n?void 0:n.status)||0,codeDesc:"download file error"}}),e.onFileDownloadError&&e.onFileDownloadError({type:f.WEBIM_DOWNLOADFILE_ERROR,id:e.id,xhr:n})}),!1);var i=e.method||"GET",a=e.responseType||"blob",s=e.mimeType||"text/plain; charset=x-user-defined";n.open(i,e.url),"undefined"!=typeof Blob?n.responseType=a:n.overrideMimeType(s);var c={"X-Requested-With":"XMLHttpRequest",Accept:"application/octet-stream","share-secret":e.secret,Authorization:"Bearer "+this.context.accessToken},u=e.headers||{};for(var l in u)c[l]=u[l];for(var l in c)c[l]&&n.setRequestHeader(l,c[l]);n.send(null)}function ue(e){void 0===e&&(e={});var t=e.elapse,r=void 0===t?0:t,n=e.httpCode,o=void 0===n?0:n,i=e.errDesc;return{requestElapse:r,code:o,codeDesc:void 0===i?"":i}}!function(e){e.WEB="web",e.WX="wx",e.ZFB="zfb",e.DD="dd",e.TT="tt",e.BAIDU="baidu",e.QUICK_APP="quick_app",e.UNI="uni",e.NODE="node"}(ne||(ne={}));var le={autoIncrement:0,ajaxUnconventionalErrorTimes:0,ajax:Q,getUniqueId:function(){this.autoIncrement?this.autoIncrement++:this.autoIncrement=1;var e=new Date,t=new Date(2010,1,1);return(e.getTime()-t.getTime()+this.autoIncrement).toString()},getFileUrl:function(e){var t={url:"",filename:"",filetype:"",data:{}},r="string"==typeof e?document.getElementById(e):e;if(window.URL.createObjectURL){if(!r.files)throw Error("this is not HTMLInputElement");var n=r.files;if(n.length>0){var o=n.item(0);t.data=o,t.url=window.URL.createObjectURL(o),t.filename=(null==o?void 0:o.name)||""}}else{if("string"!=typeof e)throw Error("in IE fileInputId must be string");o=document.getElementById(e).value,t.url=o;var i=o.lastIndexOf("/"),a=o.lastIndexOf("\\"),s=Math.max(i,a);t.filename=s<0?o:o.substring(s+1)}var c=t.filename.lastIndexOf(".");return-1!==c&&(t.filetype=t.filename.substring(c+1).toLowerCase()),t},uploadFile:se,flow:function(e){for(var t=e.length,r=t;r--;)if("function"!=typeof e[r])throw new TypeError("Expected a function");return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];for(var o=0,i=t?e[o].apply(this,r):r[0];++o<t;)i=e[o].call(this,i);return i}},listenNetwork:oe,getEnvInfo:ie,wxRequest:ee,parseDownloadResponse:function(e){if(!window||!window.URL)throw Error("parseDownloadResponse can be used in broswer only");return e&&e.type&&"application/json"===e.type||0>Object.prototype.toString.call(e).indexOf("Blob")?this.url+"?token=":window.URL.createObjectURL(e)},download:ce,parseNotify:function(e){for(var t="",r=0;r<e.length;r++)t+="%"+e[r].toString(16);return JSON.parse(decodeURIComponent(t))},getExtraData:ue},pe=o(188),de=o.n(pe),he=function(){return he=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},he.apply(this,arguments)};function fe(e){var t,r,n=e.id,o=e.payload,i=e.timestamp,a=e.to,s=o.bodies&&o.bodies.length>0?o.bodies[0]:{},c={},u={},l=o.type?o.type:a.indexOf("@conference.easemob.com")>-1?"groupChat":"singleChat";switch(l="chat"===l?"singleChat":l,s.type){case"txt":c={id:n,type:"txt",chatType:l,msg:s.msg||"",to:o.to||"",from:o.from,time:i,ext:o.ext};break;case"img":c={id:n,type:"img",chatType:l,to:o.to,from:o.from,time:i,ext:o.ext,width:(null===(t=s.size)||void 0===t?void 0:t.width)||0,height:(null===(r=s.size)||void 0===r?void 0:r.height)||0,secret:s.secret||"",url:(null==s?void 0:s.url)||"",file_length:s.file_length||0,file:{}};break;case"video":c={id:n,type:"video",chatType:l,from:o.from,to:o.to,url:(null==s?void 0:s.url)||"",secret:s.secret||"",filename:s.filename,length:s.length||0,file:{},file_length:s.file_length||0,filetype:o.ext.file_type||"",ext:o.ext,time:i};break;case"loc":c={id:n,type:"loc",chatType:l,from:o.from,to:o.to,buildingName:s.buildingName||"",addr:s.addr,lat:s.lat,lng:s.lng,ext:o.ext,time:i};break;case"audio":c={id:n,type:"audio",chatType:l,from:o.from,to:o.to,secret:s.secret||"",ext:o.ext,time:i,url:(null==s?void 0:s.url)||"",file:{},filename:s.filename,length:s.length||0,file_length:s.file_length||0,filetype:o.ext.file_type||""};break;case"file":c={id:n,type:"file",chatType:l,from:o.from,to:o.to,ext:o.ext,time:i,url:(null==s?void 0:s.url)||"",secret:s.secret||"",file:{},filename:s.filename||"",file_length:s.file_length||0,filetype:o.ext.file_type||""};break;case"cmd":c={id:n,type:"cmd",chatType:l,from:o.from,to:o.to,ext:o.ext,time:i,action:s.action||""};break;case"custom":c={id:n,type:"custom",chatType:l,from:o.from,to:o.to,ext:o.ext,time:i,customEvent:s.customEvent||"",customExts:s.customExts||""};break;default:$.error("unexpected message: ".concat(e))}if(o.msgConfig&&(u.msgConfig=o.msgConfig),null==o?void 0:o.meta){var p=o.meta;p.thread&&(u.chatThread={messageId:p.thread.msg_parent_id,parentId:p.thread.muc_parent_id,chatThreadName:p.thread.thread_name}),p.reactions&&(u.reactions=p.reactions),p.translations&&(u.translations=p.translations)}return he(he({},c),u)}var me=function(){function e(e){var t=e.id;this.id=t,this.type=e.type}return e.prototype.set=function(e){this.body={id:this.id,ackId:e.id,type:"read",to:e.to,from:e.from||"",chatType:e.chatType}},e.create=function(e){return{id:le.getUniqueId(),chatType:e.chatType,ackId:e.id,type:"read",to:e.to,from:e.from||"",ackContent:e.ackContent,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly}},e}(),ge=function(){function e(e){this.id=e.id,this.type=e.type}return e.prototype.set=function(e){this.body={id:this.id,ackId:e.ackId,type:"delivery",to:e.to,from:e.from||""}},e.create=function(e){return{id:le.getUniqueId(),ackId:e.ackId,type:"delivery",to:e.to,from:e.from||"",isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly}},e}(),Ee=function(){function e(e){var t=e.type,r=e.id;this.id=r,this.type=t}return e.prototype.set=function(e){this.body={id:this.id,chatType:e.chatType||"singleChat",type:"channel",to:e.to,from:e.from||"",time:Date.now()}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:le.getUniqueId(),type:"channel",chatType:e.chatType||"singleChat",to:e.to,from:e.from||"",time:Date.now(),isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly}},e}(),ye=function(){function e(e){var t=e.type,r=e.id||le.getUniqueId();this.id=r,this.type=t,this.value=""}return e.prototype.set=function(e){this.body={id:this.id,chatType:e.chatType||"singleChat",type:"txt",to:e.to,msg:e.msg,from:e.from,roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now(),isChatThread:e.isChatThread},this.value=e.msg},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){var t,r;return(null===(t=e.msgConfig)||void 0===t?void 0:t.languages)&&Array.isArray(null===(r=e.msgConfig)||void 0===r?void 0:r.languages),{type:"txt",id:le.getUniqueId(),msg:e.msg,to:e.to,from:e.from||"",chatType:e.chatType,ext:e.ext,time:Date.now(),msgConfig:e.msgConfig,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList}},e}(),ve=function(){function e(e){var t=e.type,r=e.id;this.id=r||le.getUniqueId(),this.type=t}return e.prototype.set=function(e){this.body={id:this.id,chatType:e.chatType||"singleChat",type:"cmd",to:e.to,action:e.action,from:e.from,roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now()}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:le.getUniqueId(),type:"cmd",to:e.to,from:e.from||"",chatType:e.chatType||"singleChat",action:e.action,time:Date.now(),ext:e.ext,msgConfig:e.msgConfig,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList}},e}(),_e=function(){function e(e){var t=e.type,r=e.id||le.getUniqueId();this.id=r,this.type=t}return e.prototype.set=function(e){this.body={id:this.id,chatType:e.chatType||"singleChat",type:"custom",to:e.to,customEvent:e.customEvent,customExts:e.customExts,from:e.from,roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now()}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:le.getUniqueId(),chatType:e.chatType||"singleChat",type:"custom",to:e.to,customEvent:e.customEvent,customExts:e.customExts,from:e.from||"",ext:e.ext,time:Date.now(),msgConfig:e.msgConfig,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList}},e}(),Te=function(){function e(e){var t=e.type,r=e.id;this.id=r||le.getUniqueId(),this.type=t}return e.prototype.set=function(e){this.body={id:this.id,chatType:e.chatType||"singleChat",type:"loc",to:e.to,addr:e.addr,buildingName:e.buildingName,lat:e.lat,lng:e.lng,from:e.from,roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now()}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:le.getUniqueId(),chatType:e.chatType||"singleChat",type:"loc",to:e.to,addr:e.addr,buildingName:e.buildingName,lat:e.lat,lng:e.lng,from:e.from||"",ext:e.ext,time:Date.now(),msgConfig:e.msgConfig,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList}},e}(),Oe=function(){function e(e){var t=e.type,r=e.id||le.getUniqueId();this.id=r,this.type=t}return e.prototype.set=function(e){e.file=e.file||e.fileInputId&&le.getFileUrl(e.fileInputId),this.body={id:this.id,chatType:e.chatType||"singleChat",type:"img",file:e.file,width:e.width,height:e.height,to:e.to,from:e.from||"",roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now(),onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,body:e.body,isChatThread:e.isChatThread}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:le.getUniqueId(),chatType:e.chatType,type:"img",url:e.url,width:e.width,height:e.height,file:e.file,to:e.to,from:e.from||"",ext:e.ext,time:Date.now(),msgConfig:e.msgConfig,file_length:e.file_length,onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList,thumbnailWidth:e.thumbnailWidth,thumbnailHeight:e.thumbnailHeight}},e}(),Re=function(){function e(e){var t=e.type,r=e.id||le.getUniqueId();this.id=r,this.type=t}return e.prototype.set=function(e){e.file=e.file||e.fileInputId&&le.getFileUrl(e.fileInputId),this.body={id:this.id,chatType:e.chatType||"singleChat",type:"audio",file:e.file,filename:e.filename,length:e.length,file_length:e.file_length,fileInputId:e.fileInputId,to:e.to,from:e.from,roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now(),onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,body:e.body,isChatThread:e.isChatThread}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:le.getUniqueId(),chatType:e.chatType,type:"audio",filename:e.filename,length:e.length,file:e.file,to:e.to,from:e.from||"",ext:e.ext,time:Date.now(),onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,body:e.body,file_length:e.file_length,msgConfig:e.msgConfig,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList}},e}(),Ie=function(){function e(e){var t=e.type,r=e.id;this.id=r,this.type=t}return e.prototype.set=function(e){e.file=e.file||e.fileInputId&&le.getFileUrl(e.fileInputId),this.body={id:this.id,chatType:e.chatType||"singleChat",type:"video",file:e.file,filename:e.filename,length:e.length,file_length:e.file_length,fileInputId:e.fileInputId,to:e.to,from:e.from,roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now(),apiUrl:e.apiUrl,onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,body:e.body,isChatThread:e.isChatThread}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:le.getUniqueId(),chatType:e.chatType||"singleChat",type:"video",file:e.file,filename:e.filename,length:e.length,file_length:e.file_length,fileInputId:e.fileInputId,to:e.to,from:e.from||"",ext:e.ext,time:Date.now(),onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,body:e.body,msgConfig:e.msgConfig,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList}},e}(),Se=function(){function e(e){var t=e.type,r=e.id;this.id=r,this.type=t}return e.prototype.set=function(e){e.file=e.file||e.fileInputId&&le.getFileUrl(e.fileInputId),this.body={id:this.id,chatType:e.chatType||"singleChat",type:"file",file:e.file,filename:e.filename,fileInputId:e.fileInputId,to:e.to,from:e.from,roomType:e.roomType,success:e.success,fail:e.fail,ext:e.ext,time:Date.now(),onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,body:e.body,isChatThread:e.isChatThread}},e.prototype.setChatType=function(e){return!!this.body&&(this.body.chatType=e,!0)},e.prototype.setGroup=function(e){return!!this.body&&(this.body.group=e,!0)},e.create=function(e){return{id:le.getUniqueId(),chatType:e.chatType||"singleChat",type:"file",file:e.file,filename:e.filename,fileInputId:e.fileInputId,file_length:e.file_length,to:e.to,from:e.from||"",ext:e.ext,onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,onFileUploadProgress:e.onFileUploadProgress,body:e.body,time:Date.now(),msgConfig:e.msgConfig,isChatThread:e.isChatThread,priority:e.priority,deliverOnlineOnly:e.deliverOnlineOnly,receiverList:e.receiverList}},e}(),Ce=function(){function e(t,r){return this.type=t,this.id=r||le.getUniqueId(),e.createOldMsg({type:t,id:this.id})}return e.createOldMsg=function(e){switch(e.type){case"read":return new me({type:"read",id:e.id});case"delivery":return new ge({type:"delivery",id:e.id});case"channel":return new Ee({type:"channel",id:e.id});case"txt":return new ye({type:"txt",id:e.id});case"cmd":return new ve({type:"cmd",id:e.id});case"custom":return new _e({type:"custom",id:e.id});case"loc":return new Te({type:"loc",id:e.id});case"img":return new Oe({type:"img",id:e.id});case"audio":return new Re({type:"audio",id:e.id});case"video":return new Ie({type:"video",id:e.id});case"file":return new Se({type:"file",id:e.id})}},e.create=function(e){return"txt"!==(t=e).type||"version"in t?function(e){return"img"===e.type&&!("version"in e)}(e)?Oe.create(e):function(e){return"cmd"===e.type&&!("version"in e)}(e)?ve.create(e):function(e){return"file"===e.type&&!("version"in e)}(e)?Se.create(e):function(e){return"audio"===e.type&&!("version"in e)}(e)?Re.create(e):function(e){return"video"===e.type&&!("version"in e)}(e)?Ie.create(e):function(e){return"custom"===e.type&&!("version"in e)}(e)?_e.create(e):function(e){return"loc"===e.type&&!("version"in e)}(e)?Te.create(e):function(e){return"channel"===e.type&&!("version"in e)}(e)?Ee.create(e):function(e){return"delivery"===e.type&&!("version"in e)}(e)?ge.create(e):function(e){return"read"===e.type&&!("version"in e)}(e)?me.create(e):{}:ye.create(e);var t},e.prototype.set=function(e){},e}(),Ne={0:"TEXT",1:"IMAGE",2:"VIDEO",3:"LOCATION",4:"VOICE",5:"FILE",6:"COMMAND",7:"CUSTOM"};function Ae(e){for(var t={},r=0;r<e.length;r++)if(8===e[r].type)t[e[r].key]=JSON.parse(e[r].stringValue);else if(7===e[r].type)t[e[r].key]=e[r].stringValue;else if(6===e[r].type)t[e[r].key]=e[r].doubleValue;else if(5===e[r].type)t[e[r].key]=e[r].floatValue;else if(1===e[r].type){var n=e[r].varintValue,o=new(E())(n.low,n.high,n.unsigned).toString();t[e[r].key]=0!==Number(o)}else 2!==e[r].type&&3!==e[r].type&&4!==e[r].type||(n=e[r].varintValue,o=new(E())(n.low,n.high,n.unsigned).toString(),t[e[r].key]=Number(o));return t}function be(e,t,r){if(this.delivery&&e!==t){var n=this.getUniqueId(),o=new Ce("delivery",n);o.set({ackId:r,to:e}),$.debug("send delivery ack"),this.send(o.body)}}var Me=function(e,t,r,n){var o,i,a,s,c,u,l,p,d=new(E())(e.timestamp.low,e.timestamp.high,e.timestamp.unsigned).toString(),h=this.root.lookup("easemob.pb.MessageBody").decode(e.payload),f=1;if(e.meta&&e.meta.length)switch(le.parseNotify(e.meta).is_online){case 0:f=0;break;case 1:f=1;break;default:f=2}else f=3;var m=new(E())(e.id.low,e.id.high,e.id.unsigned).toString(),g=h.ackMessageId?new(E())(h.ackMessageId.low,h.ackMessageId.high,h.ackMessageId.unsigned).toString():"",y="",v=h.from&&h.from.name,_=h.to&&h.to.name;switch($.debug("thirdMessage:",h),h.type){case 1:y="chat","agoraToken"===this.grantType&&(y="singleChat"),this.delivery&&be.call(this,v,_,m);break;case 2:y="groupchat","agoraToken"===this.grantType&&(y="groupChat");break;case 3:y="chatroom","agoraToken"===this.grantType&&(y="chatRoom"),f=1;break;case 4:y="read_ack";var T=void 0;return h.ext[0]&&JSON.parse(h.ext[0].stringValue)?(T={id:m,type:"read",from:v,to:_,mid:g,groupReadCount:h.ext[0]&&JSON.parse(h.ext[0].stringValue),ackContent:h.ackContent,onlineState:f},this.onReadMessage&&this.onReadMessage(T),void(null===(o=this.eventHandler)||void 0===o||o.dispatch("onReadMessage",T))):(T={id:m,type:"read",from:v,to:_,mid:g,onlineState:f},this.onReadMessage&&this.onReadMessage(T),void(null===(i=this.eventHandler)||void 0===i||i.dispatch("onReadMessage",T)));case 5:y="deliver_ack",this.onDeliveredMessage&&this.onDeliveredMessage({id:m,type:"delivery",from:v,to:_,mid:g,onlineState:f});var O={id:m,type:"delivery",from:v,to:_,mid:g,onlineState:f};return void(null===(a=this.eventHandler)||void 0===a||a.dispatch("onDeliveredMessage",O));case 6:y="recall";var R={id:m,from:v||"admin",to:_,mid:g,onlineState:f};return this.onRecallMessage&&this.onRecallMessage(R),void(null===(s=this.eventHandler)||void 0===s||s.dispatch("onRecallMessage",R));case 7:this.onChannelMessage&&this.onChannelMessage({id:m,type:"channel",chatType:"singleChat",from:v,to:_,time:Number(d),onlineState:f});var I={id:m,type:"channel",chatType:"singleChat",from:v,to:_,time:Number(d),onlineState:f};return void(null===(c=this.eventHandler)||void 0===c||c.dispatch("onChannelMessage",I));default:return void $.error("unexpected message type: ".concat(h.type))}var S,C="normal";if("chat"===y.toLowerCase()||"singleChat"===y)S="singleChat";else if("groupchat"===y.toLowerCase()||"groupChat"===y)S="groupChat";else if(S="chatRoom",f=1,e.ext){var N=Ae([e.ext]);C=0===N.chatroom_msg_tag?"high":2===N.chatroom_msg_tag?"low":"normal"}for(var A=0;A<h.contents.length;A++){var b={},M={},w=t.errorCode>0,U=t.errorCode,P=t.reason,k=h.contents[A],L={},x=[],D=[],j=null,G=null,B=void 0;if(h.ext&&(L=Ae(h.ext)),h.meta&&"string"==typeof h.meta){var H=JSON.parse(h.meta);H.reaction&&(x=H.reaction).forEach((function(e){e.isAddedBySelf=e.state,delete e.state})),H.translations&&(D=H.translations),H.thread&&"{}"!==JSON.stringify(H.thread)&&(j={messageId:H.thread.msg_parent_id,parentId:H.thread.muc_parent_id,chatThreadName:H.thread.thread_name}),H.thread_overview&&"{}"!==JSON.stringify(H.thread_overview)&&(G={id:H.thread_overview.id,parentId:H.thread_overview.muc_parent_id,name:H.thread_overview.name,lastMessage:H.thread_overview.last_message?fe(H.thread_overview.last_message):null,createTimestamp:H.thread_overview.create_timestamp,updateTimestamp:H.thread_overview.update_timestamp,messageCount:H.thread_overview.message_count||0})}switch(k.type){case 0:!(b={id:m,type:y,contentsType:Ne[k.type],from:v,to:_,data:k.text,ext:L,sourceMsg:k.text,time:d,msgConfig:h.msgConfig,onlineState:f}).msgConfig&&delete h.msgConfig,b.error=w,b.errorText=P,b.errorCode=U,!r&&this.onTextMessage&&this.onTextMessage(b);var W={id:m,type:"txt",chatType:S,msg:k.text,to:_,from:v,ext:L,time:Number(d),onlineState:f};b.msgConfig&&(W.msgConfig=b.msgConfig),x.length>0&&(W.reactions=x),j&&(W.chatThread=j),G&&(W.chatThreadOverview=G),D.length>0&&(W.translations=D),"chatRoom"===S&&(W.priority=C),M=W,!r&&this.eventHandler&&this.eventHandler.dispatch("onTextMessage",W);break;case 1:var K=(null===(u=null==k?void 0:k.size)||void 0===u?void 0:u.width)||0,V=(null===(l=null==k?void 0:k.size)||void 0===l?void 0:l.height)||0;B=this.useOwnUploadFun?k.remotePath:(k.remotePath&&this.apiUrl+k.remotePath.substr(k.remotePath.indexOf("/",9)))+"?em-redirect=true",k.secretKey&&!this.useOwnUploadFun&&(B="".concat(B,"&share-secret=").concat(k.secretKey)),!(b={id:m,type:y,contentsType:Ne[k.type],from:v,to:_,url:B,secret:k.secretKey,filename:k.displayName,thumb:this.useOwnUploadFun?"":"".concat(B,"&thumbnail=true"),thumb_secret:k.secretKey,file_length:k.fileLength||"",width:K,height:V,filetype:k.filetype||"",accessToken:this.token,ext:L,time:d,msgConfig:h.msgConfig,onlineState:f}).delay&&delete b.delay,!b.msgConfig&&delete h.msgConfig,b.error=w,b.errorText=P,b.errorCode=U,!r&&this.onPictureMessage&&this.onPictureMessage(b);var q={id:m,type:"img",chatType:S,from:v,to:_,url:B||"",file:{},width:K,height:V,secret:k.secretKey||"",thumb:this.useOwnUploadFun?"":"".concat(B,"&thumbnail=true"),thumb_secret:k.secretKey,file_length:k.fileLength||0,ext:L,time:Number(d),onlineState:f};b.msgConfig&&(q.msgConfig=b.msgConfig),x.length>0&&(q.reactions=x),j&&(q.chatThread=j),G&&(q.chatThreadOverview=G),"chatRoom"===S&&(q.priority=C),M=q,!r&&this.eventHandler&&this.eventHandler.dispatch("onImageMessage",q);break;case 2:B=this.useOwnUploadFun?k.remotePath:(k.remotePath&&this.apiUrl+k.remotePath.substr(k.remotePath.indexOf("/",9)))+"?em-redirect=true",k.secretKey&&!this.useOwnUploadFun&&(B="".concat(B,"&share-secret=").concat(k.secretKey)),!(b={id:m,type:y,contentsType:Ne[k.type],from:v,to:_,url:B,secret:k.secretKey,filename:k.displayName,length:k.duration||"",file_length:k.fileLength||"",filetype:k.filetype||"",accessToken:this.token||"",ext:L,time:d,msgConfig:h.msgConfig,onlineState:f}).delay&&delete b.delay,!b.msgConfig&&delete h.msgConfig,b.error=w,b.errorText=P,b.errorCode=U,!r&&this.onVideoMessage&&this.onVideoMessage(b);var z={id:m,type:"video",chatType:S,from:v,to:_,url:B,secret:k.secretKey,filename:k.displayName,length:k.duration||0,file:{},file_length:k.fileLength||0,filetype:k.filetype||"",accessToken:this.token||"",ext:L,time:Number(d),onlineState:f};b.msgConfig&&(z.msgConfig=b.msgConfig),x.length>0&&(z.reactions=x),j&&(z.chatThread=j),G&&(z.chatThreadOverview=G),"chatRoom"===S&&(z.priority=C),M=z,!r&&this.eventHandler&&this.eventHandler.dispatch("onVideoMessage",z);break;case 3:!(b={id:m,type:y,contentsType:Ne[k.type],from:v,to:_,addr:k.address,buildingName:k.buildingName,lat:k.latitude,lng:k.longitude,ext:L,time:d,msgConfig:h.msgConfig,onlineState:f}).delay&&delete b.delay,!b.msgConfig&&delete h.msgConfig,b.error=w,b.errorText=P,b.errorCode=U,!r&&this.onLocationMessage&&this.onLocationMessage(b);var J={id:m,type:"loc",chatType:S,from:v,to:_,buildingName:k.buildingName,addr:k.address,lat:k.latitude,lng:k.longitude,ext:L,time:Number(d),onlineState:f};b.msgConfig&&(J.msgConfig=b.msgConfig),x.length>0&&(J.reactions=x),j&&(J.chatThread=j),G&&(J.chatThreadOverview=G),"chatRoom"===S&&(J.priority=C),M=J,!r&&this.eventHandler&&this.eventHandler.dispatch("onLocationMessage",J);break;case 4:B=this.useOwnUploadFun?k.remotePath:(k.remotePath&&this.apiUrl+k.remotePath.substr(k.remotePath.indexOf("/",9)))+"?em-redirect=true",k.secretKey&&!this.useOwnUploadFun&&(B="".concat(B,"&share-secret=").concat(k.secretKey)),!(b={id:m,type:y,contentsType:Ne[k.type],from:v,to:_,url:B,secret:k.secretKey,filename:k.displayName,file_length:k.fileLength||"",accessToken:this.token||"",ext:L,length:k.duration,time:d,msgConfig:h.msgConfig,onlineState:f}).delay&&delete b.delay,!b.msgConfig&&delete h.msgConfig,b.error=w,b.errorText=P,b.errorCode=U,!r&&this.onAudioMessage&&this.onAudioMessage(b);var Y={id:m,type:"audio",chatType:S,from:v,to:_,url:B,secret:k.secretKey,file:{},filename:k.displayName,length:k.duration||0,file_length:k.fileLength||0,filetype:k.filetype||"",accessToken:this.token||"",ext:L,time:Number(d),onlineState:f};b.msgConfig&&(Y.msgConfig=b.msgConfig),x.length>0&&(Y.reactions=x),j&&(Y.chatThread=j),G&&(Y.chatThreadOverview=G),"chatRoom"===S&&(Y.priority=C),M=Y,!r&&this.eventHandler&&this.eventHandler.dispatch("onAudioMessage",Y);break;case 5:B=this.useOwnUploadFun?k.remotePath:(k.remotePath&&this.apiUrl+k.remotePath.substr(k.remotePath.indexOf("/",9)))+"?em-redirect=true",k.secretKey&&!this.useOwnUploadFun&&(B="".concat(B,"&share-secret=").concat(k.secretKey)),!(b={id:m,type:y,contentsType:Ne[k.type],from:v,to:_,url:B,secret:k.secretKey,filename:k.displayName,file_length:k.fileLength,accessToken:this.token||"",ext:L,time:d,msgConfig:h.msgConfig,onlineState:f}).delay&&delete b.delay,!b.msgConfig&&delete h.msgConfig,b.error=w,b.errorText=P,b.errorCode=U,!r&&this.onFileMessage&&this.onFileMessage(b);var X={id:m,type:"file",chatType:S,from:v,to:_,url:B,secret:k.secretKey,file:{},filename:k.displayName,length:k.duration||0,file_length:k.fileLength||0,filetype:k.filetype||"",accessToken:this.token||"",ext:L,time:Number(d),onlineState:f};b.msgConfig&&(X.msgConfig=b.msgConfig),x.length>0&&(X.reactions=x),j&&(X.chatThread=j),G&&(X.chatThreadOverview=G),"chatRoom"===S&&(X.priority=C),M=X,!r&&this.eventHandler&&this.eventHandler.dispatch("onFileMessage",X);break;case 6:if(!(b={id:m,type:y,contentsType:Ne[k.type],from:v,to:_,action:k.action,ext:L,time:d,msgConfig:h.msgConfig,onlineState:f}).msgConfig&&delete h.msgConfig,b.error=w,b.errorText=P,b.errorCode=U,"em_upload_log"===k.action)return void(null===(p=null==F?void 0:F.getInstance())||void 0===p||p.uploadLogFile());!r&&this.onCmdMessage&&this.onCmdMessage(b);var Q={id:m,type:"cmd",chatType:S,from:v,to:_,action:k.action,ext:L,time:Number(d),onlineState:f};b.msgConfig&&(Q.msgConfig=b.msgConfig),x.length>0&&(Q.reactions=x),j&&(Q.chatThread=j),G&&(Q.chatThreadOverview=G),"chatRoom"===S&&(Q.priority=C),M=Q,!r&&this.eventHandler&&this.eventHandler.dispatch("onCmdMessage",Q);break;case 7:var Z={},ee={};h.contents[0].customExts&&(Z=Ae(h.contents[0].customExts)),h.contents[0].params&&(ee=Ae(h.contents[0].params)),b={id:m,type:y,contentsType:Ne[k.type],from:v,to:_,customEvent:k.customEvent,params:ee,customExts:Z,ext:L,time:d,onlineState:f},!r&&this.onCustomMessage&&this.onCustomMessage(b);var te={id:m,type:"custom",chatType:S,from:v,to:_,customEvent:k.customEvent,params:ee,customExts:Z,ext:L,time:Number(d),onlineState:f};b.msgConfig&&(te.msgConfig=b.msgConfig),x.length>0&&(te.reactions=x),j&&(te.chatThread=j),G&&(te.chatThreadOverview=G),"chatRoom"===S&&(te.priority=C),M=te,!r&&this.eventHandler&&this.eventHandler.dispatch("onCustomMessage",te);break;default:$.error("Unknow message type, message:",k)}return n?M:b}},we=["public","members_only","allow_user_invites","invite_need_confirm"],Ue={name:"name",title:"name",description:"description",public:"public",members_only:"approval",allow_user_invites:"allowInvites",max_users:"maxUsers",invite_need_confirm:"inviteNeedConfirm",custom:"ext",last_modified:"lastModified"};function Pe(t,r){var n,o,i,a,s,c,u=this,l=this.context,p=l.userId,d=l.jid,h=r.from.name===p&&d.clientResource!==r.from.clientResource;return r.isThread?(i={id:r.mucId.name,name:r.mucName,operation:"",parentId:r.mucParentId.name,operator:r.from.name,userName:r.to.length?r.to[0].name:""},a={chatThreadId:r.mucId.name,chatThreadName:r.mucName,operation:"",parentId:r.mucParentId.name}):(o={type:"",owner:r.from.name,gid:r.mucId.name,from:r.from.name,fromJid:r.from,to:r.to.length?r.to[0].name:"",toJid:r.to,chatroom:r.isChatroom,status:r.status},s={operation:"",id:r.mucId.name,from:r.from.name},r.isChatroom&&(null===(n=null==r?void 0:r.eventInfo)||void 0===n?void 0:n.ext)&&(c=JSON.parse(r.eventInfo.ext))),({45:function(){var e,t,n;s.operation="memberAttributesUpdate";var o=JSON.parse(null===(e=null==r?void 0:r.eventInfo)||void 0===e?void 0:e.ext)||{};s.attributes=o.properties||{},s.userId=o.username||"",h?null===(t=u.eventHandler)||void 0===t||t.dispatch("onMultiDeviceEvent",s):null===(n=u.eventHandler)||void 0===n||n.dispatch("onGroupEvent",s)},44:function(){var e;s.operation="removeChatRoomAttributes",s.attributes=c.result.successKeys,c.result.successKeys.length>0&&(null===(e=u.eventHandler)||void 0===e||e.dispatch("onChatroomEvent",s))},43:function(){var e;s.operation="updateChatRoomAttributes";var t={};c.result.successKeys.forEach((function(e){t[e]=c.properties[e]})),s.attributes=t,c.result.successKeys.length>0&&(null===(e=u.eventHandler)||void 0===e||e.dispatch("onChatroomEvent",s))},42:function(){},41:function(){},40:function(){},39:function(){},38:function(){var e;a.operation="chatThreadNameUpdate",null===(e=u.eventHandler)||void 0===e||e.dispatch("onMultiDeviceEvent",a)},37:function(){var e;i.operation="userRemove",null===(e=u.eventHandler)||void 0===e||e.dispatch("onChatThreadChange",i)},36:function(){var e;a.operation="chatThreadLeave",null===(e=u.eventHandler)||void 0===e||e.dispatch("onMultiDeviceEvent",a)},35:function(){var e;a.operation="chatThreadJoin",null===(e=u.eventHandler)||void 0===e||e.dispatch("onMultiDeviceEvent",a)},34:function(){var e;a.operation="chatThreadDestroy",null===(e=u.eventHandler)||void 0===e||e.dispatch("onMultiDeviceEvent",a)},33:function(){var e;a.operation="chatThreadCreate",null===(e=u.eventHandler)||void 0===e||e.dispatch("onMultiDeviceEvent",a)},32:function(){var e,t,n,i;o.type=r.isChatroom?"rmChatRoomMute":"rmGroupMute",u.onPresence&&u.onPresence(o),r.isChatroom?null===(e=u.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(t=u.eventHandler)||void 0===t||t.dispatch("onGroupChange",o),s.operation="unmuteAllMembers",r.isChatroom?null===(n=u.eventHandler)||void 0===n||n.dispatch("onChatroomEvent",s):null===(i=u.eventHandler)||void 0===i||i.dispatch("onGroupEvent",s)},31:function(){var e,t,n,i;o.type=r.isChatroom?"muteChatRoom":"muteGroup",u.onPresence&&u.onPresence(o),r.isChatroom?null===(e=u.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(t=u.eventHandler)||void 0===t||t.dispatch("onGroupChange",o),s.operation="muteAllMembers",r.isChatroom?null===(n=u.eventHandler)||void 0===n||n.dispatch("onChatroomEvent",s):null===(i=u.eventHandler)||void 0===i||i.dispatch("onGroupEvent",s)},30:function(){var e,t,n,i;o.type=r.isChatroom?"rmUserFromChatRoomWhiteList":"rmUserFromGroupWhiteList",u.onPresence&&u.onPresence(o),r.isChatroom?null===(e=u.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(t=u.eventHandler)||void 0===t||t.dispatch("onGroupChange",o),s.operation="removeAllowlistMember",r.isChatroom?null===(n=u.eventHandler)||void 0===n||n.dispatch("onChatroomEvent",s):null===(i=u.eventHandler)||void 0===i||i.dispatch("onGroupEvent",s)},29:function(){var e,t,n,i;o.type=r.isChatroom?"addUserToChatRoomWhiteList":"addUserToGroupWhiteList",u.onPresence&&u.onPresence(o),r.isChatroom?null===(e=u.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(t=u.eventHandler)||void 0===t||t.dispatch("onGroupChange",o),s.operation="addUserToAllowlist",r.isChatroom?null===(n=u.eventHandler)||void 0===n||n.dispatch("onChatroomEvent",s):null===(i=u.eventHandler)||void 0===i||i.dispatch("onGroupEvent",s)},28:function(){var e,t,n,i;o.type="deleteFile",u.onPresence&&u.onPresence(o),r.isChatroom?null===(e=u.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(t=u.eventHandler)||void 0===t||t.dispatch("onGroupChange",o),s.operation="deleteFile",r.isChatroom?null===(n=u.eventHandler)||void 0===n||n.dispatch("onChatroomEvent",s):null===(i=u.eventHandler)||void 0===i||i.dispatch("onGroupEvent",s)},27:function(){var e,t,n,i;o.type="uploadFile",u.onPresence&&u.onPresence(o),r.isChatroom?null===(e=u.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(t=u.eventHandler)||void 0===t||t.dispatch("onGroupChange",o),s.operation="uploadFile",r.isChatroom?null===(n=u.eventHandler)||void 0===n||n.dispatch("onChatroomEvent",s):null===(i=u.eventHandler)||void 0===i||i.dispatch("onGroupEvent",s)},26:function(){var e,t,n,i;o.type="deleteAnnouncement",u.onPresence&&u.onPresence(o),r.isChatroom?null===(e=u.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(t=u.eventHandler)||void 0===t||t.dispatch("onGroupChange",o),s.operation="deleteAnnouncement",r.isChatroom?null===(n=u.eventHandler)||void 0===n||n.dispatch("onChatroomEvent",s):null===(i=u.eventHandler)||void 0===i||i.dispatch("onGroupEvent",s)},25:function(){var e,t,n,i;o.type="updateAnnouncement",u.onPresence&&u.onPresence(o),r.isChatroom?null===(e=u.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(t=u.eventHandler)||void 0===t||t.dispatch("onGroupChange",o),s.operation="updateAnnouncement",r.isChatroom?null===(n=u.eventHandler)||void 0===n||n.dispatch("onChatroomEvent",s):null===(i=u.eventHandler)||void 0===i||i.dispatch("onGroupEvent",s)},24:function(){var e,t,n,i;o.type="removeMute",u.onPresence&&u.onPresence(o),r.isChatroom?null===(e=u.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(t=u.eventHandler)||void 0===t||t.dispatch("onGroupChange",o),s.operation="unmuteMember",r.isChatroom?null===(n=u.eventHandler)||void 0===n||n.dispatch("onChatroomEvent",s):null===(i=u.eventHandler)||void 0===i||i.dispatch("onGroupEvent",s)},23:function(){var e,t,n,i;o.type="addMute",u.onPresence&&u.onPresence(o),r.isChatroom?null===(e=u.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(t=u.eventHandler)||void 0===t||t.dispatch("onGroupChange",o),s.operation="muteMember",r.isChatroom?null===(n=u.eventHandler)||void 0===n||n.dispatch("onChatroomEvent",s):null===(i=u.eventHandler)||void 0===i||i.dispatch("onGroupEvent",s)},22:function(){var e,t,n,i;o.type="removeAdmin",u.onPresence&&u.onPresence(o),r.isChatroom?null===(e=u.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(t=u.eventHandler)||void 0===t||t.dispatch("onGroupChange",o),s.operation="removeAdmin",r.isChatroom?null===(n=u.eventHandler)||void 0===n||n.dispatch("onChatroomEvent",s):null===(i=u.eventHandler)||void 0===i||i.dispatch("onGroupEvent",s)},21:function(){var e,t,n,i;o.type="addAdmin",u.onPresence&&u.onPresence(o),r.isChatroom?null===(e=u.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(t=u.eventHandler)||void 0===t||t.dispatch("onGroupChange",o),s.operation="setAdmin",r.isChatroom?null===(n=u.eventHandler)||void 0===n||n.dispatch("onChatroomEvent",s):null===(i=u.eventHandler)||void 0===i||i.dispatch("onGroupEvent",s)},20:function(){var e,t,n,i;o.type="changeOwner",u.onPresence&&u.onPresence(o),r.isChatroom?null===(e=u.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(t=u.eventHandler)||void 0===t||t.dispatch("onGroupChange",o),s.operation="changeOwner",r.isChatroom?null===(n=u.eventHandler)||void 0===n||n.dispatch("onChatroomEvent",s):null===(i=u.eventHandler)||void 0===i||i.dispatch("onGroupEvent",s)},19:function(){var e,t,n,i;o.type="direct_joined",o.groupName=r.mucName,u.onPresence&&u.onPresence(o),r.isChatroom?null===(e=u.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(t=u.eventHandler)||void 0===t||t.dispatch("onGroupChange",o),s.operation="directJoined",s.name=r.mucName,r.isChatroom?null===(n=u.eventHandler)||void 0===n||n.dispatch("onChatroomEvent",s):null===(i=u.eventHandler)||void 0===i||i.dispatch("onGroupEvent",s)},18:function(){var e,t,n,i;o.type=r.isChatroom?"leaveChatRoom":"leaveGroup",u.onPresence&&u.onPresence(o),r.isChatroom?null===(e=u.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(t=u.eventHandler)||void 0===t||t.dispatch("onGroupChange",o),s.operation="memberAbsence",r.isChatroom?null===(n=u.eventHandler)||void 0===n||n.dispatch("onChatroomEvent",s):null===(i=u.eventHandler)||void 0===i||i.dispatch("onGroupEvent",s)},17:function(){var e,t,n,i;o.type=r.isChatroom?"memberJoinChatRoomSuccess":"memberJoinPublicGroupSuccess",u.onPresence&&u.onPresence(o),r.isChatroom?null===(e=u.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(t=u.eventHandler)||void 0===t||t.dispatch("onGroupChange",o),s.operation="memberPresence",r.isChatroom?null===(n=u.eventHandler)||void 0===n||n.dispatch("onChatroomEvent",s):null===(i=u.eventHandler)||void 0===i||i.dispatch("onGroupEvent",s)},16:function(){var e,t;o.type="unblock",u.onPresence&&u.onPresence(o),r.isChatroom?null===(e=u.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(t=u.eventHandler)||void 0===t||t.dispatch("onGroupChange",o)},15:function(){var e,t;o.type="block",u.onPresence&&u.onPresence(o),r.isChatroom?null===(e=u.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(t=u.eventHandler)||void 0===t||t.dispatch("onGroupChange",o)},14:function(){var e,t,n,i,a,c=r.isChatroom;if(!c){var l=JSON.parse((null===(e=null==r?void 0:r.eventInfo)||void 0===e?void 0:e.ext)||"{}",(function(e,t){return"last_modified"===e?Number(t):we.includes(e)?"true"===t||!0===t:t}));s.detail=o.detail={},Object.keys(l).forEach((function(e){var t=Ue[e];if(t){var r=l[e];s.detail&&(s.detail[t]=r),o.detail&&(o.detail[t]=r)}}))}o.type="update",u.onPresence&&u.onPresence(o),c?null===(t=u.eventHandler)||void 0===t||t.dispatch("onChatroomChange",o):null===(n=u.eventHandler)||void 0===n||n.dispatch("onGroupChange",o),s.operation="updateInfo",c?null===(i=u.eventHandler)||void 0===i||i.dispatch("onChatroomEvent",s):null===(a=u.eventHandler)||void 0===a||a.dispatch("onGroupEvent",s)},13:function(){var e,t,n,i;o.type="allow",o.reason=r.reason,u.onPresence&&u.onPresence(o),r.isChatroom?null===(e=u.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(t=u.eventHandler)||void 0===t||t.dispatch("onGroupChange",o),s.operation="unblockMember",r.isChatroom?null===(n=u.eventHandler)||void 0===n||n.dispatch("onChatroomEvent",s):null===(i=u.eventHandler)||void 0===i||i.dispatch("onGroupEvent",s)},12:function(){var e,t;o.type="ban",u.onPresence&&u.onPresence(o),r.isChatroom?null===(e=u.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(t=u.eventHandler)||void 0===t||t.dispatch("onGroupChange",o)},11:function(){var e,t;o.type="getBlackList",u.onPresence&&u.onPresence(o),r.isChatroom?null===(e=u.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(t=u.eventHandler)||void 0===t||t.dispatch("onGroupChange",o)},10:function(){var e,t,n,i;o.type="removedFromGroup",o.kicked=o.to,u.onPresence&&u.onPresence(o),r.isChatroom?null===(e=u.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(t=u.eventHandler)||void 0===t||t.dispatch("onGroupChange",o),s.operation="removeMember",r.isChatroom?null===(n=u.eventHandler)||void 0===n||n.dispatch("onChatroomEvent",s):null===(i=u.eventHandler)||void 0===i||i.dispatch("onGroupEvent",s)},9:function(){var e,t,n,i;o.type="invite_decline",o.kicked=o.to,u.onPresence&&u.onPresence(o),r.isChatroom?null===(e=u.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(t=u.eventHandler)||void 0===t||t.dispatch("onGroupChange",o),s.operation="rejectInvite",r.isChatroom?null===(n=u.eventHandler)||void 0===n||n.dispatch("onChatroomEvent",s):null===(i=u.eventHandler)||void 0===i||i.dispatch("onGroupEvent",s)},8:function(){var e,t,n,i;o.type="invite_accept",o.kicked=o.to,u.onPresence&&u.onPresence(o),r.isChatroom?null===(e=u.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(t=u.eventHandler)||void 0===t||t.dispatch("onGroupChange",o),s.operation="acceptInvite",r.isChatroom?null===(n=u.eventHandler)||void 0===n||n.dispatch("onChatroomEvent",s):null===(i=u.eventHandler)||void 0===i||i.dispatch("onGroupEvent",s)},7:function(){var e,t,n,i;o.type="invite",o.kicked=o.to,o.groupName=r.mucName,u.onPresence&&u.onPresence(o),r.isChatroom?null===(e=u.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(t=u.eventHandler)||void 0===t||t.dispatch("onGroupChange",o),s.operation="inviteToJoin",s.name=r.mucName,r.isChatroom?null===(n=u.eventHandler)||void 0===n||n.dispatch("onChatroomEvent",s):null===(i=u.eventHandler)||void 0===i||i.dispatch("onGroupEvent",s)},6:function(){var e,t,n,i;o.type="joinPublicGroupDeclined",u.onPresence&&u.onPresence(o),r.isChatroom?null===(e=u.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(t=u.eventHandler)||void 0===t||t.dispatch("onGroupChange",o),s.operation="joinPublicGroupDeclined",r.isChatroom?null===(n=u.eventHandler)||void 0===n||n.dispatch("onChatroomEvent",s):null===(i=u.eventHandler)||void 0===i||i.dispatch("onGroupEvent",s)},5:function(){var e,t,n,i;o.type="joinPublicGroupSuccess",u.onPresence&&u.onPresence(o),r.isChatroom?null===(e=u.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(t=u.eventHandler)||void 0===t||t.dispatch("onGroupChange",o),s.operation="acceptRequest",r.isChatroom?null===(n=u.eventHandler)||void 0===n||n.dispatch("onChatroomEvent",s):null===(i=u.eventHandler)||void 0===i||i.dispatch("onGroupEvent",s)},4:function(){var e,t,n,i;o.type="joinGroupNotifications",o.reason=r.reason,u.onPresence&&u.onPresence(o),r.isChatroom?null===(e=u.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(t=u.eventHandler)||void 0===t||t.dispatch("onGroupChange",o),s.operation="requestToJoin",r.isChatroom?null===(n=u.eventHandler)||void 0===n||n.dispatch("onChatroomEvent",s):null===(i=u.eventHandler)||void 0===i||i.dispatch("onGroupEvent",s)},3:function(){var e,t;o.type="leave",u.onPresence&&u.onPresence(o),r.isChatroom?null===(e=u.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(t=u.eventHandler)||void 0===t||t.dispatch("onGroupChange",o)},2:function(){var e,t;o.type="join",u.onPresence&&u.onPresence(o),r.isChatroom?null===(e=u.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(t=u.eventHandler)||void 0===t||t.dispatch("onGroupChange",o)},1:function(){var e,t,n,i;o.type="deleteGroupChat",u.onPresence&&u.onPresence(o),r.isChatroom?null===(e=u.eventHandler)||void 0===e||e.dispatch("onChatroomChange",o):null===(t=u.eventHandler)||void 0===t||t.dispatch("onGroupChange",o),s.operation="destroy",r.isChatroom?null===(n=u.eventHandler)||void 0===n||n.dispatch("onChatroomEvent",s):null===(i=u.eventHandler)||void 0===i||i.dispatch("onGroupEvent",s)},0:function(){var e,t;s.operation="create",r.isChatroom?null===(e=u.eventHandler)||void 0===e||e.dispatch("onChatroomEvent",s):null===(t=u.eventHandler)||void 0===t||t.dispatch("onGroupEvent",s)}}[t]||function(){e("error","No match operation ".concat(t)," at SDK/4.1.7-uniapp-log.js:1")})()}var ke,Le=function(e){var t=this.root.lookup("easemob.pb.MUCBody").decode(e.payload),r=t.operation;$.debug("onMucMessage",t),Pe.call(this,r,t)};!function(e){e[e.Add=2]="Add",e[e.Remove=3]="Remove",e[e.Accept=4]="Accept",e[e.Decline=5]="Decline",e[e.Ban=6]="Ban",e[e.Allow=7]="Allow"}(ke||(ke={}));var xe={operatRoster:function(e,t,r,n){var o=[],i=this.root.lookup("easemob.pb.RosterBody"),a=i.decode(o);switch(t){case"add":a.operation=ke.Add;break;case"remove":a.operation=ke.Remove;break;case"accept":a.operation=ke.Accept;break;case"decline":a.operation=ke.Decline;break;case"ban":a.operation=ke.Ban;break;case"allow":a.operation=ke.Allow;break;default:$.error("operatRoster:",t)}a.from=this.context.jid;var s=[];if("string"==typeof e.to)s.push({appKey:this.appKey||this.context.appKey,name:e.to,domain:"easemob.com"});else if(e.to instanceof Array)for(var c=0;c<e.to.length;c++)s.push({appKey:this.appKey,name:e.to[c],domain:"easemob.com"});a.to=s,a.reason=e.message||"",a=i.encode(a).finish();var u=this.root.lookup("easemob.pb.Meta").decode(o);u.id=e.id||this.getUniqueId();var l=this.dataReport.geOperateFun({operationName:_[t]});C.size<=A&&C.set(u.id,{rpt:l,requestName:_[t],resolve:r,reject:n}),u.from=this.context.jid,u.to={domain:"@easemob.com"},u.ns=3,u.payload=a;var p=this.root.lookup("easemob.pb.CommSyncUL"),d=p.decode(o);d.meta=u,d=p.encode(d).finish();var h=this.root.lookup("easemob.pb.MSync"),f=h.decode(o);if(f.version=this.version,f.encryptType=[0],f.command=0,f.guid=this.jid,f.payload=d,f=h.encode(f).finish(),"miniCore"===this.name)this.sock.send(f);else{var m=this.mSync.base64transform(f);this.sock.send(m)}},handleRosterMsg:function(e){var t,r,n,o,i,a,s=this.root.lookup("easemob.pb.RosterBody").decode(e.payload),c={type:"",to:s.to[0].name,from:s.from.name,status:s.reason};switch(s.operation){case 2:c.type="subscribe",this.onContactInvited&&this.onContactInvited(c),null===(t=this.eventHandler)||void 0===t||t.dispatch("onContactInvited",c);break;case 3:c.type="unsubscribed",this.onContactDeleted&&this.onContactDeleted(c),null===(r=this.eventHandler)||void 0===r||r.dispatch("onContactDeleted",c);break;case 4:c.type="subscribed",this.onContactAdded&&this.onContactAdded(c),null===(n=this.eventHandler)||void 0===n||n.dispatch("onContactAdded",c);break;case 5:c.type="unsubscribed",this.onContactRefuse&&this.onContactRefuse(c),null===(o=this.eventHandler)||void 0===o||o.dispatch("onContactRefuse",c);break;case 6:case 7:break;case 8:c.type="subscribed",this.onContactAgreed&&this.onContactAgreed(c),null===(i=this.eventHandler)||void 0===i||i.dispatch("onContactAgreed",c);break;case 9:c.type="unsubscribed",this.onContactRefuse&&this.onContactRefuse(c),null===(a=this.eventHandler)||void 0===a||a.dispatch("onContactRefuse",c);break;default:$.error("handleRosterMsg:",s)}this.onPresence&&c.type&&this.onPresence(c)}},De=function(e){var t,r,n,o,i,a,s=this.root.lookup("easemob.pb.StatisticsBody").decode(e.payload);switch(s.operation){case 0:this.onStatisticMessage&&this.onStatisticMessage(s),null===(t=this.eventHandler)||void 0===t||t.dispatch("onStatisticMessage",s);break;case 1:a=y.create({type:f.WEBIM_CONNCTION_USER_REMOVED,message:"user has been removed"}),this.logOut=!0,this.onError&&this.onError(a),null===(r=this.eventHandler)||void 0===r||r.dispatch("onError",a);break;case 2:a=y.create({type:f.WEBIM_CONNCTION_USER_LOGIN_ANOTHER_DEVICE,message:"the user is already logged on another device"}),this.logOut=!0,this.onError&&this.onError(a),null===(n=this.eventHandler)||void 0===n||n.dispatch("onError",a);break;case 3:a=y.create({type:f.WEBIM_CONNCTION_USER_KICKED_BY_CHANGE_PASSWORD,message:"the user was kicked by changing password"}),this.logOut=!0,this.onError&&this.onError(a),null===(o=this.eventHandler)||void 0===o||o.dispatch("onError",a);break;case 4:a=y.create({type:f.WEBIM_CONNCTION_USER_KICKED_BY_OTHER_DEVICE,message:"the user was kicked by other device"}),this.logOut=!0,this.onError&&this.onError(a),null===(i=this.eventHandler)||void 0===i||i.dispatch("onError",a);break;default:$.error("handleStatisticsMsg:",s)}};function je(e){var t,r=[],n=[],o=e.data;o&&o.values&&o.values.forEach((function(e){Object.entries(e.status).forEach((function(e){n.push({device:e[0],status:Number(e[1])})})),r.push({userId:e.uid,lastTime:Number(e.last_time),expire:Number(e.expiry),ext:e.ext,statusDetails:n})})),this.onPresenceStatusChange&&this.onPresenceStatusChange(r),null===(t=this.eventHandler)||void 0===t||t.dispatch("onPresenceStatusChange",r)}function Ge(e){var t=this;e.data.forEach((function(e){var r,n={from:e.from,to:e.to,chatType:"chat"===e.channel_type?"singleChat":"groupChat",messageId:e.messageId,reactions:e.reactions,ts:e.ts};null===(r=t.eventHandler)||void 0===r||r.dispatch("onReactionChange",n)}))}function Be(e){var t,r,n,o;if(e.data){var i=e.data,a={id:i.id||"",name:i.name||"",parentId:i.muc_parent_id||"",messageId:i.msg_parent_id||"",timestamp:i.timestamp||0,operator:i.from||"",operation:""};switch(i.operation){case"create":a.operation="create",a.createTimestamp=a.timestamp,a.messageCount=0,null===(t=this.eventHandler)||void 0===t||t.dispatch("onChatThreadChange",a);break;case"update_msg":a.operation="update",a.messageCount=i.message_count,i.last_message&&"{}"!==JSON.stringify(i.last_message)?a.lastMessage=fe(i.last_message):"{}"===JSON.stringify(i.last_message)&&(a.lastMessage={}),null===(r=this.eventHandler)||void 0===r||r.dispatch("onChatThreadChange",a);break;case"update":a.operation="update",a.messageCount=i.message_count,null===(n=this.eventHandler)||void 0===n||n.dispatch("onChatThreadChange",a);break;case"delete":a.operation="destroy",null===(o=this.eventHandler)||void 0===o||o.dispatch("onChatThreadChange",a)}}}function He(e){var t,r=e.data;if(r.resource!==this.clientResource){var n={operation:"deleteRoaming",conversationId:r.to,chatType:"chat"===r.chatType?"singleChat":"groupChat",resource:r.resource};null===(t=this.eventHandler)||void 0===t||t.dispatch("onMultiDeviceEvent",n)}}function Fe(e){var t,r=e.data,n={operation:"del"===r.op?"deleteConversation":"top"===r.op?"pinnedConversation":"unpinnedConversation",conversationId:r.id,conversationType:"chat"===r.type?"singleChat":"groupChat",timestamp:r.ts};this.clientResource!==r.res&&(null===(t=this.eventHandler)||void 0===t||t.dispatch("onMultiDeviceEvent",n))}var We=function(e){var t=le.parseNotify(e.payload);switch(t.type){case"presence":je.call(this,t);break;case"reaction":Ge.call(this,t);break;case"thread":Be.call(this,t);break;case"roaming_delete":He.call(this,t);break;case"conv":Fe.call(this,t);break;default:$.error("unexpected notify type: ".concat(t.type))}},Ke=function(){return Ke=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ke.apply(this,arguments)},Ve=le.getEnvInfo();function qe(){var e="webim",t="",r="",n=[],o=(new Date).valueOf();"webim"===this.deviceId?(r="random_"+o.toString(),e=this.deviceId+"_"+r,t=this.deviceId):e=t=r="webim_"+this.deviceId,this.context.jid&&(this.context.jid.clientResource=e);var i=this.root.lookup("easemob.pb.Provision"),a=i.decode(n);a.compressType=this.compressType,a.encryptType=this.encryptType,a.osType=this.osType,a.version=this.version,a.deviceName=t,a.resource=e,a.deviceUuid=r,a.auth="$t$"+this.token,a.actionVersion="v2.0",a=i.encode(a).finish();var s=this.root.lookup("easemob.pb.MSync"),c=s.decode(n);return c.version=this.version,c.guid=this.context.jid,c.auth="$t$"+this.token,c.command=3,c.deviceId=t,c.serviceId=this.dataReport.getServiceId(),c.encryptType=this.encryptType,c.payload=a,s.encode(c).finish()}function ze(e,t){var r=this,n=le.getEnvInfo();if("web"===n.platform||"zfb"===n.platform||"dd"===n.platform){for(var o="",i=0;i<e.length;i++)o+=String.fromCharCode(e[i]);return o=de().btoa(o),"web"===n.platform?o:{data:o,isBuffer:!1,complete:function(){},fail:function(e){"sendSocketMessage:fail taskID not exist"!==e.errMsg&&"SocketTast.send:fail SocketTask.readyState is not OPEN"!==e.errMsg||($.debug("send message fail and reconnect"),r.reconnecting||r.reconnect()),t&&r._msgHash&&r._msgHash[t]&&r._msgHash[t].fail({id:t})}}}var a=e;return{data:a.buffer.slice(a.byteOffset,a.byteOffset+a.byteLength),fail:function(e){"sendSocketMessage:fail taskID not exist"!==e.errMsg&&"SocketTast.send:fail SocketTask.readyState is not OPEN"!==e.errMsg||r.reconnecting||r.reconnect(),t&&r._msgHash&&r._msgHash[t]&&r._msgHash[t].fail({id:t})}}}function Je(e,t){switch(e.ns){case 0:De.call(this,e);break;case 1:Me.call(this,e,t);break;case 2:Le.call(this,e);break;case 3:xe.handleRosterMsg.call(this,e);break;case 4:this.registerConfrIQHandler&&this.registerConfrIQHandler(e,t,this);break;case 5:We.call(this,e);break;default:$.error("distributeMeta",e)}}function $e(e,t){for(var r=function(r){var o=new(E())(e[r].id.low,e[r].id.high,e[r].id.unsigned).toString();if(n._load_msg_cache.some((function(e){return e.msgId===o})))return"continue";var i=e[r].from.name,a=e[r].to?e[r].to.name:"",s=!!e[r].to&&-1!==e[r].to.domain.indexOf("conference");n._load_msg_cache.length<=n.max_cache_length||n._load_msg_cache.shift(),n._load_msg_cache.push({msgId:o,from:i,to:a,isGroup:s}),Je.call(n,e[r],t)},n=this,o=0;o<e.length;o++)r(o)}function Ye(e){var t=this.root.lookup("easemob.pb.CommUnreadDL");if(t=t.decode(e.payload),"agoraToken"===this.grantType){var r=new(E())(t.timestamp.low,t.timestamp.high,t.timestamp.unsigned).toString();this.compareTokenExpireTime(Number(r),this.expirationTime)}if(0===t.unread.length)it.call(this);else for(var n=0;n<t.unread.length;n++)Ze.call(this,t.unread[n].queue)}function Xe(){var e=[],t=this.root.lookup("easemob.pb.StatisticsBody"),r=t.decode(e);r.operation=0,r=t.encode(r).finish();var n=this.root.lookup("easemob.pb.Meta").decode(e);n.id=(new Date).valueOf(),n.ns=0,n.payload=r;var o=this.root.lookup("easemob.pb.CommSyncUL"),i=o.decode(e);i.meta=n,i=o.encode(i).finish();var a=this.root.lookup("easemob.pb.MSync"),s=a.decode(e);return s.version=this.version,s.encryptType=[0],s.command=0,s.payload=i,a.encode(s).finish()}function Qe(e){var t=[],r=this.root.lookup("easemob.pb.CommSyncUL"),n=r.decode(t);n.queue=e,n=r.encode(n).finish();var o=this.root.lookup("easemob.pb.MSync"),i=o.decode(t);return i.version=this.version,i.encryptType=this.encryptType,i.command=0,i.payload=n,o.encode(i).finish()}function Ze(e){$.debug("sendBackqueue");var t=Qe.call(this,e);Ot.call(this,t)}function et(e,t){var r=[],n=this.root.lookup("easemob.pb.CommSyncUL"),o=n.decode(r);o.queue=t,o.key=new(E())(e.low,e.high,e.unsigned).toString(),o=n.encode(o).finish();var i=this.root.lookup("easemob.pb.MSync"),a=i.decode(r);return a.version=this.version,a.encryptType=this.encryptType,a.command=0,a.payload=o,i.encode(a).finish()}function rt(e,t){$.debug("sendLastSession");var r=et.call(this,e,t);Ot.call(this,r)}function nt(e){var t,r,n,o,i,a,s=this.root.lookup("easemob.pb.Provision").decode(e.payload);if(this.context.jid&&(this.context.jid.clientResource=s.resource),this.clientResource=s.resource,0===s.status.errorCode){if(this.reconnecting=!1,this.logOut=!1,"zfb"!==Ve.platform&&"dd"!==Ve.platform||(this.sock.readyState=1),this.onOpened&&this.onOpened(),null===(t=this.eventHandler)||void 0===t||t.dispatch("onConnected"),"agoraToken"===this.grantType){var c=Date.now();this.expiresIn=this.expirationTime-c,this.tokenExpireTimeCountDown(this.expiresIn)}ot.call(this),st.call(this),at.call(this),it.call(this)}else{var u=void 0,l=s.status.reason;switch(l){case"Sorry, the app day live count limit":u=y.create({type:f.MAX_LIMIT,message:"Sorry, the daily active user limit for this app has been reached"}),null===(r=this.eventHandler)||void 0===r||r.dispatch("onError",u);break;case"Sorry, the app online count limit":u=y.create({type:f.MAX_LIMIT,message:"Sorry, the maximum number limit of online users for this app has been reached"}),null===(n=this.eventHandler)||void 0===n||n.dispatch("onError",u);break;case"Sorry, the app month live count limit":u=y.create({type:f.MAX_LIMIT,message:"Sorry, the monthly active user limit for this app has been reached"}),null===(o=this.eventHandler)||void 0===o||o.dispatch("onError",u);break;case"Sorry, who are you?":u=y.create({type:f.WEBIM_CONNCTION_AUTH_ERROR,message:"Auth failed"}),null===(i=this.eventHandler)||void 0===i||i.dispatch("onError",u);break;default:u=y.create({type:f.SERVER_UNKNOWN_ERROR,message:l}),null===(a=this.eventHandler)||void 0===a||a.dispatch("onError",u)}}}function ot(){var e,t;if((null===(e=this.unMSyncSendMsgMap)||void 0===e?void 0:e.size)>0){for(var r=Array.from(this.unMSyncSendMsgMap.keys()),n=0;n<r.length;n++){var o=this.unMSyncSendMsgMap.get(r[n]);Ot.call(this,o,r[n])}null===(t=this.unMSyncSendMsgMap)||void 0===t||t.clear()}}function it(){var e=Xe.call(this);Ot.call(this,e)}function at(){var e=ut.call(this);Ot.call(this,e)}function st(){var e=this;ct.call(this),this.heartBeatID=setInterval((function(){at.call(e)}),this.heartBeatWait)}function ct(){clearInterval(this.heartBeatID)}function ut(){var e=this.root.lookup("easemob.pb.MSync"),t=e.decode([]);return t.version=this.version,t.encryptType=this.encryptType,t.command=1,e.encode(t).finish()}function lt(e,t){return e.some((function(e){return e.name===t.name}))}function pt(e){var t=this,r=this.root.lookup("easemob.pb.CommNotice"),n=r.decode(e.payload),o=lt(this._queues,n.queue);$.debug("receive notice",r,this._queues),o||this.clientResource===n.queue.clientResource&&n.queue.name===this.context.userId||(this.qTimer&&clearTimeout(this.qTimer),this.qTimer=setTimeout((function(){var e=n.queue;lt(t._queues,e)&&(Ze.call(t,e),$.debug("\u2b07q:",e))}),1e4),this._queues.push(n.queue),1===this._queues.length&&Ze.call(this,n.queue))}function dt(e){if("string"==typeof e){var t=JSON.parse(e);if(Array.isArray(t)){var r=t[0],n=t[1];this.closeInfo={code:r,reason:n}}}}function ht(e){return t=this,void 0,n=function(){var t,r,n,o,i,a,s,c;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(u){if(t=le.getEnvInfo(),r=this.root.lookup("easemob.pb.MSync"),"miniCore"===this.name){try{e.data instanceof ArrayBuffer||($.debug("received message: ".concat(e.data)),dt.call(this,e.data)),o=new Uint8Array(e.data),n=r.decode(o)}catch(e){throw new Error("decode message fail.")}return[2,n]}if("web"===t.platform||"zfb"===t.platform||"dd"===t.platform){for('[401,"normal closed"]'===e.data&&($.debug("received message: ".concat(e.data)),dt.call(this,e.data)),i=de().atob(e.data),a=[],s=0,c=i.length;s<c;++s)a.push(i.charCodeAt(s));return[2,r.decode(a)]}try{e.data instanceof ArrayBuffer||($.debug("received message: ".concat(e.data)),dt.call(this,e.data)),n=r.decode(e.data)}catch(e){throw new Error("decode message fail.")}return[2,n]}))},new((r=void 0)||(r=Promise))((function(e,o){function i(e){try{s(n.next(e))}catch(e){o(e)}}function a(e){try{s(n.throw(e))}catch(e){o(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(i,a)}s((n=n.apply(t,[])).next())}));var t,r,n}function ft(e){var t=this;e.then((function(e){if(e)switch(e.command){case 0:mt.call(t,e);break;case 1:Ye.call(t,e);break;case 2:pt.call(t,e);break;case 3:nt.call(t,e);break;default:$.error("unexpected msync command: ".concat(e.command))}else $.error("unexpected msync result: ".concat(e))}))}function mt(e){var t,r,n,o,i,a,s,c,u,l,p,d,h,m,g,v,_,T=this.root.lookup("easemob.pb.CommSyncDL");T=T.decode(e.payload);var O=new(E())(T.serverId.low,T.serverId.high,T.serverId.unsigned).toString(),I=new(E())(T.metaId.low,T.metaId.high,T.metaId.unsigned).toString();if(0!==T.metas.length)try{$e.call(this,T.metas,T.status)}catch(e){var S=y.create({type:f.WEBIM_LOAD_MSG_ERROR,message:"decode message error",data:e});this.onError&&this.onError(S),null===(t=this.eventHandler)||void 0===t||t.dispatch("onError",S)}finally{if(T.isLast){var A=-1;this._queues.some((function(e,t){return e.name===T.name&&(A=t,!0)}))&&A>0&&this._queues.splice(A,1),this._queues.length>0&&(Ze.call(this,this._queues[0]),this.qTimer&&clearTimeout(this.qTimer))}else rt.call(this,T.nextKey,T.queue)}else if(T.isLast){var b=-1;this._queues.some((function(e,t){return e.name===T.queue.name&&(b=t,!0)}))&&this._queues.splice(b,1),this._queues.length>0&&(Ze.call(this,this._queues[0]),this.qTimer&&clearTimeout(this.qTimer))}else if(T.status&&0===T.status.errorCode){if(this._queues.some((function(e,t){var r;return e.name===(null===(r=T.queue)||void 0===r?void 0:r.name)&&!0})),D=C.get(I)){var M=D.rpt,w=D.requestName,U=D.resolve;M({isEndApi:!0,data:{isSuccess:1,requestName:w,requestMethod:"WEBSOCKET",requestUrl:this.url,code:R.success}}),U(),C.delete(I)}var P=this._msgHash[I];if(null==P?void 0:P.isHandleChatroom){try{var k="join"===(null===(r=this._msgHash[I])||void 0===r?void 0:r.operation);(null===(n=this._msgHash[I])||void 0===n?void 0:n.resolve)instanceof Function&&k&&this._msgHash[I].resolve({type:0,data:{action:"apply",id:this._msgHash[I].roomId,result:!0,user:this.context.userId}}),(null===(o=this._msgHash[I])||void 0===o?void 0:o.success)instanceof Function&&k&&this._msgHash[I].success({type:0,data:{action:"apply",id:this._msgHash[I].roomId,result:!0,user:this.context.userId}}),(null===(i=this._msgHash[I])||void 0===i?void 0:i.resolve)instanceof Function&&!k&&this._msgHash[I].resolve({type:0,data:{result:!0}}),(null===(a=this._msgHash[I])||void 0===a?void 0:a.success)instanceof Function&&!k&&this._msgHash[I].success({type:0,data:{result:!0}})}catch(e){S=y.create({type:f.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,message:"when executing success function error",data:e}),this.onError&&this.onError(S),null===(s=this.eventHandler)||void 0===s||s.dispatch("onError",S)}delete this._msgHash[I]}if(P&&!P.isHandleChatroom){N.has(I)&&(N.get(I).rpt({isEndApi:!0,data:{isSuccess:1,requestMethod:"WEBSOCKET",requestUrl:this.url,code:R.success,msgId:O}}),N.delete(I));try{(null===(c=this._msgHash[I])||void 0===c?void 0:c.resolve)instanceof Function&&this._msgHash[I].resolve({localMsgId:I,serverMsgId:O}),(null===(u=this._msgHash[I])||void 0===u?void 0:u.success)instanceof Function&&this._msgHash[I].success(I,O)}catch(e){S=y.create({type:f.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,message:"when executing success function error",data:e}),this.onError&&this.onError(S),null===(l=this.eventHandler)||void 0===l||l.dispatch("onError",S)}this.onReceivedMessage&&this.onReceivedMessage({id:I,mid:O,to:this._msgHash[I].to,time:0}),null===(p=this.eventHandler)||void 0===p||p.dispatch("onReceivedMessage",{id:I,mid:O,to:this._msgHash[I].to}),delete this._msgHash[I]}}else if(T.status&&15===T.status.errorCode)(null===(d=this._msgHash[I])||void 0===d?void 0:d.fail)instanceof Function&&this._msgHash[I].fail({type:f.SERVICE_NOT_ALLOW_MESSAGING_MUTE,reason:"you were muted"}),this._msgHash[I].reject instanceof Function&&this._msgHash[I].reject({type:f.SERVICE_NOT_ALLOW_MESSAGING_MUTE,reason:"you were muted"});else if(T.status&&1===T.status.errorCode){var L=void 0;switch(T.status.reason){case"blocked":L=f.PERMISSION_DENIED;break;case"group not found":L=f.GROUP_NOT_EXIST;break;case"not in group or chatroom":L=f.GROUP_NOT_JOINED;break;case"exceed recall time limit":L=f.MESSAGE_RECALL_TIME_LIMIT;break;case"message recall disabled":L=f.SERVICE_NOT_ENABLED;break;case"not in group or chatroom white list":L=f.SERVICE_NOT_ALLOW_MESSAGING;break;case"nonroster":L=f.USER_NOT_FRIEND,T.status.reason="not contact";break;case"group is disabled":L=f.GROUP_IS_DISABLED,T.status.reason="group is disabled";break;case"limit directed users":L=f.MAX_LIMIT;break;default:T.status.reason.includes("grpID")&&T.status.reason.includes("does not exist!")?(L=f.CHATROOM_NOT_EXIST,T.status.reason="The chat room dose not exist."):T.status.reason.includes("username")&&T.status.reason.includes("doesn't exist!")?L=f.USER_NOT_FOUND:"group member list is full!"===T.status.reason?L=f.CHATROOM_MEMBERS_FULL:T.status.reason.includes("can not join this group")&&T.status.reason.includes("is in the blacklist")?(L=f.PERMISSION_DENIED,T.status.reason="permission denied"):L="can not operate this group, reason: group is disabled"===T.status.reason?f.GROUP_IS_DISABLED:T.status.reason.includes("moderation")?f.MESSAGE_MODERATION_BLOCKED:f.SERVER_UNKNOWN_ERROR}if(this._msgHash[I]){if(null===(h=this._msgHash[I])||void 0===h?void 0:h.isHandleChatroom){var x=y.create({type:L,message:T.status.reason||"",data:""});this._msgHash[I].reject instanceof Function&&this._msgHash[I].reject(x),this._msgHash[I].error instanceof Function&&this._msgHash[I].error(x)}else x=y.create({type:L,message:T.status.reason||"",data:{id:I,mid:O}}),this._msgHash[I].reject instanceof Function&&this._msgHash[I].reject(x),this._msgHash[I].fail instanceof Function&&this._msgHash[I].fail({type:L,reason:T.status.reason?T.status.reason:"",data:{id:I,mid:O}});delete this._msgHash[I]}}else if(T.status&&7===T.status.errorCode)"sensitive words"===T.status.reason&&this._msgHash[I]?(x=y.create({type:f.MESSAGE_INCLUDE_ILLEGAL_CONTENT,message:"sensitive words",data:{id:I,mid:O}}),this._msgHash[I].reject instanceof Function&&this._msgHash[I].reject(x),this._msgHash[I].fail instanceof Function&&this._msgHash[I].fail({type:f.MESSAGE_INCLUDE_ILLEGAL_CONTENT,data:{id:I,mid:O,reason:"sensitive words"}})):"blocked by mod_antispam"===T.status.reason&&this._msgHash[I]?(x=y.create({type:f.MESSAGE_INCLUDE_ILLEGAL_CONTENT,message:"blocked by mod_antispam",data:{id:I,mid:O}}),this._msgHash[I].reject instanceof Function&&this._msgHash[I].reject(x),this._msgHash[I].fail instanceof Function&&this._msgHash[I].fail({type:f.MESSAGE_INCLUDE_ILLEGAL_CONTENT,data:{id:I,mid:O,reason:"blocked by mod_antispam"}})):"user is mute"===T.status.reason&&this._msgHash[I]?(x=y.create({type:f.USER_MUTED_BY_ADMIN,message:"user is mute",data:{id:I,mid:O}}),this._msgHash[I].reject instanceof Function&&this._msgHash[I].reject(x),this._msgHash[I].fail instanceof Function&&this._msgHash[I].fail(x)):"traffic limit"===T.status.reason&&this._msgHash[I]?(x=y.create({type:f.MESSAGE_CURRENT_LIMITING,message:"traffic limit",data:{id:I,mid:O}}),this._msgHash[I].reject instanceof Function&&this._msgHash[I].reject(x),this._msgHash[I].fail instanceof Function&&this._msgHash[I].fail(x)):"Sorry, data is too large"===T.status.reason&&this._msgHash[I]&&(x=y.create({type:f.MESSAGE_SIZE_LIMIT,message:"Sorry, data is too large",data:{id:I,mid:O}}),this._msgHash[I].reject instanceof Function&&this._msgHash[I].reject(x),this._msgHash[I].fail instanceof Function&&this._msgHash[I].fail(x));else if(T.status&&19===T.status.errorCode)this._msgHash[I]&&(N.has(I)&&(N.get(I).rpt({isEndApi:!0,data:{isSuccess:0,requestMethod:"WEBSOCKET",requestUrl:this.url,code:f.MESSAGE_EXTERNAL_LOGIC_BLOCKED,codeDesc:T.status.reason||"",msgId:O}}),N.delete(I)),x=y.create({type:f.MESSAGE_EXTERNAL_LOGIC_BLOCKED,message:T.status.reason||"",data:{id:I,mid:O}}),this._msgHash[I].reject instanceof Function&&this._msgHash[I].reject(x),this._msgHash[I].fail instanceof Function&&this._msgHash[I].fail({type:f.MESSAGE_EXTERNAL_LOGIC_BLOCKED,data:{id:I,mid:O,reason:T.status.reason}}));else if(this._msgHash[I]){N.has(I)&&(N.get(I).rpt({isEndApi:!0,data:{isSuccess:0,requestMethod:"WEBSOCKET",requestUrl:this.url,code:f.WEBIM_LOAD_MSG_ERROR,codeDesc:(null===(m=T.status)||void 0===m?void 0:m.reason)||"",msgId:O}}),N.delete(I));try{x=y.create({type:f.WEBIM_LOAD_MSG_ERROR,message:(null===(g=T.status)||void 0===g?void 0:g.reason)||"",data:{id:I,mid:O,reason:T.status&&T.status.reason}}),this._msgHash[I].reject instanceof Function&&this._msgHash[I].reject(x),this._msgHash[I].fail instanceof Function&&this._msgHash[I].fail({type:f.WEBIM_LOAD_MSG_ERROR,data:{errorCode:T.status&&T.status.errorCode,reason:T.status&&T.status.reason}})}catch(e){S=y.create({type:f.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,message:"when executing fail function error",data:e}),this.onError&&this.onError(S),null===(v=this.eventHandler)||void 0===v||v.dispatch("onError",S)}delete this._msgHash[I]}else{var D;N.has(I)&&(N.get(I).rpt({isEndApi:!0,data:{isSuccess:0,requestMethod:"WEBSOCKET",requestUrl:this.url,code:f.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,codeDesc:"on message error",msgId:O}}),N.delete(I)),(D=C.get(I))&&((M=D.rpt)({isEndApi:!0,data:{isSuccess:0,requestName:w=D.requestName,requestMethod:"WEBSOCKET",requestUrl:this.url,code:R.failed,codeDesc:"on message error"}}),C.delete(I)),S=y.create({type:f.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,message:"on message error"}),this.onError&&this.onError(S),null===(_=this.eventHandler)||void 0===_||_.dispatch("onError",S)}}function gt(e){var t=[],r=this.root.lookup("easemob.pb.KeyValue"),n=[];for(var o in e){var i=r.decode(t);i.key=o,"object"==c(e[o])?(i.type=8,i.stringValue=JSON.stringify(e[o])):"string"==typeof e[o]?(i.type=7,i.stringValue=e[o]):"boolean"==typeof e[o]?(i.type=1,i.varintValue=!0===e[o]?1:0):Number.isInteger(e[o])?(i.type=2,i.varintValue=e[o]):(i.type=6,i.doubleValue=e[o]),n.push(i)}return n}function Et(e){var t,r,n,o=[];if(this.root){var i,a=this.root.lookup("easemob.pb.MessageBody.Content").decode(o);switch(i=!e.group&&"groupchat"!==(null===(t=null==e?void 0:e.chatType)||void 0===t?void 0:t.toLowerCase())||e.roomType?e.group&&e.roomType||"chatroom"===(null===(r=null==e?void 0:e.chatType)||void 0===r?void 0:r.toLowerCase())?"chatRoom":"singleChat":"groupChat",e.type){case"txt":a.type=0,a.text=e.msg;break;case"img":a.type=1,e.body?(a.displayName=e.body.filename,a.remotePath=e.body.url,a.secretKey=e.body.secret,a.fileLength=e.body.file_length,a.size=e.body.size,a.thumbnailDisplayName=e.body.filename):e.file?(a.displayName=e.file.filename,a.remotePath=e.file.url,a.secretKey=e.file.secret,a.fileLength=e.file.file_length,a.size=e.file.size,a.thumbnailDisplayName=e.file.filename):(a.displayName=e.filename,a.remotePath=e.url,a.secretKey=e.secret,a.fileLength=e.file_length,a.size=e.size,a.thumbnailDisplayName=e.filename);break;case"video":a.type=2,a.displayName=e.body.filename,a.remotePath=e.body.url,a.secretKey=e.body.secret,a.fileLength=e.body.file_length,a.duration=e.body.length,a.thumbnailDisplayName=e.body.filename;break;case"loc":a.type=3,a.latitude=e.lat,a.longitude=e.lng,a.address=e.addr,a.buildingName=e.buildingName,a.latitude=e.lat;break;case"audio":a.type=4,a.displayName=e.body.filename,a.remotePath=e.body.url,a.secretKey=e.body.secret,a.fileLength=e.body.file_length,a.duration=e.body.length,a.thumbnailDisplayName=e.body.filename;break;case"file":a.type=5,a.displayName=e.body.filename,a.remotePath=e.body.url,a.secretKey=e.body.secret,a.fileLength=e.body.file_length,a.size=e.body.size,a.thumbnailDisplayName=e.body.filename;break;case"cmd":a.type=6,a.action=e.action;break;case"custom":a.type=7,a.customEvent=e.customEvent,a.customExts=gt.call(this,e.customExts)}var s=[];e.ext&&(s=gt.call(this,e.ext));var c=this.root.lookup("easemob.pb.MessageBody"),u=c.decode(o);u.from={name:this.context.jid.name},u.to={name:e.to},"channel"===e.type?u.type=7:"recall"===e.type?(u.type=6,u.ackMessageId=e.ackId):"delivery"===e.type?(u.type=5,u.ackMessageId=e.ackId):"read"===e.type?(u.type=4,u.ackMessageId=e.ackId,"groupChat"===i&&(u.msgConfig={allowGroupAck:!0},u.ackContent=e.ackContent)):"chatRoom"===i?u.type=3:"groupChat"===i?(u.type=2,e.msgConfig&&(u.msgConfig={allowGroupAck:!0})):"singleChat"===i&&(u.type=1),u.contents=[a],u.ext=s;var l=function(e){var t={};return"translations"in e&&(t.translations=e.translations),"isChatThread"in e&&e.isChatThread&&(t.thread={}),Object.keys(t).length>0?JSON.stringify(t):""}(e);l&&(u.meta=l),u=c.encode(u).finish();var p=this.root.lookup("easemob.pb.Meta").decode(o);p.id=e.id;var d="easemob.com";"chatRoom"!==i&&"groupChat"!==i||(d="conference.easemob.com"),p.to={appKey:this.appKey,name:e.to,domain:d},"chatRoom"===i&&(p.ext=gt.call(this,function(e){return{chatroom_msg_tag:"high"===e.priority?0:"low"===e.priority?2:1}}(e))[0]),p.ns=1,p.payload=u,p.routetype=e.deliverOnlineOnly?1:0,"singleChat"!==i&&Array.isArray(e.receiverList)&&(null===(n=e.receiverList)||void 0===n?void 0:n.length)>0&&(p.directedUsers=e.receiverList,p.routetype=2,$.debug("receiverList:",e.receiverList,"thirdMessage",p));var h=this.root.lookup("easemob.pb.CommSyncUL"),m=h.decode(o);m.meta=p,m=h.encode(m).finish();var g=this.root.lookup("easemob.pb.MSync"),E=g.decode(o);return E.version=this.version,E.encryptType=this.encryptType,E.command=0,E.payload=m,g.encode(E).finish()}e.fail&&e.fail({type:f.WEBIM_CONNCTION_CLIENT_OFFLINE,message:"Not logged in"})}function yt(e){var t=this,r=Ke({},e);if(e.file)return r.accessToken=this.token,r.appKey=this.appKey,r.apiUrl=this.apiUrl,r.body&&r.body.url?Et.call(this,r):new Promise((function(n,o){var i=r.onFileUploadComplete;r.onFileUploadComplete=function(n){var o,a;if(n.entities[0]["file-metadata"]){var s=n.entities[0]["file-metadata"]["content-length"];r.file_length=s,r.filetype=n.entities[0]["file-metadata"]["content-type"],s>204800&&(r.thumbnail=!0)}r.body={type:r.type||"file",secret:n.entities[0]["share-secret"],filename:r.file.filename||r.filename,url:(t.isHttpDNS?t.apiUrl+n.uri.substr(n.uri.indexOf("/",9)):n.uri)+"/"+n.entities[0].uuid,length:r.length||0,filetype:r.filetype||r.file.filetype,file_length:(null===(a=null===(o=r.file)||void 0===o?void 0:o.data)||void 0===a?void 0:a.size)||0,size:{width:r.width||0,height:r.height||0}},r.file.url=n.uri,e.secret=n.entities[0]["share-secret"];var c=(t.isHttpDNS?t.apiUrl+n.uri.substr(n.uri.indexOf("/",9)):n.uri)+"/"+n.entities[0].uuid;e.url=c,n.url=c,"img"===r.type&&(e.thumb="".concat(c,"?thumbnail=true"),n.thumb="".concat(c,"?thumbnail=true")),i instanceof Function&&i(n,r.id);var u=Et.call(t,r);N.size<=A&&N.set(r.id,{rpt:t.dataReport.geOperateFun({operationName:_.SEND_MSG})}),Ot.call(t,u)},le.uploadFile.call(t,r,_.UPLOAD_MSG_ATTACH)}));"img"===e.type&&(r.body||(r.body=Ke(Ke({},r),{size:{width:r.width||0,height:r.height||0}})));var n=Et.call(this,r);Ot.call(this,n)}function vt(e,t,r){var n=[],o=this.root.lookup("easemob.pb.MUCBody"),i=o.decode(n);i.mucId={appKey:this.appKey,name:e,domain:"conference.easemob.com"},i.operation="join"===r?2:3,i.from={name:this.context.userId},i.isChatroom=!0,i=o.encode(i).finish();var a=this.root.lookup("easemob.pb.Meta").decode(n);a.id=t,a.from={appKey:this.appKey,name:this.context.userId,domain:"easemob.com",client_resource:this.context.jid.clientResource},a.to={domain:"easemob.com"},a.ns=2,a.payload=i;var s=this.root.lookup("easemob.pb.CommSyncUL"),c=s.decode(n);c.meta=a,c=s.encode(c).finish();var u=this.root.lookup("easemob.pb.MSync"),l=u.decode(n);return l.version=this.version,l.encryptType=this.encryptType,l.command=0,l.payload=c,u.encode(l).finish()}function _t(e,t){var r=le.getUniqueId(),n=vt.call(this,e.roomId,r,t);return Ot.call(this,Ke(Ke({},e),{isHandleChatroom:!0,joinMsg:n,id:r,operation:t}),r)}function Tt(e){var t=this;return new Promise((function(r,n){var o,i;if($.debug("send message params",e),t.logOut)return n({type:f.WEBIM_CONNECTION_CLOSED,message:"not login"});if(!e.id||"string"!=typeof e.id||""===e.id)return n({type:f.MESSAGE_PARAMETER_ERROR,message:'Missing required parameter: "id"'});if(!e.to||"string"!=typeof e.to||""===e.to)return n({type:f.MESSAGE_PARAMETER_ERROR,message:'Missing required parameter: "to"'});var a="file"===e.type||"img"===e.type||"audio"===e.type||"video"===e.type,s="delivery"===e.type||"read"===e.type||"channel"===e.type;if(e.id&&((!a&&!s||a&&t.useOwnUploadFun)&&N.size<=A&&N.set(e.id,{rpt:t.dataReport.geOperateFun({operationName:"recall"===e.type?_.SEND_RECALL_MSG:_.SEND_MSG})}),t._msgHash[e.id]=Ke(Ke({},e),{resolve:r,reject:n})),a)return yt.call(t,e);if("txt"===e.type&&(null===(o=e.msgConfig)||void 0===o?void 0:o.languages)&&Array.isArray(null===(i=e.msgConfig)||void 0===i?void 0:i.languages)&&e.msgConfig.languages.length>0){var c=t.translateMessage||t.translation.translateMessage;if(!c)throw new Error("there is no method to translate message");c({text:e.msg,languages:e.msgConfig.languages}).then((function(r){var n,o=null===(n=r.data[0])||void 0===n?void 0:n.translations;o=o.map((function(e){return{code:e.to,text:e.text}})),e.translations=o;var i=Et.call(t,e);Ot.call(t,i,e.id)})).catch((function(e){n(e)}))}else{var u=Et.call(t,e);Ot.call(t,u,e.id)}})).catch((function(e){throw $.debug("send message error",e),e}))}function Ot(e,t){var r,n,o=this;if(e.isHandleChatroom){if(!this.isOpened()){var i={data:"",type:f.WEBIM_CONNCTION_DISCONNECTED,message:"websocket has been disconnected"};return Promise.reject(i)}return new Promise((function(r,n){var i;o._msgHash[e.id]=Ke(Ke({},e),{resolve:r,reject:n}),i="miniCore"===o.name?e.joinMsg:ze.call(o,e.joinMsg,t),o.sock.send(i)}))}if(!this.isOpened())return null===(r=this.unMSyncSendMsgMap)||void 0===r||r.set(t,e),!this.logOut&&this.autoReconnectNumTotal<this.autoReconnectNumMax&&(this.autoReconnectNumTotal<=this.socketHost.length&&this.isHttpDNS||!this.isHttpDNS)&&($.debug("need to reconnect",this.autoReconnectNumTotal,this.autoReconnectNumMax),this.offLineSendConnecting=!0,this.reconnecting||this.reconnect()),void(this.onError&&this.onError({type:f.WEBIM_CONNCTION_DISCONNECTED,message:"websocket has been disconnected"}));n="miniCore"===this.name?e:ze.call(this,e,t),this.sock.send(n)}var Rt=function(e,t){return e.send=Tt,e.sendMsg=Tt,$.debug("init Msync by ".concat(e.name)),{generateProvision:qe.bind(e),base64transform:ze.bind(e),distributeMeta:Je.bind(e),decodeMeta:$e.bind(e),decodeUnreadDL:Ye.bind(e),_rebuild:Xe.bind(e),_lastsession:et.bind(e),receiveProvision:nt.bind(e),isInQueue:lt.bind(e),decodeNotice:pt.bind(e),decodeMSync:ht.bind(e),distributeMSync:ft.bind(e),encodeChatMsg:Et.bind(e),upLoadFile:yt.bind(e),send:Tt.bind(e),stopHeartBeat:ct.bind(e),handleChatRoom:_t.bind(e)}},It=function(){function e(e,t,r){this.handlerData={},this.handlerData={},e.addEventHandler=this.addEventHandler.bind(this),e.removeEventHandler=this.removeEventHandler.bind(this)}return e.prototype.addEventHandler=function(e,t){this.handlerData[e]=t},e.prototype.removeEventHandler=function(e){delete this.handlerData[e]},e.prototype.dispatch=function(e,t){for(var r in $.debug("dispatch event: "+e,t||""),this.handlerData){var n=this.handlerData[r][e];n&&n(t)}},e}(),St=function(){};function Ct(e){this.onOpened=e.onOpened||St,this.onPresence=e.onPresence||St,this.onTextMessage=e.onTextMessage||St,this.onPictureMessage=e.onPictureMessage||St,this.onAudioMessage=e.onAudioMessage||St,this.onVideoMessage=e.onVideoMessage||St,this.onFileMessage=e.onFileMessage||St,this.onLocationMessage=e.onLocationMessage||St,this.onCmdMessage=e.onCmdMessage||St,this.onCustomMessage=e.onCustomMessage||St,this.onReceivedMessage=e.onReceivedMessage||St,this.onDeliveredMessage=e.onDeliveredMessage||St,this.onReadMessage=e.onReadMessage||St,this.onRecallMessage=e.onRecallMessage||St,this.onChannelMessage=e.onChannelMessage||St,this.onError=e.onError||St,this.onOffline=e.onOffline||St,this.onOnline=e.onOnline||St,this.onStatisticMessage=e.onStatisticMessage||St,this.onContactInvited=e.onContactInvited||St,this.onContactAgreed=e.onContactAgreed||St,this.onContactRefuse=e.onContactRefuse||St,this.onContactDeleted=e.onContactDeleted||St,this.onContactAdded=e.onContactAdded||St,this.onTokenWillExpire=e.onTokenWillExpire||St,this.onTokenExpired=e.onTokenExpired||St,this.onClosed=e.onClosed||St,this.onPresenceStatusChange=e.onPresenceStatusChange||St}var Nt={biz:"",debug:!1,token:""},At="https://data-reporting.agora.io/report",bt="https://data-reporting.sh.agoralab.co/report",Mt=function(e){var t=Number(v[e]);return t===v.USER_LOGIN?"MANUALLOGIN":t===v.MSYNC_SENDMESSAGE?"SENDMESSAGE":t>v.UNKNOWOPERATION&&t<v.REST_OPERATE?"REST":t>v.REST_OPERATE&&t<v.MSYNC_OPERATE?"MESSAGE":t>v.MSYNC_OPERATE&&t<v.ROSTER_OPERATE?"ROSTER":t>v.ROSTER_OPERATE&&t<v.USER_OPERATE?"USER":t>v.USER_OPERATE&&t<v.GROUP_OPERATE?"GROUP":t>v.GROUP_OPERATE&&t<v.CHATROOM_OPERATE?"CHATROOM":"OPERATION"},wt=function(){return(new Date).getTime()},Ut=function(e){return[ne.BAIDU,ne.WX,ne.DD,ne.ZFB,ne.TT,ne.QUICK_APP,ne.UNI].includes(e.platform)},Pt=function(){return e=1,t=99999,e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e;var e,t},kt={},Lt=function(){function t(e){this.eventQueue=[],this.stock=1e3,this.config=e,this.governor()}return t.prototype.add=function(t){this.stock<=0?e("warn","Event Report limit ".concat(1e3," per minute")," at SDK/4.1.7-uniapp-log.js:1"):(this.eventQueue.push(t),this.consume(),this.stock-=1)},t.prototype.consume=function(){var e=this;0!==this.eventQueue.length&&(this.timer&&this.eventQueue.length<=10&&clearTimeout(this.timer),this.timer=setTimeout((function(){var t,r=e.eventQueue.splice(0,10),n=r.filter((function(e){return e.appId===r[0].appId})),o=r.filter((function(e){return e.appId!==r[0].appId}));(t=e.eventQueue).unshift.apply(t,o),e.batchSend(n)}),1e3))},t.prototype.governor=function(){var e=this,t=setInterval((function(){e.stock=1e3}),6e4);"undefined"!=typeof addEventListener&&addEventListener("beforeunload",(function(){clearInterval(t)}))},t.prototype.batchSend=function(t){var r,n;if(void 0===t&&(t=[]),0!==t.length)try{var o=t.map((function(e){e.biz,e.appId;var t=e.eventId,r=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(e,["biz","appId","eventId"]);return{eventId:Number(t),body:r}}));!function(t,r){try{var n=r.biz,o=r.appId,i=r.data,a=r.debug,s=r.onSuccess;if(!n)throw new Error("biz is not defined");kt.global||(kt=le.getEnvInfo());var c=kt;if(Ut(c)){var u={url:a?bt:At,data:i,method:"POST",success:function(){null==s||s()},fail:function(){},complete:function(){}},l={token:t,appid:null!=o?o:"",sendts:"".concat(Math.floor((new Date).getTime()/1e3)),biz:n,debug:"".concat(a)};if("zfb"===c.platform||"dd"===c.platform?u.headers=l:u.header=l,"dd"===c.platform)return c.global.httpRequest(u);c.global.request(u)}else{var p=new XMLHttpRequest;p.onreadystatechange=function(){2===p.readyState&&(null==s||s())},p.open("POST",a?bt:At),p.setRequestHeader("Content-Type","application/json"),p.setRequestHeader("token",t),p.setRequestHeader("appid",null!=o?o:""),p.setRequestHeader("sendts","".concat(Math.floor((new Date).getTime()/1e3))),p.setRequestHeader("biz",n),p.setRequestHeader("debug","".concat(a)),p.send(JSON.stringify(i))}}catch(t){e("error",t," at SDK/4.1.7-uniapp-log.js:1")}}(this.config.token,{biz:null===(r=t[0])||void 0===r?void 0:r.biz,appId:null===(n=t[0])||void 0===n?void 0:n.appId,data:o,debug:this.config.debug,onSuccess:this.consume.bind(this)})}catch(t){e("error",t," at SDK/4.1.7-uniapp-log.js:1")}},t}(),xt=function(){return xt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},xt.apply(this,arguments)},Dt=new(function(){function t(e){this.inited=!1,this.appId="",this.biz="",this.eventQueue={},this.config=Nt,e&&this.init(e)}return t.prototype.init=function(t){var r;if(void 0===t&&(t={}),!t.biz||!t.token)throw new Error("Event Report: biz or token is not defined");try{this.appId=null!==(r=t.appId)&&void 0!==r?r:"",this.biz=t.biz,this.config=xt(xt({},Nt),t),this.eventQueue=new Lt(this.config),this.log(t),this.inited=!0}catch(t){e("error",t," at SDK/4.1.7-uniapp-log.js:1")}},t.prototype.send=function(t,r,n){var o;if(void 0===r&&(r={}),this.inited){var i=xt(xt({},r),{eventId:Number(t),biz:this.biz,appId:null!==(o=null==n?void 0:n.appId)&&void 0!==o?o:this.appId});this.eventQueue.add(i),this.log(i)}else e("error","Event Report: init is not called"," at SDK/4.1.7-uniapp-log.js:1")},t.prototype.log=function(t){try{if(this.config.debug){var r=t.payload,n=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(t,["payload"]);e("log","%c Event Report: ".concat(this.config.biz," "),"background: #8A97FC; color: #fff"," at SDK/4.1.7-uniapp-log.js:1"),console.table(n),r&&(e("info","payload:"," at SDK/4.1.7-uniapp-log.js:1"),console.table(r))}}catch(t){e("error",t," at SDK/4.1.7-uniapp-log.js:1")}},t}()),jt=function(){return jt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},jt.apply(this,arguments)},Gt={requestName:"",subrequestid:"1",requestMethod:"GET",requestUrl:"",requestElapse:0,code:0,codeDesc:"",isLastApi:0,isSuccess:1},Bt=function(){function t(e){this.platform=le.getEnvInfo(),this.isReportDt=e.isReport||!1,this.isCollectDt=!0,Ut(this.platform)&&!this.isReportDt&&(this.isCollectDt=!1),this.eventQueue=[],this.accessChannel="direct",this.options=function(e,t){t.platform||(t=le.getEnvInfo());var r=e.org,n=e.appkey,o=e.deviceId,i=e.sdkVersion,a=(null===navigator||void 0===navigator?void 0:navigator.userAgent)||"".concat(t.platform,"_mini_program");return{org:r,appkey:n,deviceId:o,sdkServiceId:"sid_".concat(le.getUniqueId(),"_").concat(Pt()),did:a,sdkVersion:i,os:7,sdkProduct:I.web}}(e,this.platform),this.sid=this.options.sdkServiceId,this.init(e)}return t.getInstance=function(){return t.instance},t.prototype.getServiceId=function(){return this.sid||"sid_0"},t.prototype.setIsReportDt=function(e){this.isReportDt=e,e&&this.rptEventQueue()},t.prototype.setIsCollectDt=function(e){this.isCollectDt=e,e||(this.eventQueue=[])},t.prototype.rptEventQueue=function(){var e=this;this.eventQueue.length&&this.eventQueue.forEach((function(t,r){Dt.send(t.eventId,t.dt),r>=e.eventQueue.length-1&&(e.eventQueue=[])}))},t.prototype.init=function(e){t.instance||(t.instance=this,Dt.init({biz:"im",token:"32f24ab2ddb74f508aa9286c356cec84",appId:e.appkey,debug:!1}),this.reportInit())},t.prototype.reportInit=function(){if(this.isCollectDt){var e=this.options,t=e.did,r=e.os,n=e.sdkVersion,o=e.deviceId;this.reportData(9674,{did:t,os:r,sdkVersion:n,deviceId:o})}},t.prototype.geOperateFun=function(e){var t=this;if(!this.isCollectDt)return function(){};var r=1,n=0,o="",i=wt(),a=e.uid,s=e.operationName;a&&(this.uid=a);var c={uid:this.uid,operationId:"opr_".concat(le.getUniqueId(),"_").concat(Pt()),requestid:"req_".concat(le.getUniqueId(),"_").concat(Pt()),operationName:s};return function(e){var a,u,l,p;if(e.data.isSuccess?(n=0,o=""):(0===e.data.code&&(e.data.code=-1),n=null!==(a=e.data.code)&&void 0!==a?a:n,o=null!==(u=e.data.codeDesc)&&void 0!==u?u:o),(null===(l=e.data)||void 0===l?void 0:l.accessChannel)&&(t.accessChannel=null===(p=e.data)||void 0===p?void 0:p.accessChannel),e.isRetry?(r++,e.data.subrequestid="".concat(r)):(c.requestid="req_".concat(le.getUniqueId(),"_").concat(Pt()),r=1),e.data.isLastApi){var d=wt();e.data.requestElapse=d-i,e.data.requestMethod="",e.data.subrequestid="0",e.data.code=200===n?0:n,e.data.codeDesc=o}else e.data.requestName||(e.data.requestName=s);e.data.requestElapse||(e.data.requestElapse=wt()-i),t.reportData.call(t,b,jt(jt(jt(jt({},Gt),c),e.data),{accessChannel:t.accessChannel,operationType:Mt(s)})),e.isEndApi&&t.reportData.call(t,b,jt(jt(jt({},c),Gt),{isSuccess:e.data.isSuccess,isLastApi:1,subrequestid:"0",requestMethod:"",code:200===n?0:n,codeDesc:o,requestElapse:e.data.requestElapse,accessChannel:t.accessChannel,operationType:Mt(s)}))}},t.prototype.reportData=function(t,r){return n=this,void 0,i=function(){var n,o,i,a,s,c,u,l;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(p){switch(p.label){case 0:return p.trys.push([0,3,,4]),n=wt(),o=0,t!==b?[3,2]:[4,(d=this.platform,new Promise((function(e){var t;d.platform||(d=le.getEnvInfo());var r="";if(d.platform===ne.WEB){var n=navigator.connection;(null==n?void 0:n.type)?(null==n||n.type,r=O.WIFI):(null==n?void 0:n.effectiveType)&&(r=O[n.effectiveType.toLocaleUpperCase()]),e(r)}else d.platform===ne.NODE?(r=O.UNKNOWN,e(r)):null===(t=d.global)||void 0===t||t.getNetworkType({success:function(t){r=O[t.networkType.toLocaleUpperCase()],e(r)}})})))];case 1:o=p.sent(),p.label=2;case 2:return i=this.options,a=i.appkey,s=i.sdkServiceId,c=i.sdkProduct,u=jt({lts:n,net:o,appkey:a,sdkServiceId:s,sdkProduct:c},r),this.isReportDt?Dt.send(t,u):this.isCollectDt&&this.eventQueue.push({eventId:t,dt:u}),[3,4];case 3:return l=p.sent(),e("warn",l," at SDK/4.1.7-uniapp-log.js:1"),[3,4];case 4:return[2]}var d}))},new((o=void 0)||(o=Promise))((function(e,t){function r(e){try{s(i.next(e))}catch(e){t(e)}}function a(e){try{s(i.throw(e))}catch(e){t(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(r,a)}s((i=i.apply(n,[])).next())}));var n,o,i},t}(),Ht=Bt;function Ft(){var e=this.context.appName,t=this.context.orgName;return!(!e||!t)||(this.onError&&this.onError({type:f.WEBIM_CONNCTION_AUTH_ERROR,message:"appName or orgName is illegal"}),!1)}function Wt(){var e;if(!this.context.accessToken){var t=y.create({type:f.WEBIM_CONNCTION_TOKEN_NOT_ASSIGN_ERROR,message:"token not assign error"});return this.onError&&this.onError(t),null===(e=this.eventHandler)||void 0===e||e.dispatch("onError",t),!1}return!0}function Kt(){return Wt.call(this)&&Ft.call(this)}function Vt(e){var t=e.data,r=e.type;return{data:{status:Object.keys(t.errorKeys).length>0?"fail":"success",errorKeys:t.errorKeys,successKeys:t.successKeys},type:r}}function qt(e){var t=e.data,r=void 0;return Object.keys(t.errorKeys).length>0&&Object.keys(t.errorKeys).forEach((function(e){var n=t.errorKeys[e];r=n.includes("is not part of you")?y.create({type:f.NO_PERMISSION,message:n}):n.includes("size of metadata for this single chatroom exceeds the user defined limit")||n.includes("total size of chatroom metadata for this app exceeds the user defined limit")||n.includes("is exceeding maximum limit")?y.create({type:f.MAX_LIMIT,message:n}):n.includes("is not Legal")?y.create({type:f.REQUEST_PARAMETER_ERROR,message:n}):n.includes("Failed to update userMetadata. Concurrent updates not allowed")?y.create({type:f.OPERATION_NOT_ALLOWED,message:n}):y.create({type:f.WEBIM_CONNCTION_AJAX_ERROR,message:n})})),r}var zt=function(){return zt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},zt.apply(this,arguments)},Jt=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},$t=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function Yt(e){if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a={url:this.apiUrl+"/"+n+"/"+o+"/users/"+this.user+"/blocks/users",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+i},success:function(t){var r={};t.data.forEach((function(e){r[e]={name:e}})),"function"==typeof(null==e?void 0:e.success)&&e.success(t)},error:function(t){"function"==typeof(null==e?void 0:e.error)&&e.error(t)}};return $.debug("Call getBlocklist"),Q.call(this,a,_.GET_BLACK_LIST)}var Xt=Yt,Qt=Zt;function Zt(e){var t=this;if(!Kt.call(this)){var r=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(r)}var n=this.context,o=n.orgName,i=n.appName,a=n.accessToken,s={url:this.apiUrl+"/"+o+"/"+i+"/users/"+this.user+"/contacts/users",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+a},success:function(r){var n=[];r.data.forEach((function(e){n.push({name:e,subscription:"both",jid:t.context.jid})})),"function"==typeof(null==e?void 0:e.success)&&e.success(n)},error:function(t){"function"==typeof(null==e?void 0:e.error)&&e.error(t)}};return $.debug("Call getContacts"),Q.call(this,s,_.GET_CONTACTS)}function er(e){if("string"!=typeof e.deviceId||""===e.deviceId)throw Error('Invalid parameter: "deviceId"');if("string"!=typeof e.deviceToken||""===e.deviceToken)throw Error('Invalid parameter: "deviceToken"');if("string"!=typeof e.notifierName||""===e.notifierName)throw Error('Invalid parameter: "notifierName"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/users/").concat(this.user),type:"PUT",data:JSON.stringify({device_id:e.deviceId,device_token:e.deviceToken,notifier_name:e.notifierName}),dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call uploadPushToken",e),Q.call(this,a,_.UPLOAD_PUSH_TOKEN)}var tr=er;function rr(e){if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/users/").concat(this.user,"/user_channels"),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e&&(null==e?void 0:e.success),error:e&&(null==e?void 0:e.error)};return $.debug("Call getSessionList"),Q.call(this,a,_.GET_SESSION_LIST)}function nr(e){if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=!!(e&&"number"==typeof e.pageNum&&"number"==typeof e.pageSize&&e.pageNum>0&&e.pageSize>0),s={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/users/").concat(this.user,"/user_channels").concat(a?"/page":""),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e&&(null==e?void 0:e.success),error:e&&(null==e?void 0:e.error)};return a&&(s.data={pageNum:e.pageNum,pageSize:e.pageSize}),$.debug("Call getConversationlist"),Q.call(this,s,_.GET_SESSION_LIST).then((function(e){return function(e){var t=e.data.channel_infos;return null==t||t.forEach((function(e){e.meta&&"{}"!==JSON.stringify(e.meta)?(e.meta.payload=JSON.parse(e.meta.payload),e.lastMessage=fe(e.meta)):e.lastMessage=e.meta,delete e.meta})),e}(e)}))}function or(e){if(e&&"string"!=typeof e.channel)throw Error("Invalid parameter channel: ".concat(e.channel));if(e&&"singleChat"!==e.chatType&&"groupChat"!==e.chatType)throw Error("Invalid parameter chatType: ".concat(e.chatType));if(e&&"boolean"!=typeof e.deleteRoam)throw Error("Invalid parameter deleteRoam: ".concat(e.deleteRoam));if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r,n=this.context,o=n.orgName,i=n.appName,a=n.accessToken,s=n.jid;r="singleChat"===e.chatType?"chat":"groupChat";var c={url:"".concat(this.apiUrl,"/").concat(o,"/").concat(i,"/user/").concat(this.user,"/user_channel?resource=").concat(s.clientResource),dataType:"json",type:"DELETE",data:JSON.stringify({channel:e.channel,type:r,delete_roam:e.deleteRoam}),headers:{Authorization:"Bearer "+a,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call deleteSession",e),Q.call(this,c,_.DELETE_SESSION)}var ir=or;function ar(e,t){if(!Kt.call(this)){var r=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(r)}var o=this.context,i=o.orgName,a=o.appName,s=o.accessToken,c=["nickname","avatarurl","mail","phone","gender","sign","birth","ext"],u={};if("undefined"!=typeof n||"undefined"!=typeof qq)if("string"==typeof e&&void 0!==t){if(!c.includes(e))throw new Error("illegal key, only these keys: nickname, avatarurl, mail, phone, gender, sign, birth, ext are allowed");u[e]=t}else{if("[object Object]"!==Object.prototype.toString.call(e))throw new Error("illegal params");c.forEach((function(t){c.includes(t)&&void 0!==e[t]&&(u[t]=e[t])}))}else if("string"==typeof e){if(!c.includes(e))throw new Error("illegal key, only these keys: nickname, avatarurl, mail, phone, gender, sign, birth, ext are allowed");u=e+"="+t}else{if("[object Object]"!==Object.prototype.toString.call(e))throw new Error("illegal params");var l=[];c.forEach((function(t){if(c.includes(t)&&void 0!==e[t]){var r=encodeURIComponent(t),n=encodeURIComponent(e[t]);l.push(r+"="+n)}})),u=l.join("&")}var p={url:"".concat(this.apiUrl,"/").concat(i,"/").concat(a,"/metadata/user/").concat(this.user),type:"PUT",data:u,dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/x-www-form-urlencoded"}};return $.debug("Call updateOwnUserInfo",e),Q.call(this,p,_.UPDATE_USER_INFO)}var sr=ar;function cr(e,t){if(!Kt.call(this)){var r=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(r)}var n,o=this.context,i=o.orgName,a=o.appName,s=o.accessToken,c=[];if("string"==typeof e)c=[e];else{if("[object Array]"!==Object.prototype.toString.call(e))throw new Error("illegal params");c=e}n="string"==typeof t?[t]:t&&"[object Array]"===Object.prototype.toString.call(t)?t:["nickname","avatarurl","mail","phone","gender","sign","birth","ext"];var u={url:"".concat(this.apiUrl,"/").concat(i,"/").concat(a,"/metadata/user/get"),type:"POST",data:JSON.stringify({targets:c,properties:n}),dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"}};return $.debug("Call fetchUserInfoById",e),Q.call(this,u,_.GET_USER_INFO)}function ur(e){if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/users/").concat(this.user),type:"PUT",dataType:"json",data:JSON.stringify({nickname:e}),headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}};return $.debug("Call updateCurrentUserNick",e),Q.call(this,a)}function lr(e){if("string"!=typeof e||""===e)throw Error('Invalid parameter: "agoraToken"');var t=this.context,r=t.orgName,n=t.appName,o={url:this.apiUrl+"/"+r+"/"+n+"/token",dataType:"json",type:"POST",data:JSON.stringify({grant_type:"agora"}),headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}};return $.debug("Call getChatToken",e),Q.call(this,o,_.SDK_INTERNAL)}function pr(e){var t=this;return new Promise((function(r,n){if(!e.queue)throw Error('Invalid parameter: "specified"');if(!Kt.call(t)){var o=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(o)}(function e(t){var o=this,i=t.count||20;dr.call(this,{count:i,isGroup:!!t.isGroup,queue:t.queue,start:t.start,format:t.format,success:function(n){if(n.msgs.length>=i||n.is_last){var a=n.msgs.splice(0,i).reverse();t.success&&t.success(a),r(a)}else e.call(o,zt(zt({},t),{start:null}))},fail:function(e){n(e),t.fail&&t.fail(e)}})}).call(t,e),$.debug("Call fetchHistoryMessages",e)}))}function dr(e){var t=this,r=e.queue,n=this.mr_cache[r]||(this.mr_cache[r]={msgs:[]}),o=this.context.userId,i=e.start||-1,a=e.count||20;if(n.msgs.length>=a||n.is_last)"function"==typeof e.success&&e.success(n);else{n&&n.next_key&&(i=n.next_key),e.start&&(i=e.start);var s={queue:r+(e.isGroup?"@conference.easemob.com":"@easemob.com"),start:i,end:-1},c=this.context,u=c.orgName,l=c.appName,p={url:"".concat(this.apiUrl,"/").concat(u,"/").concat(l,"/users/").concat(o,"/messageroaming"),dataType:"json",type:"POST",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"},data:JSON.stringify(s),success:function(r){var o=null==r?void 0:r.data;if(!r.data.msgs)return"function"==typeof e.success&&e.success(n),n.is_last=!0,void(n.next_key="");var i=o.msgs,a=i.length;n.is_last=o.is_last,n.next_key=o.next_key;for(var s=function(r){for(var n=[],o=0,i=(r=de().atob(r)).length;o<i;++o)n.push(r.charCodeAt(o));var a=t.context.root.lookup("easemob.pb.Meta");if(1===(a=a.decode(n)).ns)return Me.call(t,a,{errorCode:0,reason:""},!0,e.format)},c=0;c<a;c++){var u=s(i[c].msg);u&&n.msgs.push(u)}"function"==typeof e.success&&e.success(n)},error:function(e){if(e.error&&e.error_description){var r=y.create({type:f.WEBIM_CONNCTION_AJAX_ERROR,message:"fetch history messages error",data:e});t.onError&&t.onError(r)}}};Q.call(this,p,_.GET_HISTORY_MSG).catch((function(t){"function"==typeof e.fail&&e.fail(t)}))}}function hr(e){var t=this;return new Promise((function(r,n){var o=e.targetId,i=e.cursor,a=void 0===i?-1:i,s=e.pageSize,c=void 0===s?20:s,u=e.chatType,l=e.searchDirection,p=e.searchOptions,d=void 0===p?{}:p,h=d.msgTypes,m=void 0===h?[]:h,g=d.startTime,E=void 0===g?null:g,v=d.endTime,_=void 0===v?null:v,T=d.from,O=void 0===T?null:T;if("string"!=typeof o||""===o)throw Error('"Invalid parameter": "targetId"');if(O&&"string"!=typeof O)throw Error('"Invalid parameter": "searchOptions.from"');if(m&&!Array.isArray(m))throw Error('"Invalid parameter": "searchOptions.msgTypes"');if(E&&"number"!=typeof E)throw Error('"Invalid parameter": "searchOptions.startTime"');if(_&&"number"!=typeof E)throw Error('"Invalid parameter": "searchOptions.endTime"');if(!Kt.call(t)){var R=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return n(R)}var I=t.context,S=I.orgName,C=I.appName,N=I.userId,A="groupChat"===e.chatType?"@conference.easemob.com":"@easemob.com",b={queue:"".concat(o).concat(A),start:a,pull_number:c,is_positive:"down"===l,msgType:m.join(",")||"",end:-1,startTime:E,endTime:_,userId:"singleChat"===u?null:O},M={url:"".concat(t.apiUrl,"/").concat(S,"/").concat(C,"/users/").concat(N,"/messageroaming"),dataType:"json",type:"POST",headers:{Authorization:"Bearer "+t.token,"Content-Type":"application/json"},data:JSON.stringify(b),success:function(n){for(var o,i=null==n?void 0:n.data,a=i.msgs||[],s=function(e){for(var r=[],n=0,o=(e=de().atob(e)).length;n<o;++n)r.push(e.charCodeAt(n));var i=t.context.root.lookup("easemob.pb.Meta");if(1===(i=i.decode(r)).ns)return Me.call(t,i,{errorCode:0,reason:""},!0,!0)},c=[],u=0;u<a.length;u++){var l=s(a[u].msg);l&&c.push(l)}i.msgs=c;var p={cursor:i.next_key,messages:c,isLast:i.is_last};null===(o=e.success)||void 0===o||o.call(e,p),r(p)},error:e.fail};Q.call(t,M).catch((function(e){n(e)})),$.debug("Call getHistoryMessages",e)}))}function fr(e,t){var r=this;return new Promise((function(n,o){var i={id:r.getUniqueId(),to:e,message:t};xe.operatRoster.call(r,i,"add",n,o),$.debug("Call addContact",i)}))}var mr=gr;function gr(e){var t=this;return new Promise((function(r,n){var o={id:t.getUniqueId(),to:e};xe.operatRoster.call(t,o,"remove",r,n),$.debug("Call deleteContact",o)}))}function Er(e){var t=this;return new Promise((function(r,n){var o={id:t.getUniqueId(),to:e};xe.operatRoster.call(t,o,"accept",r,n),$.debug("Call acceptInvitation",o)}))}var yr=Er;function vr(e){var t=this;return new Promise((function(r,n){var o={id:t.getUniqueId(),to:e};xe.operatRoster.call(t,o,"decline",r,n),$.debug("Call declineContactInvite",o)}))}var _r=vr;function Tr(e){var t=this;return new Promise((function(r,n){xe.operatRoster.call(t,{to:e.name},"ban",r,n),$.debug("Call addUsersToBlocklist",e)}))}var Or=Tr,Rr=Tr;function Ir(e){var t=this;return new Promise((function(r,n){xe.operatRoster.call(t,{to:e.name},"allow",r,n),$.debug("Call removeUserFromBlocklist",e)}))}var Sr=Ir,Cr=Ir;function Nr(e){var t=this.getUniqueId(),r={id:t,to:e.to};this._msgHash[t]=zt({},r);var n="";void 0!==e.chatType?n=e.chatType:void 0!==e.type&&(n="chat"===e.type?"singleChat":e.type);var o={id:t,type:"recall",chatType:n,ackId:e.mid,to:e.to,isChatThread:e.isChatThread||!1,success:e.success,fail:e.fail};return $.debug("Call recallMessage",e),this.mSync.send(o,this)}function Ar(e){return Jt(this,void 0,void 0,(function(){var t,r,n,o,i,a,s,c,u;return $t(this,(function(l){switch(l.label){case 0:if("string"!=typeof e.messageId||!e.messageId)throw Error("Invalid parameter messageId: ".concat(e.messageId));if("string"!=typeof e.reaction||!e.reaction)throw Error("Invalid parameter reaction: ".concat(e.reaction));return Kt.call(this)?(r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=e.reaction,s=e.messageId,c={msgId:s,message:a},u={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/reaction/user/").concat(this.user),type:"POST",data:JSON.stringify(c),dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}},[4,Q.call(this,u)]):(t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)]);case 1:return l.sent(),[2]}}))}))}function br(e){return Jt(this,void 0,void 0,(function(){var t,r,n,o,i,a,s,c;return $t(this,(function(u){switch(u.label){case 0:if("string"!=typeof e.reaction||!e.reaction)throw Error("Invalid parameter reactionId: ".concat(e.reaction));return Kt.call(this)?(r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=e.messageId,s=e.reaction,c={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/reaction/user/").concat(this.user,"?msgId=").concat(a,"&message=").concat(s),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}},[4,Q.call(this,c)]):(t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)]);case 1:return u.sent(),[2]}}))}))}function Mr(e){if("string"!=typeof e.chatType||!e.chatType)throw Error("Invalid parameter chatType: ".concat(e.chatType));if(!e.messageId)throw Error("Invalid parameter messageId: ".concat(e.messageId));if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=e.chatType,s=e.messageId,c={msgIdList:"string"==typeof s?[s]:s,msgType:"singleChat"===a?"chat":"groupchat",groupId:e.groupId||null},u={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/reaction/user/").concat(this.user),type:"GET",data:c,dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}};return Q.call(this,u).then((function(e){var t=e.data;return null==t||t.forEach((function(e){null==e||e.reactionList.forEach((function(e){e.isAddedBySelf=e.state,delete e.state,delete e.reactionId}))})),e}))}var wr=Mr;function Ur(e){if("string"!=typeof e.reaction||!e.reaction)throw Error("Invalid parameter reaction: ".concat(e.reaction));if("string"!=typeof e.messageId||!e.messageId)throw Error("Invalid parameter messageId: ".concat(e.messageId));if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=e.cursor,s=e.pageSize,c={msgId:e.messageId,message:e.reaction,currentPage:a||null,pageSize:s||20},u={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/reaction/user/").concat(this.user,"/detail"),type:"GET",data:c,dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}};return Q.call(this,u).then((function(e){return e.data.isAddedBySelf=e.data.state,delete e.data.state,delete e.data.reactionId,e}))}function Pr(e){return Jt(this,void 0,void 0,(function(){var t,r,n,o,i,a,s,c,u,l,p;return $t(this,(function(d){switch(d.label){case 0:if("string"!=typeof e.reportType||!e.reportType)throw Error("Invalid parameter reportType: ".concat(e.reportType));if("string"!=typeof e.messageId||!e.messageId)throw Error("Invalid parameter messageId: ".concat(e.messageId));if("string"!=typeof e.reportReason||!e.reportReason)throw Error("Invalid parameter messageId: ".concat(e.reportReason));return Kt.call(this)?(r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=e.reportType,s=e.reportReason,c=e.messageId,u={username:this.user,reportType:a,reportReason:s},l="".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/user/").concat(this.user,"/moderation/report/message/").concat(c),p={url:l,type:"POST",data:JSON.stringify(u),dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}},[4,Q.call(this,p)]):(t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)]);case 1:return d.sent(),[2]}}))}))}function kr(e){var t;return Jt(this,void 0,void 0,(function(){var r,n,o,i,a,s,c,u,l;return $t(this,(function(p){switch(p.label){case 0:if("string"!=typeof e.targetId||""===e.targetId)throw Error('"Invalid parameter targetId": '+e.targetId);if(!["singleChat","groupChat"].includes(e.chatType))throw Error('"Invalid parameter chatType": '+e.chatType);if(e.beforeTimeStamp&&("number"!=typeof e.beforeTimeStamp||e.beforeTimeStamp<0||(null===(t=e.beforeTimeStamp)||void 0===t?void 0:t.toString().length)>18))throw Error('"Invalid parameter beforeTimeStamp": '+e.beforeTimeStamp);if(e.messageIds&&!(Array.isArray(e.messageIds)&&e.messageIds.length>0&&e.messageIds.length<=20))throw Error('"Invalid parameter messageIds": '+e.messageIds);if(!e.messageIds&&!e.beforeTimeStamp)throw Error("messageIds or beforeTimeStamp field is required.");return Kt.call(this)?(n=this.context,o=n.orgName,i=n.appName,a=n.userId,s="singleChat"===e.chatType?"userId":"groupId",c="singleChat"===e.chatType?"chat":"group",u=e.messageIds?"".concat(this.apiUrl,"/").concat(o,"/").concat(i,"/sdk/message/roaming/").concat(c,"/user/").concat(a,"?").concat(s,"=").concat(e.targetId,"&msgIdList=").concat(e.messageIds,"&resource=").concat(this.clientResource):"".concat(this.apiUrl,"/").concat(o,"/").concat(i,"/sdk/message/roaming/").concat(c,"/user/").concat(a,"/time?").concat(s,"=").concat(e.targetId,"&delTime=").concat(e.beforeTimeStamp,"&&resource=").concat(this.clientResource),l={url:u,dataType:"json",type:"DELETE",headers:{Authorization:"Bearer "+this.token,"Content-Type":"application/json"}},$.debug("Call removeHistoryMessages",e),[4,Q.call(this,l)]):(r=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(r)]);case 1:return p.sent(),[2]}}))}))}function Lr(e){if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}if(e.pageSize&&"number"!=typeof e.pageSize)throw Error("Invalid parameter pageSize: ".concat(e.pageSize));if(e.cursor&&"string"!=typeof e.cursor)throw Error("Invalid parameter cursor: ".concat(e.cursor));var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/sdk/user/").concat(this.user,"/user_channels/list?"),type:"GET",dataType:"json",data:{limit:(null==e?void 0:e.pageSize)||20,cursor:(null==e?void 0:e.cursor)||""},headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}};return $.debug("Call getServerConversations",e),Q.call(this,a,_.GET_SESSION_LIST).then((function(e){return xr(e)}))}function xr(e){var t=e.data,r=t.cursor,n=t.channel_infos,o=[];null==n||n.forEach((function(e){var t=null;(null==e?void 0:e.meta)&&"{}"!==JSON.stringify(e.meta)&&(e.meta.payload=JSON.parse(e.meta.payload),t=fe(e.meta));var r={conversationId:e.session_to,conversationType:"chat"===e.session_type?"singleChat":"groupChat",isPinned:e.is_top,pinnedTime:e.is_top?e.update_top_status_time:0,unReadCount:e.unread_num,lastMessage:t};o.push(r)}));var i={conversations:o,cursor:r||""};return{type:e.type,data:i}}function Dr(e){if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}if(e.pageSize&&"number"!=typeof e.pageSize)throw Error("Invalid parameter pageSize: ".concat(e.pageSize));if(e.cursor&&"string"!=typeof e.cursor)throw Error("Invalid parameter cursor: ".concat(e.cursor));var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/sdk/user/").concat(this.user,"/user_channels/list?"),type:"GET",dataType:"json",data:{limit:(null==e?void 0:e.pageSize)||20,cursor:(null==e?void 0:e.cursor)||"",is_top:!0},headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}};return $.debug("Call getServerConversations",e),Q.call(this,a,_.GET_SESSION_LIST).then((function(e){return xr(e)}))}function jr(e){return Jt(this,void 0,void 0,(function(){var t,r,n,o,i,a,s,c,u,l,p,d,h,m;return $t(this,(function(g){if(!Kt.call(this))return t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)];if(r=e.conversationId,n=e.conversationType,o=e.isPinned,i="singleChat"===n?"chat":"groupChat","string"!=typeof r||""===r)throw Error("Invalid parameter conversationId: ".concat(r));if(!["singleChat","groupChat"].includes(n))throw Error("Invalid parameter conversationType: ".concat(n));if("boolean"!=typeof o)throw Error("Invalid parameter isPinned: ".concat(o));return a=this.context,s=a.orgName,c=a.appName,u=a.accessToken,l=a.jid,p={type:i,to:r},d=o?"":"type=".concat(i,"&to=").concat(r,"&"),h="".concat(this.apiUrl,"/").concat(s,"/").concat(c,"/sdk/user/").concat(this.user,"/user_channel/top?").concat(d,"resource=").concat(l.clientResource),m={url:h,type:o?"POST":"DELETE",dataType:"json",headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}},o&&(m.data=JSON.stringify(p)),$.debug("Call pinConversation",e),[2,Q.call(this,m,_.PIN_CONVERSATION).then((function(e){var t=e.type,r=e.data;return{type:t,data:{isPinned:r.is_top||!1,pinnedTime:r.is_top?r.update_top_status_time:0}}}))]}))}))}function Gr(e){if(!e||!e.data)throw Error("Invalid parameter");if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatgroups?resource=").concat(a.clientResource),dataType:"json",type:"POST",data:JSON.stringify({owner:this.user,groupname:e.data.groupname,desc:e.data.desc,members:e.data.members,public:e.data.public,approval:e.data.approval,allowinvites:e.data.allowinvites,invite_need_confirm:e.data.inviteNeedConfirm,maxusers:e.data.maxusers,custom:e.data.ext}),headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:function(t){e.success&&e.success(t)},error:e.error};return $.debug("Call createGroup:",e),Q.call(this,s,_.CREATE_GROUP)}var Br=Gr;function Hr(e){var t;if("string"!=typeof e.groupId||""===e.groupId)throw Error("Invalid parameter");if(!Kt.call(this)){var r=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(r)}var n=this.context,o=n.orgName,i=n.appName,a=n.accessToken,s=n.jid,c={entities:[(t={},t["notification_ignore_"+e.groupId]=!0,t)]},u={type:"PUT",url:"".concat(this.apiUrl,"/").concat(o,"/").concat(i,"/users/").concat(this.user,"?resource=").concat(s.clientResource),data:JSON.stringify(c),dataType:"json",headers:{Authorization:"Bearer "+a,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call blockGroupMessages",e),Q.call(this,u,_.BLOCK_GROUP)}var Fr=Hr;function Wr(e){if("number"!=typeof e.limit)throw Error("Invalid parameter");if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a={limit:e.limit,cursor:e.cursor};e.cursor||delete a.cursor;var s={url:this.apiUrl+"/"+n+"/"+o+"/publicchatgroups",type:"GET",dataType:"json",data:a,headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call listGroups",e),Q.call(this,s,_.LIST_GROUP)}var Kr=Wr;function Vr(e){if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a={url:this.apiUrl+"/"+n+"/"+o+"/users/"+this.user+"/joined_chatgroups",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e&&(null==e?void 0:e.success),error:e&&(null==e?void 0:e.error)};return $.debug("Call getJoinedGroups",e),Q.call(this,a,_.GET_USER_GROUP)}function qr(e){if("number"!=typeof e.pageNum||"number"!=typeof e.pageSize)throw Error('Invalid parameter: "pageNum or pageSize"');if(e.pageNum<0||e.pageSize<0)throw Error('"pageNum" should >= 0 and "pageSize" should >= 0');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=e.needAffiliations||e.needRole?"/chatgroups/user/".concat(this.user,"?pagenum=").concat(e.pageNum,"&pagesize=").concat(e.pageSize,"&needAffiliations=").concat(e.needAffiliations,"&needRole=").concat(e.needRole):"/users/".concat(this.user,"/joined_chatgroups?pagenum=").concat(e.pageNum,"&pagesize=").concat(e.pageSize),s={url:this.apiUrl+"/"+n+"/"+o+a,dataType:"json",type:"GET",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e&&(null==e?void 0:e.success),error:e&&(null==e?void 0:e.error)};return $.debug("Call getGroup",e),Q.call(this,s,_.GET_USER_GROUP).then((function(e){var t=e.uri,r=e.entities,n=[];return t.includes("joined_chatgroups")||(r.forEach((function(e){var t={affiliationsCount:e.affiliations_count,groupName:e.name,groupId:e.groupId,role:e.permission,disabled:e.disabled,approval:e.membersonly,allowInvites:e.allowinvites,description:e.description,maxUsers:e.maxusers,public:e.public};n.push(t)})),e.entities=n),e}))}function zr(e){if("string"!=typeof e.groupId||"string"!=typeof e.newOwner)throw Error("Invalid parameter");if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r={newowner:e.newOwner},n=this.context,o=n.orgName,i=n.appName,a=n.accessToken,s=n.jid,c={url:"".concat(this.apiUrl,"/").concat(o,"/").concat(i,"/chatgroups/").concat(e.groupId,"?resource=").concat(s.clientResource),type:"PUT",dataType:"json",headers:{Authorization:"Bearer "+a,"Content-Type":"application/json"},data:JSON.stringify(r),success:e.success,error:e.error};return $.debug("Call changeOwner",e),Q.call(this,c,_.CHANGE_OWNER)}var Jr=zr;function $r(e){if("string"!=typeof e.groupId&&!Array.isArray(e.groupId))throw Error('Invalid parameter: "groupId"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a={url:this.apiUrl+"/"+n+"/"+o+"/chatgroups/"+e.groupId+"?joined_time=true",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call getGroupInfo",e),Q.call(this,a,_.GET_GROUP_INFO)}function Yr(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error("Invalid parameter");if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s=e.groupId,c={groupname:e.groupName,description:e.description,custom:e.ext},u={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatgroups/").concat(s,"?resource=").concat(a.clientResource),type:"PUT",data:JSON.stringify(c),dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call modifyGroup",e),Q.call(this,u,_.MODIFY_GROUP)}function Xr(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(isNaN(e.pageNum)||e.pageNum<=0)throw Error('The parameter "pageNum" should be a positive number');if(isNaN(e.pageSize)||e.pageSize<=0)throw Error('The parameter "pageSize" should be a positive number');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r={pagenum:e.pageNum,pagesize:e.pageSize},n=this.context,o=n.orgName,i=n.appName,a=n.accessToken,s={url:this.apiUrl+"/"+o+"/"+i+"/chatgroups/"+e.groupId+"/users",dataType:"json",type:"GET",data:r,headers:{Authorization:"Bearer "+a,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call listGroupMember",e),Q.call(this,s,_.LIST_GROUP_MEMBER)}var Qr=Xr;function Zr(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=e.groupId,s={url:this.apiUrl+"/"+n+"/"+o+"/chatgroups/"+a+"/admin",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call getGroupAdmin",e),Q.call(this,s,_.GET_GROUP_ADMIN)}function en(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s=e.groupId,c={newadmin:e.username},u={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatgroups/").concat(s,"/admin?resource=").concat(a.clientResource),type:"POST",dataType:"json",data:JSON.stringify(c),headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call setGroupAdmin",e),Q.call(this,u,_.SET_GROUP_ADMIN)}var tn=en;function rn(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s=e.groupId,c=e.username,u={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatgroups/").concat(s,"/admin/").concat(c,"?resource=").concat(a.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call removeAdmin",e),Q.call(this,u,_.REMOVE_GROUP_ADMIN)}var nn=rn;function on(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s=e.groupId,c={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatgroups/").concat(s,"?version=v3&resource=").concat(a.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call destroyGroup",e),Q.call(this,c,_.DISSOLVE_GROUP)}var an=on;function sn(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s=e.groupId,c={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatgroups/").concat(s,"/quit?resource=").concat(a.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call quitGroup",e),Q.call(this,c,_.QUIT_GROUP)}var cn=sn;function un(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!Array.isArray(e.users))throw Error('Invalid parameter: "users"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=e.groupId,n={usernames:e.users},o=this.context,i=o.orgName,a=o.appName,s=o.accessToken,c=o.jid,u={url:"".concat(this.apiUrl,"/").concat(i,"/").concat(a,"/chatgroups/").concat(r,"/invite?resource=").concat(c.clientResource),type:"POST",data:JSON.stringify(n),dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call inviteUsersToGroup",e),Q.call(this,u,_.INVITE_TO_GROUP)}var ln=un;function pn(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatgroups/").concat(e.groupId,"/apply?resource=").concat(a.clientResource),type:"POST",dataType:"json",data:JSON.stringify({message:e.message||""}),headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call joinGroup",e),Q.call(this,s,_.JOIN_GROUP)}function dn(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.applicant||""===e.applicant)throw Error('Invalid parameter: "applicant"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s=e.groupId,c={applicant:e.applicant,verifyResult:!0,reason:"no clue"},u={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatgroups/").concat(s,"/apply_verify?resource=").concat(a.clientResource),type:"POST",dataType:"json",data:JSON.stringify(c),headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call agreeJoinGroup",e),Q.call(this,u,_.AGREE_JOIN_GROUP)}var hn=dn;function fn(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.applicant||""===e.applicant)throw Error('Invalid parameter: "applicant"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s=e.groupId,c={applicant:e.applicant,verifyResult:!1,reason:e.reason||""},u={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatgroups/").concat(s,"/apply_verify?resource=").concat(a.clientResource),type:"POST",dataType:"json",data:JSON.stringify(c),headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call rejectGroupJoinRequest",e),Q.call(this,u,_.REJECT_JOIN_GROUP)}var mn=fn;function gn(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.invitee||""===e.invitee)throw Error('Invalid parameter: "invitee"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s=e.groupId,c={invitee:e.invitee,verifyResult:!0},u={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatgroups/").concat(s,"/invite_verify?resource=").concat(a.clientResource),type:"POST",dataType:"json",data:JSON.stringify(c),headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call acceptGroupInvite",e),Q.call(this,u,_.AGREE_INVITE_GROUP)}var En=gn;function yn(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.invitee||""===e.invitee)throw Error('Invalid parameter: "invitee"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s=e.groupId,c={invitee:e.invitee,verifyResult:!1},u={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatgroups/").concat(s,"/invite_verify?resource=").concat(a.clientResource),type:"POST",dataType:"json",data:JSON.stringify(c),headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call rejectGroupInvite",e),Q.call(this,u,_.REJECT_INVITE_GROUP)}var vn=yn;function _n(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=e.groupId,n=e.username,o=this.context,i=o.orgName,a=o.appName,s=o.accessToken,c=o.jid,u={url:"".concat(this.apiUrl,"/").concat(i,"/").concat(a,"/chatgroups/").concat(r,"/users/").concat(n,"?resource=").concat(c.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call removeGroupMember",e),Q.call(this,u,_.REMOVE_GROUP_MEMBER)}var Tn=_n;function On(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!Array.isArray(e.users))throw Error('Invalid parameter: "users"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s=e.groupId,c=e.users.join(","),u={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatgroups/").concat(s,"/users/").concat(c,"?resource=").concat(a.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call removeGroupMembers",e),Q.call(this,u,_.MULTI_REMOVE_GROUP_MEMBER)}var Rn=On;function In(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!(Array.isArray(e.username)||"string"==typeof e.username&&""!==e.username))throw Error('Invalid parameter: "username"');if("number"!=typeof e.muteDuration)throw Error('Invalid parameter: "muteDuration"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s=e.groupId,c={usernames:"string"==typeof e.username?[e.username]:e.username,mute_duration:e.muteDuration},u={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatgroups/").concat(s,"/mute?resource=").concat(a.clientResource),dataType:"json",type:"POST",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},data:JSON.stringify(c),success:e.success,error:e.error};return $.debug("Call muteGroupMember",e),Q.call(this,u,_.MUTE_GROUP_MEMBER)}var Sn=In;function Cn(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!(Array.isArray(e.username)||"string"==typeof e.username&&""!==e.username))throw Error('Invalid parameter: "username"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s=e.groupId,c=e.username,u={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatgroups/").concat(s,"/mute/").concat(c,"?resource=").concat(a.clientResource),dataType:"json",type:"DELETE",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call unmuteGroupMember",e),Q.call(this,u,_.UNMUTE_GROUP_MEMBER)}var Nn=Cn;function An(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=e.groupId,s={url:this.apiUrl+"/"+n+"/"+o+"/chatgroups/"+a+"/mute",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call getGroupMuteList",e),Q.call(this,s,_.GET_GROUP_MUTE_LIST)}var bn=An,Mn=An;function wn(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s=e.groupId,c=e.username,u={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatgroups/").concat(s,"/blocks/users/").concat(c,"?resource=").concat(a.clientResource),type:"POST",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call blockGroupMember",e),Q.call(this,u,_.BLOCK_GROUP_MEMBER)}var Un=wn;function Pn(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!Array.isArray(e.usernames))throw Error('Invalid parameter: "usernames"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s=e.groupId,c={usernames:e.usernames},u={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatgroups/").concat(s,"/blocks/users?resource=").concat(a.clientResource),data:JSON.stringify(c),type:"POST",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call blockGroupMembers",e),Q.call(this,u,_.BLOCK_GROUP_MEMBERS)}var kn=Pn;function Ln(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s=e.groupId,c=e.username,u={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatgroups/").concat(s,"/blocks/users/").concat(c,"?resource=").concat(a.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call unblockGroupMember",e),Q.call(this,u,_.UNBLOCK_GROUP_MEMBER)}var xn=Ln;function Dn(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!Array.isArray(e.usernames))throw Error('Invalid parameter: "usernames"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s=e.groupId,c=e.usernames.join(","),u={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatgroups/").concat(s,"/blocks/users/").concat(c,"?resource=").concat(a.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call unblockGroupMembers",e),Q.call(this,u,_.UNBLOCK_GROUP_MEMBERS)}var jn=Dn;function Gn(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=e.groupId,s={url:this.apiUrl+"/"+n+"/"+o+"/chatgroups/"+a+"/blocks/users",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call getGroupBlacklist",e),Q.call(this,s,_.GET_GROUP_BLACK_LIST)}var Bn=Gn,Hn=Gn;function Fn(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s=e.groupId,c={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatgroups/").concat(s,"/ban?resource=").concat(a.clientResource),type:"POST",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call disableSendGroupMsg",e),Q.call(this,c,_.DISABLED_SEND_GROUP_MSG)}function Wn(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s=e.groupId,c={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatgroups/").concat(s,"/ban?resource=").concat(a.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call enableSendGroupMsg",e),Q.call(this,c,_.ENABLE_SEND_GROUP_MSG)}function Kn(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!Array.isArray(e.users))throw Error('Invalid parameter: "users"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s=e.groupId,c={usernames:e.users},u={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatgroups/").concat(s,"/white/users?resource=").concat(a.clientResource),type:"POST",data:JSON.stringify(c),dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call addUsersToGroupWhitelist",e),Q.call(this,u,_.ADD_USERS_TO_GROUP_WHITE)}var Vn=Kn;function qn(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.userName||""===e.userName)throw Error('Invalid parameter: "userName"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s=e.groupId,c={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatgroups/").concat(s,"/white/users/").concat(e.userName,"?resource=").concat(a.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call removeGroupAllowlistMember",e),Q.call(this,c,_.REMOVE_GROUP_WHITE_MEMBER)}var zn=qn,Jn=qn;function $n(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=e.groupId,s={url:this.apiUrl+"/"+n+"/"+o+"/chatgroups/"+a+"/white/users",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call getGroupAllowlist",e),Q.call(this,s,_.GET_GROUP_WHITE_LIST)}var Yn=$n;function Xn(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.userName||""===e.userName)throw Error('Invalid parameter: "userName"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=e.groupId,s={url:this.apiUrl+"/"+n+"/"+o+"/chatgroups/"+a+"/white/users/"+e.userName,type:"GET",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call isInGroupAllowlist",e),Q.call(this,s,_.IS_IN_GROUP_WHITE_LIST)}var Qn=Xn,Zn=Xn;function eo(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "chatRoomId"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.userId,s={url:this.apiUrl+"/"+n+"/"+o+"/sdk/group/"+e.groupId+"/mute/"+a,dataType:"json",type:"GET",headers:{Authorization:"Bearer "+i}};return $.debug("Call isInGroupMutelist",e),Q.call(this,s).then((function(e){return e.data}))}function to(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.msgId||""===e.msgId)throw Error('Invalid parameter: "msgId"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a={url:this.apiUrl+"/"+n+"/"+o+"/chatgroups/"+e.groupId+"/acks/"+e.msgId,dataType:"json",type:"GET",data:{limit:500,key:void 0},headers:{Authorization:"Bearer "+i},success:e.success,error:e.error};return $.debug("Call getGroupMsgReadUser",e),Q.call(this,a,_.GET_GROUP_MSG_READ_USER)}function ro(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=e.groupId,s={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatgroups/").concat(a,"/announcement"),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call fetchGroupAnnouncement",e),Q.call(this,s,_.GET_GROUP_ANN)}function no(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.announcement)throw Error('Invalid parameter: "announcement"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s=e.groupId,c={announcement:e.announcement},u={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatgroups/").concat(s,"/announcement?resource=").concat(a.clientResource),type:"POST",dataType:"json",data:JSON.stringify(c),headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call updateGroupAnnouncement",e),Q.call(this,u,_.UPDATE_GROUP_ANN)}function oo(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("object"!=c(e.file))throw Error('Invalid parameter: "file"');if(Kt.call(this)){var t=this.context,r=t.orgName,n=t.appName,o=t.accessToken,i=t.jid,a=e.groupId;se.call(this,{uploadUrl:"".concat(this.apiUrl,"/").concat(r,"/").concat(n,"/chatgroups/").concat(a,"/share_files?resource=").concat(i.clientResource),onFileUploadProgress:e.onFileUploadProgress,onFileUploadComplete:e.onFileUploadComplete,onFileUploadError:e.onFileUploadError,onFileUploadCanceled:e.onFileUploadCanceled,accessToken:o,apiUrl:this.apiUrl,file:e.file,appKey:this.context.appKey},_.UPLOAD_GROUP_FILE),$.debug("Call uploadGroupSharedFile",e)}}function io(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.fileId||""===e.fileId)throw Error('Invalid parameter: "file"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s=e.groupId,c=e.fileId,u={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatgroups/").concat(s,"/share_files/").concat(c,"?resource=").concat(a.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call deleteGroupSharedFile",e),Q.call(this,u,_.DELETE_GROUP_FILE)}function ao(e){if("string"!=typeof e.groupId||""===e.groupId)throw Error('Invalid parameter: "groupId"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=e.pageNum||1,s=e.pageSize||10,c=e.groupId,u={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatgroups/").concat(c,"/share_files?pagenum=").concat(a,"&pagesize=").concat(s),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call getGroupSharedFilelist",e),Q.call(this,u,_.GET_GROUP_FILE_LIST)}var so=ao;function co(e){var t=this.context,r=t.orgName,n=t.appName,o=t.accessToken,i=this.apiUrl,a=e.groupId,s=e.fileId;ce.call(this,{url:"".concat(i,"/").concat(r,"/").concat(n,"/chatgroups/").concat(a,"/share_files/").concat(s),onFileDownloadComplete:e.onFileDownloadComplete,onFileDownloadError:e.onFileDownloadError,accessToken:o,id:s,secret:e.secret},_.DOWN_GROUP_FILE),$.debug("Call downloadGroupSharedFile",e)}function uo(e){return function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){var t,r,n,o,i,a,s,u,l,p,d;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(h){switch(h.label){case 0:if(t=e.groupId,r=e.userId,n=e.memberAttributes,"string"!=typeof t||""===t)throw Error('Invalid parameter: "groupId"');if("string"!=typeof r||""===r)throw Error('Invalid parameter: "userId"');if("object"!=c(n))throw Error('Invalid parameter: "memberAttributes"');return Kt.call(this)?(i=this.context,a=i.orgName,s=i.appName,u=i.accessToken,l=i.jid,p={metaData:n},d={url:"".concat(this.apiUrl,"/").concat(a,"/").concat(s,"/sdk/metadata/chatgroup/").concat(t,"/user/").concat(r,"?resource=").concat(l.clientResource),type:"PUT",dataType:"json",data:JSON.stringify(p),headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}},$.debug("Call setGroupMemberAttributes",e),[4,Q.call(this,d,_.SET_GROUP_MEMBER_ATTRS)]):(o=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(o)]);case 1:return h.sent(),[2]}}))}))}function lo(e){var t=e.groupId,r=e.userId;return po.call(this,{groupId:t,userIds:[r]}).then((function(e){var t;return{type:e.type,data:null===(t=e.data)||void 0===t?void 0:t[r]}}))}function po(e){var t=e.groupId,r=e.userIds,n=e.keys,o=void 0===n?[]:n;if("string"!=typeof t||""===t)throw Error('Invalid parameter: "groupId"');if(!Array.isArray(r)||(null==r?void 0:r.length)<=0)throw Error('Invalid parameter: "userIds"');if(!Array.isArray(o))throw Error('Invalid parameter: "keys"');if(!Kt.call(this)){var i=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(i)}var a=this.context,s=a.orgName,c=a.appName,u=a.accessToken,l={targets:r,properties:o},p={url:"".concat(this.apiUrl,"/").concat(s,"/").concat(c,"/sdk/metadata/chatgroup/").concat(t,"/get"),type:"POST",dataType:"json",data:JSON.stringify(l),headers:{Authorization:"Bearer "+u,"Content-Type":"application/json"}};return $.debug("Call getGroupMembersAttributes",e),Q.call(this,p,_.GET_GROUP_MEMBER_ATTR).then((function(e){return{type:e.type,data:(null==e?void 0:e.data)||{}}}))}function ho(e){var t=this;if("number"!=typeof e.pagenum||"number"!=typeof e.pagesize)throw Error("Invalid parameter");if(!Kt.call(this)){var r=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(r)}var n={pagenum:e.pagenum||1,pagesize:e.pagesize||20},o=this.context,i=o.orgName,a=o.appName,s=o.accessToken,c={url:this.apiUrl+"/"+i+"/"+a+"/chatrooms",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+s},data:n,success:function(t){"function"==typeof e.success&&e.success(t)},error:function(r){r.error&&r.error_description&&t.onError&&t.onError({type:f.WEBIM_CONNCTION_LOAD_CHATROOM_ERROR,message:r.error_description,data:r}),"function"==typeof e.error&&e.error(r)}};return $.debug("Call getChatRooms",e),Q.call(this,c,_.GET_CHATROOM_LIST)}function fo(e){if("string"!=typeof e.name)throw Error("Invalid parameter");if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r={name:e.name,description:e.description,maxusers:e.maxusers,owner:this.user,members:e.members},n=this.context,o=n.orgName,i=n.appName,a=(n.accessToken,n.jid),s={url:"".concat(this.apiUrl,"/").concat(o,"/").concat(i,"/chatrooms?resource=").concat(a.clientResource),dataType:"json",type:"POST",data:JSON.stringify(r),headers:{Authorization:"Bearer "+e.token||!1,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call createChatRoom",e),Q.call(this,s,_.CREATE_CHATROOM)}function mo(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter");if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=(r.accessToken,r.jid),a={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatrooms/").concat(e.chatRoomId,"?resource=").concat(i.clientResource),dataType:"json",type:"DELETE",headers:{Authorization:"Bearer "+e.token||!1},success:e.success,error:e.error};return $.debug("Call destroyChatRoom",e),Q.call(this,a,_.DESTROY_CHATROOM)}function go(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter");if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a={url:this.apiUrl+"/"+n+"/"+o+"/chatrooms/"+e.chatRoomId,dataType:"json",type:"GET",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call getChatRoomDetails",e),Q.call(this,a,_.GET_CHATROOM_DETAIL)}function Eo(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter");if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s=e.chatRoomId,c={groupname:e.chatRoomName,description:e.description,maxusers:e.maxusers},u={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatrooms/").concat(s,"?resource=").concat(a.clientResource),type:"PUT",data:JSON.stringify(c),dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call modifyChatRoom",e),Q.call(this,u,_.MODIFY_CHATROOM)}function yo(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId||"string"!=typeof e.username)throw Error("Invalid parameter");if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s=e.chatRoomId,c=e.username,u={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatrooms/").concat(s,"/users/").concat(c,"?resource=").concat(a.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call removeChatRoomMember",e),Q.call(this,u,_.REMOVE_CHATROOM_MEMBER)}var vo=yo;function _o(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId||!Array.isArray(e.users))throw Error("Invalid parameter");if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=e.chatRoomId,n=e.users.join(","),o=this.context,i=o.orgName,a=o.appName,s=o.accessToken,c=o.jid,u={url:"".concat(this.apiUrl,"/").concat(i,"/").concat(a,"/chatrooms/").concat(r,"/users/").concat(n,"?resource=").concat(c.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call removeChatRoomMembers",e),Q.call(this,u,_.MULTI_REMOVE_CHATROOM_MEMBER)}var To=_o;function Oo(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId||!Array.isArray(e.users))throw Error("Invalid parameter");if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=e.chatRoomId,n={usernames:e.users},o=this.context,i=o.orgName,a=o.appName,s=o.accessToken,c=o.jid,u={url:"".concat(this.apiUrl,"/").concat(i,"/").concat(a,"/chatrooms/").concat(r,"/users?resource=").concat(c.clientResource),type:"POST",data:JSON.stringify(n),dataType:"json",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call addUsersToChatRoom",e),Q.call(this,u,_.ADD_USERS_TO_CHATROOM)}function Ro(e){if("string"!=typeof e.roomId||""===e.roomId)throw Error("Invalid parameter");if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}return $.debug("Call joinChatRoom",e),this.mSync.handleChatRoom(e,"join")}function Io(e){if("string"!=typeof e.roomId||""===e.roomId)throw Error("Invalid parameter");if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}return $.debug("Call leaveChatRoom",e),this.mSync.handleChatRoom(e,"leave")}var So=Io;function Co(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(isNaN(e.pageNum)||e.pageNum<=0)throw Error('The parameter "pageNum" should be a positive number');if(isNaN(e.pageSize)||e.pageSize<=0)throw Error('The parameter "pageSize" should be a positive number');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r={pagenum:e.pageNum,pagesize:e.pageSize},n=this.context,o=n.orgName,i=n.appName,a=n.accessToken,s={url:this.apiUrl+"/"+o+"/"+i+"/chatrooms/"+e.chatRoomId+"/users",dataType:"json",type:"GET",data:r,headers:{Authorization:"Bearer "+a,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call listChatRoomMembers",e),Q.call(this,s,_.LIST_CHATROOM_MEMBERS)}var No=Co;function Ao(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=e.chatRoomId,s={url:this.apiUrl+"/"+n+"/"+o+"/chatrooms/"+a+"/admin",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call getChatRoomAdmin",e),Q.call(this,s,_.GET_CHATROOM_ADMIN)}function bo(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s=e.chatRoomId,c={newadmin:e.username},u={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatrooms/").concat(s,"/admin?resource=").concat(a.clientResource),type:"POST",dataType:"json",data:JSON.stringify(c),headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call setChatRoomAdmin",e),Q.call(this,u,_.SET_CHATROOM_ADMIN)}function Mo(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s=e.chatRoomId,c=e.username,u={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatrooms/").concat(s,"/admin/").concat(c,"?resource=").concat(a.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call removeChatRoomAdmin",e),Q.call(this,u,_.REMOVE_CHATROOM_ADMIN)}function wo(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "groupId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if("number"!=typeof e.muteDuration)throw Error('Invalid parameter: "muteDuration"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s=e.chatRoomId,c={usernames:[e.username],mute_duration:e.muteDuration},u={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatrooms/").concat(s,"/mute?resource=").concat(a.clientResource),dataType:"json",type:"POST",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},data:JSON.stringify(c),success:e.success,error:e.error};return $.debug("Call muteChatRoomMember",e),Q.call(this,u,_.MUTE_CHATROOM_MEMBER)}function Uo(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s=e.chatRoomId,c=e.username,u={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatrooms/").concat(s,"/mute/").concat(c,"?resource=").concat(a.clientResource),dataType:"json",type:"DELETE",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call unmuteChatRoomMember",e),Q.call(this,u,_.REMOVE_MUTE_CHATROOM_MEMBER)}var Po=Uo;function ko(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=e.chatRoomId,s={url:this.apiUrl+"/"+n+"/"+o+"/chatrooms/"+a+"/mute",dataType:"json",type:"GET",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call getChatRoomMutelist",e),Q.call(this,s,_.GET_MUTE_CHATROOM_MEMBERS)}var Lo=ko,xo=ko;function Do(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s=e.chatRoomId,c=e.username,u={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatrooms/").concat(s,"/blocks/users/").concat(c,"?resource=").concat(a.clientResource),type:"POST",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call blockChatRoomMember",e),Q.call(this,u,_.SET_CHATROOM_MEMBER_TO_BLACK)}var jo=Do;function Go(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!Array.isArray(e.usernames))throw Error('Invalid parameter: "usernames"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s=e.chatRoomId,c={usernames:e.usernames},u={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatrooms/").concat(s,"/blocks/users?resource=").concat(a.clientResource),data:JSON.stringify(c),type:"POST",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Chat blockChatRoomMembers:",u),Q.call(this,u,_.MULTI_SET_CHATROOM_MEMBER_TO_BLACK)}var Bo=Go;function Ho(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if("string"!=typeof e.username||""===e.username)throw Error('Invalid parameter: "username"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s=e.chatRoomId,c=e.username,u={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatrooms/").concat(s,"/blocks/users/").concat(c,"?resource=").concat(a.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call unblockChatRoomMember",e),Q.call(this,u,_.REMOVE_CHATROOM_MEMBER_BLACK)}var Fo=Ho;function Wo(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!Array.isArray(e.usernames))throw Error('Invalid parameter: "usernames"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s=e.chatRoomId,c=e.usernames.join(","),u={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatrooms/").concat(s,"/blocks/users/").concat(c,"?resource=").concat(a.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call unblockChatRoomMembers",e),Q.call(this,u,_.MULTI_REMOVE_CHATROOM_MEMBER_BLACK)}var Ko=Wo;function Vo(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=e.chatRoomId,s={url:this.apiUrl+"/"+n+"/"+o+"/chatrooms/"+a+"/blocks/users",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call getChatRoomBlocklist",e),Q.call(this,s,_.GET_CHATROOM_BLOCK_MEMBERS)}var qo=Vo,zo=Vo;function Jo(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s=e.chatRoomId,c={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatrooms/").concat(s,"/ban?resource=").concat(a.clientResource),type:"POST",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call disableSendChatRoomMsg",e),Q.call(this,c,_.DISABLED_CHATROOM_SEND_MSG)}function $o(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s=e.chatRoomId,c={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatrooms/").concat(s,"/ban?resource=").concat(a.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call enableSendChatRoomMsg",e),Q.call(this,c,_.ENABLE_CHATROOM_SEND_MSG)}function Yo(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!Array.isArray(e.users))throw Error('Invalid parameter: "users"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s=e.chatRoomId,c={usernames:e.users},u={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatrooms/").concat(s,"/white/users?resource=").concat(a.clientResource),type:"POST",data:JSON.stringify(c),dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call addUsersToChatRoomWhitelist",e),Q.call(this,u,_.ADD_USERS_TO_CHATROOM)}var Xo=Yo;function Qo(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if("string"!=typeof e.userName||""===e.userName)throw Error('Invalid parameter: "userName"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s=e.chatRoomId,c={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatrooms/").concat(s,"/white/users/").concat(e.userName,"?resource=").concat(a.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call removeChatRoomAllowlistMember",e),Q.call(this,c,_.REMOVE_CHATROOM_WHITE_USERS)}var Zo=Qo,ei=Qo;function ti(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=e.chatRoomId,s={url:this.apiUrl+"/"+n+"/"+o+"/chatrooms/"+a+"/white/users",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call getChatRoomAllowlist",e),Q.call(this,s,_.GET_CHATROOM_WHITE_USERS)}var ri=ti;function ni(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if("string"!=typeof e.userName||""===e.userName)throw Error('Invalid parameter: "userName"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=e.chatRoomId,s={url:this.apiUrl+"/"+n+"/"+o+"/chatrooms/"+a+"/white/users/"+e.userName,type:"GET",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call isInChatRoomAllowlist",e),Q.call(this,s,_.CHECK_CHATROOM_WHITE_USER)}var oi=ni;function ii(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error('Invalid parameter: "chatRoomId"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.userId,s={url:this.apiUrl+"/"+n+"/"+o+"/sdk/chatrooms/"+e.chatRoomId+"/mute/"+a,dataType:"json",type:"GET",headers:{Authorization:"Bearer "+i}};return $.debug("Call isInChatRoomMutelist",e),Q.call(this,s).then((function(e){return e.data}))}function ai(e){if("string"!=typeof e.roomId||""===e.roomId)throw Error('Invalid parameter: "roomId"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=e.roomId,s={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatrooms/").concat(a,"/announcement"),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call fetchChatRoomAnnouncement",e),Q.call(this,s,_.GET_CHATROOM_ANN)}function si(e){if("string"!=typeof e.roomId||""===e.roomId)throw Error('Invalid parameter: "roomId"');if("string"!=typeof e.announcement)throw Error('Invalid parameter: "announcement"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s=e.roomId,c={announcement:e.announcement},u={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatrooms/").concat(s,"/announcement?resource=").concat(a.clientResource),type:"POST",dataType:"json",data:JSON.stringify(c),headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call updateChatRoomAnnouncement:",e),Q.call(this,u,_.UPDATE_CHATROOM_ANN)}function ci(e){if("string"!=typeof e.roomId||""===e.roomId)throw Error('Invalid parameter: "roomId"');if("object"!=c(e.file))throw Error('Invalid parameter: "file"');if(Kt.call(this)){var t=this.context,r=t.orgName,n=t.appName,o=t.accessToken,i=t.jid,a=e.roomId;se.call(this,{uploadUrl:"".concat(this.apiUrl,"/").concat(r,"/").concat(n,"/chatrooms/").concat(a,"/share_files?resource=").concat(i.clientResource),onFileUploadProgress:e.onFileUploadProgress,onFileUploadComplete:e.onFileUploadComplete,onFileUploadError:e.onFileUploadError,onFileUploadCanceled:e.onFileUploadCanceled,accessToken:o,apiUrl:this.apiUrl,file:e.file,appKey:this.context.appKey},_.UPLOAD_CHATROOM_FILE),$.debug("Call uploadChatRoomSharedFile",e)}}function ui(e){if("string"!=typeof e.roomId||""===e.roomId)throw Error('Invalid parameter: "roomId"');if("string"!=typeof e.fileId||""===e.fileId)throw Error('Invalid parameter: "fileId"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s=e.roomId,c=e.fileId,u={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatrooms/").concat(s,"/share_files/").concat(c,"?resource=").concat(a.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call deleteChatRoomSharedFile",e),Q.call(this,u,_.DELETE_CHATROOM_FILE)}function li(e){if("string"!=typeof e.roomId||""===e.roomId)throw Error('Invalid parameter: "roomId"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=e.roomId,s={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/chatrooms/").concat(a,"/share_files"),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json",accept:"application/json"},success:e.success,error:e.error};return $.debug("Call fetchChatRoomSharedFileList",e),Q.call(this,s,_.GET_CHATROOM_FILES)}var pi=li;function di(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter chatRoomId: "+e.chatRoomId);if(e.attributeKeys&&!Array.isArray(e.attributeKeys))throw Error('"Invalid parameter attributeKeys": '+e.attributeKeys);if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=(r.jid,e.chatRoomId),s={keys:e.attributeKeys},c={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/metadata/chatroom/").concat(a),type:"POST",dataType:"json",data:JSON.stringify(s),headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}};return $.debug("Call getChatRoomAttributes:",e),Q.call(this,c,_.GET_CHATROOM_ATTR).then((function(e){return{data:e.data,type:e.type}}))}function hi(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter chatRoomId: "+e.chatRoomId);if("object"!=c(e.attributes))throw Error("Invalid parameter attributes: "+e.attributes);if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.userId,s=e.chatRoomId,u=e.attributes,l=e.autoDelete,p=void 0===l||l,d=e.isForced?"/forced":"",h={metaData:u,autoDelete:p?"DELETE":"NO_DELETE"},m={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/metadata/chatroom/").concat(s,"/user/").concat(a)+d,type:"PUT",dataType:"json",data:JSON.stringify(h),headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}};return $.debug("Call setChatRoomAttributes:",e),Q.call(this,m,_.SET_CHATROOM_ATTR).then((function(e){return Vt(e)}))}function fi(e){var t;if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter chatRoomId: "+e.chatRoomId);if("string"!=typeof e.attributeKey||""===e.attributeKey)throw Error("Invalid parameter attributeKey: "+e.attributeKey);if("string"!=typeof e.attributeValue||""===e.attributeValue)throw Error("Invalid parameter attributeValue: "+e.attributeValue);if(!Kt.call(this)){var r=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(r)}var n=this.context,o=n.orgName,i=n.appName,a=n.accessToken,s=n.userId,c=e.chatRoomId,u=e.attributeKey,l=e.attributeValue,p=e.autoDelete,d=void 0===p||p,h=e.isForced?"/forced":"",m={metaData:(t={},t[u]=l,t),autoDelete:d?"DELETE":"NO_DELETE"},g={url:"".concat(this.apiUrl,"/").concat(o,"/").concat(i,"/metadata/chatroom/").concat(c,"/user/").concat(s)+h,type:"PUT",dataType:"json",data:JSON.stringify(m),headers:{Authorization:"Bearer "+a,"Content-Type":"application/json"}};return $.debug("Call setChatRoomAttribute:",e),Q.call(this,g,_.SET_CHATROOM_ATTR).then((function(e){var t=qt(e);if(t)throw t}))}function mi(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter chatRoomId: "+e.chatRoomId);if(!Array.isArray(e.attributeKeys))throw Error('"Invalid parameter attributes": '+e.attributeKeys);if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.userId,s=e.chatRoomId,c=e.attributeKeys,u=e.isForced?"/forced":"",l={keys:c},p={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/metadata/chatroom/").concat(s,"/user/").concat(a)+u,type:"DELETE",dataType:"json",data:JSON.stringify(l),headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}};return $.debug("Call removeChatRoomAttributes:",e),Q.call(this,p,_.DELETE_CHATROOM_ATTR).then((function(e){return Vt(e)}))}function gi(e){if("string"!=typeof e.chatRoomId||""===e.chatRoomId)throw Error("Invalid parameter chatRoomId: "+e.chatRoomId);if("string"!=typeof e.attributeKey||""===e.attributeKey)throw Error('"Invalid parameter attributeKey": '+e.attributeKey);if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.userId,s=e.chatRoomId,c=e.attributeKey,u=e.isForced?"/forced":"",l={keys:[c]},p={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/metadata/chatroom/").concat(s,"/user/").concat(a)+u,type:"DELETE",dataType:"json",data:JSON.stringify(l),headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}};return $.debug("Call removeChatRoomAttribute:",e),Q.call(this,p,_.DELETE_CHATROOM_ATTR).then((function(e){var t=qt(e);if(t)throw t}))}var Ei=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},yi=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function vi(e){return Ei(this,void 0,void 0,(function(){var t,r,n,o,i,a,s,c,u;return yi(this,(function(l){switch(l.label){case 0:if("string"!=typeof e.description)throw Error('Invalid parameter: "description"');return Kt.call(this)?(r=this.context,n=r.accessToken,o=r.orgName,i=r.appName,a=r.userId,s=this.context.jid.clientResource,c={ext:e.description},u={url:"".concat(this.apiUrl,"/").concat(o,"/").concat(i,"/users/").concat(a,"/presence/").concat(s,"/1"),type:"POST",dataType:"json",data:JSON.stringify(c),headers:{Authorization:"Bearer "+n,"Content-Type":"application/json"},success:e.success,error:e.error},$.debug("Call publishPresence:",e),[4,Q.call(this,u)]):(t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)]);case 1:return l.sent(),[2]}}))}))}function _i(e){if(!Array.isArray(e.usernames))throw Error('Invalid parameter: "usernames"');if(!e.usernames.length)throw Error('"usernames" can not be empty');if("number"!=typeof e.expiry)throw Error('Invalid parameter: "expiry"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.userId,a=r.accessToken,s={usernames:e.usernames},c={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/users/").concat(i,"/presence/").concat(e.expiry),type:"POST",dataType:"json",data:JSON.stringify(s),headers:{Authorization:"Bearer "+a,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call subscribePresence:",e),Q.call(this,c).then((function(e){return e.data={result:null==e?void 0:e.result},e}))}function Ti(e){return Ei(this,void 0,void 0,(function(){var t,r,n,o,i,a,s;return yi(this,(function(c){switch(c.label){case 0:if(!Array.isArray(e.usernames))throw Error('Invalid parameter: "usernames"');if(!e.usernames.length)throw Error('"usernames" can not be empty');return Kt.call(this)?(r=this.context,n=r.orgName,o=r.appName,i=r.userId,a=r.accessToken,s={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/users/").concat(i,"/presence"),type:"DELETE",dataType:"json",data:JSON.stringify(e.usernames),headers:{Authorization:"Bearer "+a,"Content-Type":"application/json"},success:e.success,error:e.error},$.debug("Call unsubscribePresence:",e),[4,Q.call(this,s)]):(t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)]);case 1:return c.sent(),[2]}}))}))}function Oi(e){if("number"!=typeof e.pageNum||"number"!=typeof e.pageSize)throw Error('Invalid parameter: "pageNum or pageSize"');if(e.pageNum<0||e.pageSize<0)throw Error('"pageNum" should >= 0 and "pageSize" should >= 0');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.userId,a=r.accessToken,s={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/users/").concat(i,"/presence/sublist?pageNum=").concat(e.pageNum,"&pageSize=").concat(e.pageSize),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+a,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call getSubscribedPresenceList:",e),Q.call(this,s).then((function(e){return e.data={result:null==e?void 0:e.result},e}))}var Ri=Oi;function Ii(e){if(!Array.isArray(e.usernames))throw Error('Invalid parameter: "usernames"');if(!e.usernames.length)throw Error('"usernames" can not be empty');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r={usernames:e.usernames},n=this.context,o=n.orgName,i=n.appName,a=n.userId,s=n.accessToken,c={url:"".concat(this.apiUrl,"/").concat(o,"/").concat(i,"/users/").concat(a,"/presence"),type:"POST",dataType:"json",data:JSON.stringify(r),headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call getPresenceStatus:",e),Q.call(this,c).then((function(e){return e.data={result:null==e?void 0:e.result},e}))}function Si(e){if(!(e.options instanceof Object))throw Error('Invalid parameter: "options"');var t=e.options.paramType;if("number"!=typeof t||t<0||t>2)throw Error('Invalid parameter: "options of paramType"');if(0===t){if("string"!=typeof e.options.remindType)throw Error('Invalid parameter: "options of remindType"')}else if(1===t){if("number"!=typeof e.options.duration)throw Error('Invalid parameter: "options of duration"')}else if(2===t){var r=e.options,n=r.startTime,o=r.endTime;if(!(n instanceof Object&&Object.keys(n).length))throw Error('Invalid parameter: "options of startTime"');if(!n.hours||"number"!=typeof n.hours||!n.minutes||"number"!=typeof n.minutes)throw Error('Invalid parameter: "options of startTime of hours or minutes"');if(!(o instanceof Object&&Object.keys(o).length))throw Error('Invalid parameter: "options of endTime"');if(!o.hours||"number"!=typeof o.hours||!o.minutes||"number"!=typeof o.minutes)throw Error('Invalid parameter: "options of endTime of hours or minutes"')}if(!Kt.call(this)){var i=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(i)}var a=this.context,s=a.accessToken,c=a.orgName,u=a.appName,l=a.userId,p={};switch(t){case 0:p={type:e.options.remindType};break;case 1:p={ignoreDuration:e.options.duration};break;case 2:var d=e.options;n=d.startTime,o=d.endTime,p={ignoreInterval:"".concat(n.hours,":").concat(n.minutes,"-").concat(o.hours,":").concat(o.minutes)}}var h={url:"".concat(this.apiUrl,"/").concat(c,"/").concat(u,"/users/").concat(l,"/notification/user/").concat(l),type:"PUT",dataType:"json",data:JSON.stringify(p),headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call setSilentModeForAll:",e),Q.call(this,h)}function Ci(e){if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.accessToken,o=r.orgName,i=r.appName,a=r.userId,s={url:"".concat(this.apiUrl,"/").concat(o,"/").concat(i,"/users/").concat(a,"/notification/user/").concat(a),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+n,"Content-Type":"application/json"},success:null==e?void 0:e.success,error:null==e?void 0:e.error};return $.debug("Call getSilentModeForAll:",e),Q.call(this,s)}function Ni(e){if("string"!=typeof e.conversationId||!e.conversationId)throw Error('Invalid parameter: "conversationId"');if("string"!=typeof e.type||!e.type)throw Error('Invalid parameter: "type"');if(!(e.options instanceof Object))throw Error('Invalid parameter: "options"');var t=e.options.paramType;if("number"!=typeof t||t<0||t>2)throw Error('Invalid parameter: "options of paramType"');if(0===t){if("string"!=typeof e.options.remindType)throw Error('Invalid parameter: "options of remindType"')}else if(1===t){if("number"!=typeof e.options.duration)throw Error('Invalid parameter: "options of duration"')}else if(2===t){var r=e.options,n=r.startTime,o=r.endTime;if(!(n instanceof Object&&Object.keys(n).length))throw Error('Invalid parameter: "options of startTime"');if(!n.hours||"number"!=typeof n.hours||!n.minutes||"number"!=typeof n.minutes)throw Error('Invalid parameter: "options of startTime of hours or minutes"');if(!(o instanceof Object&&Object.keys(o).length))throw Error('Invalid parameter: "options of endTime"');if(!o.hours||"number"!=typeof o.hours||!o.minutes||"number"!=typeof o.minutes)throw Error('Invalid parameter: "options of endTime of hours or minutes"')}if(!Kt.call(this)){var i=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(i)}var a=this.context,s=a.accessToken,c=a.orgName,u=a.appName,l=a.userId,p="chatgroup",d={};switch(t){case 0:d={type:e.options.remindType};break;case 1:d={ignoreDuration:e.options.duration};break;case 2:var h=e.options;n=h.startTime,o=h.endTime,d={ignoreInterval:"".concat(n.hours,":").concat(n.minutes,"-").concat(o.hours,":").concat(o.minutes)}}"singleChat"===e.type&&(p="user");var m={url:"".concat(this.apiUrl,"/").concat(c,"/").concat(u,"/users/").concat(l,"/notification/").concat(p,"/").concat(e.conversationId),type:"PUT",dataType:"json",data:JSON.stringify(d),headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call setSilentModeForConversation:",e),Q.call(this,m)}function Ai(e){if("string"!=typeof e.conversationId||!e.conversationId)throw Error('Invalid parameter: "conversationId"');if("string"!=typeof e.type||!e.type)throw Error('Invalid parameter: "type"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.accessToken,o=r.orgName,i=r.appName,a=r.userId,s="chatgroup";"singleChat"===e.type&&(s="user");var c={url:"".concat(this.apiUrl,"/").concat(o,"/").concat(i,"/users/").concat(a,"/notification/").concat(s,"/").concat(e.conversationId),type:"PUT",dataType:"json",data:JSON.stringify({type:"DEFAULT"}),headers:{Authorization:"Bearer "+n,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call clearRemindTypeForConversation:",e),Q.call(this,c)}function bi(e){if("string"!=typeof e.conversationId||!e.conversationId)throw Error('Invalid parameter: "conversationId"');if("string"!=typeof e.type||!e.type)throw Error('Invalid parameter: "type"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.accessToken,o=r.orgName,i=r.appName,a=r.userId,s="chatgroup";"singleChat"===e.type&&(s="user");var c={url:"".concat(this.apiUrl,"/").concat(o,"/").concat(i,"/users/").concat(a,"/notification/").concat(s,"/").concat(e.conversationId),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+n,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call getSilentModeForConversation:",e),Q.call(this,c)}function Mi(e){if(!Array.isArray(e.conversationList))throw Error('Invalid parameter: "conversationList"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.accessToken,o=r.orgName,i=r.appName,a=r.userId,s=[],c=[];e.conversationList.forEach((function(e){"singleChat"===e.type?s.push(e.id):c.push(e.id)}));var u=s.length?s.join(","):"",l=c.length?c.join(","):"",p={url:"".concat(this.apiUrl,"/").concat(o,"/").concat(i,"/users/").concat(a,"/notification?user=").concat(u,"&group=").concat(l),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+n,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call getSilentModeForConversations:",e),Q.call(this,p)}function wi(e){if("string"!=typeof e.language||!e.language)throw Error('Invalid parameter: "language"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r={translationLanguage:e.language},n=this.context,o=n.accessToken,i=n.orgName,a=n.appName,s=n.userId,c={url:"".concat(this.apiUrl,"/").concat(i,"/").concat(a,"/users/").concat(s,"/notification/language"),type:"PUT",dataType:"json",data:JSON.stringify(r),headers:{Authorization:"Bearer "+o,"Content-Type":"application/json"},success:e.success,error:e.error};return $.debug("Call setPushPerformLanguage:",e),Q.call(this,c)}function Ui(e){if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.accessToken,o=r.orgName,i=r.appName,a=r.userId,s={url:"".concat(this.apiUrl,"/").concat(o,"/").concat(i,"/users/").concat(a,"/notification/language"),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+n,"Content-Type":"application/json"},success:null==e?void 0:e.success,error:null==e?void 0:e.error};return $.debug("Call getPushPerformLanguage:",e),Q.call(this,s)}var Pi=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},ki=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function Li(e){if("string"!=typeof e.name||""===e.name)throw Error("Invalid parameter name: ".concat(e.name));if("string"!=typeof e.messageId||""===e.messageId)throw Error("Invalid parameter messageId: ".concat(e.messageId));if("string"!=typeof e.parentId||""===e.parentId)throw Error("Invalid parameter parentId: ".concat(e.parentId));if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s={name:e.name,msg_id:e.messageId,group_id:e.parentId,owner:this.user},c={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/thread?resource=").concat(a.clientResource),type:"POST",dataType:"json",data:JSON.stringify(s),headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}};return Q.call(this,c).then((function(e){var t=e.data.thread_id;return e.data={chatThreadId:t},e}))}function xi(e){if("string"!=typeof e.chatThreadId||""===e.chatThreadId)throw Error("Invalid parameter chatThreadId: ".concat(e.chatThreadId));if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/thread/").concat(e.chatThreadId,"/user/").concat(this.user,"/join?resource=").concat(a.clientResource),type:"POST",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}};return Q.call(this,s).then((function(e){var t=e.data.detail;return t.messageId=t.msgId,t.parentId=t.groupId,delete t.msgId,delete t.groupId,e}))}function Di(e){return Pi(this,void 0,void 0,(function(){var t,r,n,o,i,a,s;return ki(this,(function(c){switch(c.label){case 0:if("string"!=typeof e.chatThreadId||""===e.chatThreadId)throw Error("Invalid parameter chatThreadId: ".concat(e.chatThreadId));return Kt.call(this)?(r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/thread/").concat(e.chatThreadId,"/user/").concat(this.user,"/quit?resource=").concat(a.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}},[4,Q.call(this,s)]):(t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)]);case 1:return c.sent(),[2]}}))}))}function ji(e){return Pi(this,void 0,void 0,(function(){var t,r,n,o,i,a,s;return ki(this,(function(c){switch(c.label){case 0:if("string"!=typeof e.chatThreadId||""===e.chatThreadId)throw Error("Invalid parameter chatThreadId: ".concat(e.chatThreadId));return Kt.call(this)?(r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/thread/").concat(e.chatThreadId,"?resource=").concat(a.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}},[4,Q.call(this,s)]):(t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"}),[2,Promise.reject(t)]);case 1:return c.sent(),[2]}}))}))}function Gi(e){if("string"!=typeof e.chatThreadId||""===e.chatThreadId)throw Error("Invalid parameter chatThreadId: ".concat(e.chatThreadId));if("string"!=typeof e.name||""===e.name)throw Error("Invalid parameter name: ".concat(e.name));if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s={name:e.name},c={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/thread/").concat(e.chatThreadId,"?resource=").concat(a.clientResource),type:"PUT",dataType:"json",data:JSON.stringify(s),headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}};return Q.call(this,c)}function Bi(e){if("string"!=typeof e.chatThreadId||""===e.chatThreadId)throw Error("Invalid parameter chatThreadId: ".concat(e.chatThreadId));if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a={limit:e.pageSize||20,cursor:e.cursor||""},s={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/thread/").concat(e.chatThreadId,"/users"),type:"GET",dataType:"json",data:a,headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}};return Q.call(this,s)}function Hi(e){if("string"!=typeof e.chatThreadId||""===e.chatThreadId)throw Error("Invalid parameter chatThreadId: ".concat(e.chatThreadId));if("string"!=typeof e.username||""===e.username)throw Error("Invalid parameter username: ".concat(e.username));if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a=r.jid,s={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/thread/").concat(e.chatThreadId,"/users/").concat(e.username,"?resource=").concat(a.clientResource),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}};return Q.call(this,s)}function Fi(e){if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a={limit:e.pageSize||20,cursor:e.cursor||""},s={url:e.parentId?"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/threads/chatgroups/").concat(e.parentId,"/user/").concat(this.user):"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/threads/user/").concat(this.user),type:"GET",dataType:"json",data:a,headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}};return Q.call(this,s).then((function(e){var t=e.entities;return null==t||t.forEach((function(e){e.parentId=e.groupId,e.messageId=e.msgId,delete e.groupId,delete e.msgId})),e}))}function Wi(e){if("string"!=typeof e.parentId||""===e.parentId)throw Error("Invalid parameter parentId: ".concat(e.parentId));if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a={cursor:e.cursor||"",limit:e.pageSize||20},s={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/threads/chatgroups/").concat(e.parentId),type:"GET",dataType:"json",data:a,headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}};return Q.call(this,s).then((function(e){var t=e.entities;return null==t||t.forEach((function(e){e.parentId=e.groupId,e.messageId=e.msgId,delete e.groupId,delete e.msgId})),e}))}function Ki(e){if(!Array.isArray(e.chatThreadIds))throw Error("Invalid parameter chatThreadIds: ".concat(e.chatThreadIds));if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a={threadIds:e.chatThreadIds},s={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/thread/message"),type:"POST",dataType:"json",data:JSON.stringify(a),headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}};return Q.call(this,s).then((function(e){return function(e){var t=e.entities;return null==t||t.forEach((function(e){e.chatThreadId=e.thread_id,e.last_message&&"{}"!==JSON.stringify(e.last_message)?e.lastMessage=fe(e.last_message):e.lastMessage=e.last_message,delete e.thread_id,delete e.last_message})),e}(e)}))}function Vi(e){if("string"!=typeof e.chatThreadId||""===e.chatThreadId)throw Error("Invalid parameter chatThreadId: ".concat(e.chatThreadId));if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a={url:"".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/thread/").concat(e.chatThreadId),type:"GET",dataType:"json",headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"}};return Q.call(this,a).then((function(e){return e.data.affiliationsCount=e.data.affiliations_count,e.data.messageId=e.data.msgId,e.data.parentId=e.data.groupId,delete e.data.affiliations_count,delete e.data.msgId,delete e.data.groupId,e}))}function qi(){if(!Kt.call(this)){var e=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(e)}var t=this.context,r=t.orgName,n=t.appName,o=t.accessToken,i={url:"".concat(this.apiUrl,"/").concat(r,"/").concat(n,"/users/").concat(this.user,"/translate/support/language"),dataType:"json",type:"GET",headers:{Authorization:"Bearer "+o}};return $.debug("Call getSupportedLanguages"),Q.call(this,i)}function zi(e){if("string"!=typeof e.text||""===e.text)throw Error('Invalid parameter: "text"');if(!Array.isArray(e.languages))throw Error('Invalid parameter: "language"');if(!Kt.call(this)){var t=y.create({type:f.REST_PARAMS_STATUS,message:"appkey or token error"});return Promise.reject(t)}var r=this.context,n=r.orgName,o=r.appName,i=r.accessToken,a="".concat(this.apiUrl,"/").concat(n,"/").concat(o,"/users/").concat(this.user,"/translate"),s={text:e.text,to:e.languages},c={url:a,dataType:"json",type:"POST",data:JSON.stringify(s),headers:{Authorization:"Bearer "+i}};return $.debug("Call translateMessage"),Q.call(this,c)}var Ji=function(){return Ji=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ji.apply(this,arguments)},$i=le.getEnvInfo(),Yi="web"===$i.platform,Xi=function(){},Qi={CLOSED:3,CLOSING:2,CONNECTING:0,OPEN:1},Zi=function(){function e(n){var o;if(this.name="connection",this.max_cache_length=100,this.isDebug=n.isDebug||!1,this.isReport=!1,this.isHttpDNS=void 0===n.isHttpDNS?Yi:n.isHttpDNS,this.heartBeatWait=n.heartBeatWait||3e4,this.autoReconnectNumMax=n.autoReconnectNumMax||5,this.refreshDNSIntervals=this.autoReconnectNumMax<5?this.autoReconnectNumMax:5,this.delivery=n.delivery||!1,this.dnsArr=["https://rs.easemob.com","https://rs.chat.agora.io","http://59.110.89.59","http://39.97.193.190","http://39.97.193.187"],this.dnsIndex=0,this.dnsTotal=this.dnsArr.length,this.restHosts=[],this.restTotal=0,this.restIndex=0,this.hostIndex=0,this.socketHost=[],this.hostTotal=0,this.times=1,this.autoReconnectNumTotal=0,this.domain="easemob.com",this.appKey=n.appKey,this.appName="",this.orgName="",this.token="",this.grantType="",this.apiUrl=n.apiUrl||"",this.url=n.url||"",this.https=n.https||"undefined"!=typeof window&&"https:"===(null===(o=window.location)||void 0===o?void 0:o.protocol),this.version="4.1.7",this.deviceId=n.deviceId||"webim",this.osType=16,this.useOwnUploadFun=n.useOwnUploadFun||!1,this.compressType=[0],this.encryptType=[0],this.clientResource="",this.expiresIn=0,this.expirationTime=0,this.logOut=!0,this.context={jid:{appKey:"",clientResource:"",domain:"easemob.com",name:""},userId:"",appKey:"",status:0,restTokenData:"",appName:"",orgName:"",root:{},accessToken:""},this._msgHash={},this._msgPromiseHash={},this._queues=[],this._load_msg_cache=[],this.unMSyncSendMsgMap=new Map,this.mr_cache={},this.closeInfo=null,this.reconnecting=!1,"string"!=typeof this.appKey||2!==this.appKey.split("#").length)throw Error("Illegal appKey: ".concat(this.appKey));new F({conn:this});var i=this.appKey.split("#");this.orgName=i[0],this.appName=i[1],this.listen=Ct.bind(this),this.mSync=this.usePlugin(Rt),this.eventHandler=this.usePlugin(It),Object.assign(e.prototype,t),Object.assign(e.prototype,r),Object.assign(e.prototype,a),Object.assign(e.prototype,s),Object.assign(e.prototype,u),Object.assign(e.prototype,l),Object.assign(e.prototype,p),this.dataReport=new Ht({appkey:this.appKey,org:this.orgName,sdkVersion:this.version,deviceId:this.deviceId,isReport:this.isReport});var c=Ji(Ji({},n),{appKey:D(n.appKey),version:this.version});n.apiUrl&&(c.apiUrl=G(n.apiUrl)),n.url&&(c.url=G(n.url)),$.debug("Initialized",c);var d=0,h=this;Object.defineProperty(le,"ajaxUnconventionalErrorTimes",{set:function(e){0!==e&&($.debug("rest api request fail times: ".concat(e)),(d=e)%5==0&&this.isHttpDNS&&($.debug("refresh dns config when rest request fail."),sa.call(h,"refresh",{},{})))},get:function(){return d}})}return e.prototype.usePlugin=function(e,t){if(!t)return new e(this);this[t]=new e(this)},e.prototype.listen=function(e){},e.prototype.addEventHandler=function(e,t){},e.prototype.removeEventHandler=function(e){},e.prototype.registerUser=function(e){var t=this;return new Promise((function(r,n){var o=t.dataReport.geOperateFun({uid:e.username,operationName:_.REGISTER});if(t.isHttpDNS){t.dnsIndex=0;var i=Ji(Ji({},e),{user:e.username,pwd:e.password,promise:{resolve:r,reject:n}});sa.call(t,"signup",i,{rpt:o})}else i=Ji(Ji({},e),{promise:{resolve:r,reject:n}}),ea.call(t,i,{rpt:o})}))},e.prototype.open=function(e){var t=this;return $.debug("open",e.user),new Promise((function(r,n){if(ia.call(t,e)){e.accessToken&&(t.token=e.accessToken);var o=Ji(Ji({},e),{promise:{resolve:r,reject:n}}),i=t.dataReport.geOperateFun({uid:e.user,operationName:_.LOGIN});t.isHttpDNS?sa.call(t,"login",o,{rpt:i}):ta.call(t,o,{rpt:i})}}))},e.prototype.isOpened=function(){return this.sock&&this.sock.readyState===Qi.OPEN||!1},e.prototype.close=function(){var e;this.logOut=!0,this.reconnecting=!1,this.context.status=f.STATUS_CLOSING,this.sock&&this.sock.close(),null===(e=this.unMSyncSendMsgMap)||void 0===e||e.clear(),this.stopHeartBeat(),this.rejectMessage(),this.rejectContactsOperate(),this.context.status=f.STATUS_CLOSED,this._load_msg_cache=[],this._queues=[],this._msgHash={},this.mr_cache={},this.token="",this.context.accessToken=""},e.prototype.stopHeartBeat=function(){clearInterval(this.heartBeatID)},e.prototype.clear=function(){this.restTotal=0,this.restIndex=0,this.hostIndex=0,this.hostTotal=0},e.prototype.heartBeat=function(){},e.prototype.renewToken=function(e){var t=this;return this.isOpened()?this.getChatToken(e).then((function(e){var r=Date.now();return t.expirationTime=e.expire_timestamp,t.expiresIn=e.expire_timestamp-r,t.token=e.access_token,t.context.accessToken=e.access_token,t.clearTokenTimeout(),t.tokenExpireTimeCountDown(t.expiresIn),{status:!0,token:e.access_token,expire:e.expire_timestamp}})):Promise.reject({status:!1})},e.prototype.clearTokenTimeout=function(){$.debug("clearTokenTimeout"),this.tokenWillExpireTimer&&clearTimeout(this.tokenWillExpireTimer),this.tokenExpiredTimer&&clearTimeout(this.tokenExpiredTimer)},e.prototype.tokenExpireTimeCountDown=function(e){var t=this;e>Math.pow(2,31)-1&&(e=Math.pow(2,31)-1),this.tokenWillExpireTimer=setTimeout((function(){var r;t.onTokenWillExpire&&t.onTokenWillExpire(),null===(r=t.eventHandler)||void 0===r||r.dispatch("onTokenWillExpire"),$.info("onTokenWillExpire",e)}),e/2),this.tokenExpiredTimer=setTimeout((function(){var r;$.info("onTokenExpired",e),t.onTokenExpired&&t.onTokenExpired(),null===(r=t.eventHandler)||void 0===r||r.dispatch("onTokenExpired"),t.close()}),e)},e.prototype.compareTokenExpireTime=function(e,t){var r,n=Number(t)-Number(e);$.debug("compareTokenExpireTime",n),n<=this.expiresIn/2&&n>0?(this.onTokenWillExpire&&this.onTokenWillExpire(),null===(r=this.eventHandler)||void 0===r||r.dispatch("onTokenWillExpire"),$.info("onTokenWillExpire",n)):n<=0&&(this.closeByTokenExpired(),$.info("closeByTokenExpired",n))},e.prototype.closeByTokenExpired=function(){var e;$.info("closed By TokenExpired"),this.onTokenExpired&&this.onTokenExpired(),null===(e=this.eventHandler)||void 0===e||e.dispatch("onTokenExpired"),this.close()},e.prototype.rejectMessage=function(){var e=this,t=Object.keys(this._msgHash);if(t.length>0){var r=y.create({type:f.MESSAGE_WEBSOCKET_DISCONNECTED,message:"websocket disconnected"});t.forEach((function(t){var n;(null===(n=e.unMSyncSendMsgMap)||void 0===n?void 0:n.has(t))||(e._msgHash[t].reject instanceof Function&&e._msgHash[t].reject(r),e._msgHash[t].fail instanceof Function&&e._msgHash[t].fail(r),delete e._msgHash[t])}))}},e.prototype.rejectContactsOperate=function(){Array.from(C.values()).forEach((function(e){null==e||e.reject()})),C.clear()},e.prototype.resetConnState=function(){this.mSync.stopHeartBeat(),this.times=1,this.autoReconnectNumTotal=0,this.hostIndex=0},e.prototype.reconnect=function(){var e,t=this;this.sock.readyState!==Qi.CONNECTING&&this.sock.readyState!==Qi.OPEN&&($.info("reconnect: time",this.times),$.info("reconnect sock.readyState: ",this.sock.readyState),!1===this.reconnecting&&(this.reconnecting=!0),null===(e=this.eventHandler)||void 0===e||e.dispatch("onReconnecting"),this.rejectMessage(),this.rejectContactsOperate(),this.isHttpDNS&&(this.hostIndex<this.socketHost.length-1?this.hostIndex++:this.hostIndex=this.socketHost.length-1),setTimeout((function(){t.sock.readyState!==Qi.OPEN&&($.info("login sock.readyState: ",t.sock.readyState),t.sock.close(),oa.call(t,{access_token:t.context.accessToken}),t.times++)}),500*this.times),this.autoReconnectNumTotal++)},e.prototype.send=function(e){return Promise.resolve(null)},e._getSock=function(){},e}();function ea(e,t){var r=this,n=t.rpt,o=t.isRetry,i=e.promise,a=this.apiUrl+"/"+this.orgName+"/"+this.appName+"/users",s={requestName:T.RESISTER,requestUrl:a},c=e.error||Xi;if(!this.orgName&&!this.appName){var u=y.create({type:f.WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR,message:"signup error"});c(u)}var l={headers:{"Content-type":"application/json"},url:a,dataType:"json",data:JSON.stringify({username:e.username,password:e.password,nickname:e.nickname||""}),success:function(t){e.success&&e.success(t);var r=Ji(Ji({},t),{type:f.REQUEST_SUCCESS});i.resolve&&i.resolve(r);var a=t.extraInfo,c=a.httpCode,u=a.elapse;n({isEndApi:!0,isRetry:o,data:Ji(Ji({},{requestElapse:u,isSuccess:1,code:c}),s)})},error:function(t){var a=t.extraInfo,u=a.elapse,l=a.httpCode,p=a.errDesc;return n({isRetry:o,data:Ji(Ji({},{requestElapse:u,isSuccess:0,code:l,codeDesc:p}),s)}),r.isHttpDNS&&r.restIndex+1<r.restTotal?(r.restIndex++,ca.call(r),ea.call(r,e,{rpt:n,isRetry:o}),Promise.reject(t)):(n({data:{isLastApi:1,isSuccess:0}}),r.clear(),i.reject&&i.reject(t),c(t))}};return le.ajax(l).catch((function(e){i.reject&&i.reject(e)}))}function ta(t,r){var n=this;if(ia.call(this,t)&&!this.isOpened()){var o=r.rpt,i=r.isRetry;aa.call(this,t),this.user=t.user;var a=t.promise,s=this.context.appName,c=this.context.orgName,u=this.apiUrl+"/"+c+"/"+s+"/token";if(t.agoraToken)this.grantType="agoraToken",this.getChatToken(t.agoraToken).then((function(e){$.info("getChatToken result:",e),n.expirationTime=e.expire_timestamp,n.token=e.access_token,n.context.accessToken=e.access_token,n.context.restTokenData=e.access_token;var r=e.extraInfo,i=r.httpCode,s=r.elapse;a.resolve({accessToken:e.access_token,expireTimestamp:e.expire_timestamp});var c={requestName:T.LOGIN_BY_AGORA_TOKEN,requestUrl:u,requestElapse:s,isSuccess:1,code:i};o({data:c}),oa.call(n,Ji(Ji({},t),{access_token:e.access_token}),o)})).catch((function(e){var t,r=y.create({type:f.WEBIM_CONNCTION_GETROSTER_ERROR,message:"get chat token fail",data:e});a.reject(r),n.onError&&n.onError(r),null===(t=n.eventHandler)||void 0===t||t.dispatch("onError",r);var i=e.extraInfo,s=i.elapse,c=i.httpCode,l=i.errDesc,p={requestName:T.LOGIN_BY_AGORA_TOKEN,requestUrl:u,requestElapse:s,isSuccess:0,code:c,codeDesc:l};o({data:p}),o({data:{isLastApi:1,isSuccess:0}})}));else if(t.accessToken)this.grantType="accessToken",this.token=t.accessToken,this.context.accessToken=t.accessToken,this.context.restTokenData=t.accessToken,a.resolve({accessToken:t.accessToken}),oa.call(this,t,o);else{this.grantType="password";var l={grant_type:"password",username:t.user,password:t.pwd,timestamp:+new Date},p=JSON.stringify(l),d={headers:{"Content-type":"application/json"},url:u,dataType:"json",data:p,success:function(e){"function"==typeof t.success&&t.success(e),n.token=e.access_token,n.context.restTokenData=e.access_token,n.context.accessToken=e.access_token,n.expiresIn=e.expires_in,n.clearTokenTimeout(),n.tokenExpireTimeCountDown(1e3*n.expiresIn),a.resolve({accessToken:e.access_token,duration:e.expires_in});var r=e.extraInfo,s=r.httpCode,c=r.elapse,l={requestName:T.LOGIN_BY_PWD,requestElapse:c,requestUrl:u,isSuccess:1,code:s};o({isRetry:i,data:l}),oa.call(n,e,o)}||Xi,error:function(e){var r,s=e.extraInfo,c=s.elapse,l=s.httpCode,p=s.errDesc,d={requestName:T.LOGIN_BY_PWD,requestElapse:c,requestUrl:u,isSuccess:0,code:l,codeDesc:p};if(o({isRetry:i,data:d}),n.isHttpDNS&&n.restIndex+1<n.restTotal)return n.restIndex++,ca.call(n),void ta.call(n,t,{rpt:o,isRetry:!0});o({data:{isLastApi:1,isSuccess:0}}),n.clear(),e.error&&e.error_description?(r=y.create({type:f.WEBIM_CONNCTION_OPEN_USERGRID_ERROR,message:e.error_description,data:e}),n.onError&&n.onError(r)):(r=y.create({type:f.WEBIM_CONNCTION_OPEN_ERROR,message:e.error_description,data:e}),n.onError&&n.onError(r)),"function"==typeof t.error&&t.error(r),a.reject(r)}||Xi,version:"4.0.8"};le.ajax(d).catch((function(t){e("warn",t," at SDK/4.1.7-uniapp-log.js:1")}))}le.listenNetwork(ra.bind(this),na.bind(this))}}function ra(){var e;$.debug("online"),this.onOnline&&this.onOnline(),null===(e=this.eventHandler)||void 0===e||e.dispatch("onOnline"),this.sock&&1!==this.sock.readyState&&($.debug("sock.readyState:",this.sock.readyState),this.logOut||this.reconnecting||this.reconnect())}function na(){var e;$.debug("offline"),this.onOffline&&this.onOffline(),null===(e=this.eventHandler)||void 0===e||e.dispatch("onOffline")}function oa(e,t){var r=this,n=this._getSock();this.sock=n;var o=function(){var e;$.debug("websockt onOpen"),t&&t({data:{isLastApi:1,isSuccess:1,accessChannel:null===(e=r.socketHost[r.hostIndex])||void 0===e?void 0:e.channel}});var o=le.flow([r.mSync.generateProvision,r.mSync.base64transform])();try{n.send(o)}catch(e){var i=y.create({type:f.SDK_RUNTIME_ERROR,message:"send message error",data:e});r.onError&&r.onError(i)}},i=function(e){setTimeout((function(){var t,n,o,i,a,s;$.debug("websocket onClose"),"zfb"!==$i.platform&&"dd"!==$i.platform||(r.sock.readyState=Qi.CLOSED);var c=401===(null==e?void 0:e.code)||401===(null===(t=r.closeInfo)||void 0===t?void 0:t.code);if(r.logOut)r.clear(),r.resetConnState(),c&&($.debug("websocket provision error"),r.closeInfo=null),r.onClosed&&r.onClosed(),null===(n=r.eventHandler)||void 0===n||n.dispatch("onDisconnected");else if(c){$.debug("websocket provision error");var u={type:f.WEBIM_CONNECTION_ERROR,message:"provision error",data:e};r.closeInfo=null,r.onError&&r.onError(u),null===(o=r.eventHandler)||void 0===o||o.dispatch("onError",u),r.onClosed&&r.onClosed(),null===(i=r.eventHandler)||void 0===i||i.dispatch("onDisconnected"),r.resetConnState()}else if(r.autoReconnectNumTotal<r.autoReconnectNumMax){r.reconnect();var l={type:f.WEBIM_CONNCTION_DISCONNECTED,message:"websocket has been disconnected"};r.onError&&r.onError(l),r.autoReconnectNumTotal%r.refreshDNSIntervals==0&&"web"===$i.platform&&r.isHttpDNS&&($.debug("refresh dns config when websocket close"),sa.call(r,"refresh",{},{}))}else null===(a=r.unMSyncSendMsgMap)||void 0===a||a.clear(),r.rejectMessage(),l={type:f.WEBIM_CONNCTION_DISCONNECTED,message:"websocket has been disconnected"},r.onError&&r.onError(l),r.onClosed&&r.onClosed(),null===(s=r.eventHandler)||void 0===s||s.dispatch("onDisconnected"),r.resetConnState(),r.reconnecting=!1,$.debug("reconnect fail")}),0)},a=function(e){var t=r.mSync,n=t.decodeMSync,o=t.distributeMSync;le.flow([n,o])(e)};"web"===$i.platform?(n.onopen=o,n.onclose=i,n.onmessage=a):(n.onOpen(o),n.onMessage(a),n.onClose(i),"undefined"!=typeof window&&window.WebSocket||n.onError((function(e){var n,o,i;if($.debug("mini program sock on error",e),r.onError&&r.onError({type:f.WEBIM_CONNECTION_ERROR,message:"on socket error",data:e}),!r.logOut)if(r.autoReconnectNumTotal<r.autoReconnectNumMax)$.debug("sock.onError reconnect",r.autoReconnectNumTotal,r.autoReconnectNumMax),r.reconnect(),r.autoReconnectNumTotal%r.refreshDNSIntervals==0&&"web"===$i.platform&&r.isHttpDNS&&($.debug("refresh dns config when websocket error"),sa.call(r,"refresh",{},{}));else{var a={type:f.WEBIM_CONNCTION_DISCONNECTED,message:"websocket has been disconnected"};null===(n=r.unMSyncSendMsgMap)||void 0===n||n.clear(),r.rejectMessage(),r.onError&&r.onError(a),r.onClosed&&r.onClosed(),null===(o=r.eventHandler)||void 0===o||o.dispatch("onDisconnected"),r.resetConnState(),r.reconnecting=!1,$.debug("reconnect fail")}t&&t({data:{isLastApi:1,isSuccess:0,accessChannel:null===(i=r.socketHost[r.hostIndex])||void 0===i?void 0:i.channel}})})))}function ia(e){if(""===e.user){var t=y.create({type:f.WEBIM_CONNCTION_USER_NOT_ASSIGN_ERROR,message:"the user cannot be empty"});return $.debug("open params error",t),this.onError&&this.onError(t),!1}var r=this.appKey.split("#");return!(2!==r.length||!r[0]||!r[1])||(t=y.create({type:f.WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR,message:"the appKey is illegal"}),$.debug("open params error",t),this.onError&&this.onError(t),!1)}function aa(e){this.context.jid={appKey:this.appKey,name:e.user,domain:this.domain,clientResource:this.clientResource};var t=this.appKey.split("#"),r=t[0],n=t[1];this.context.root=this.root,this.context.userId=e.user,this.context.appKey=this.appKey,this.context.appName=n,this.context.orgName=r}function sa(t,r,n){var o=this,i=n.rpt,a=n.isRetry,s=this.dnsArr[this.dnsIndex]+"/easemob/server.json",c={url:s,dataType:"json",type:"GET",data:{app_key:encodeURIComponent(this.appKey)},success:function(e){var n=e.extraInfo,c=n.elapse,u=n.httpCode,l={requestUrl:s,requestName:T.GET_DNS,requestElapse:c,isSuccess:1,code:u};"true"===(null==e?void 0:e.enableDataReport)?(o.dataReport.setIsCollectDt(!0),o.dataReport.setIsReportDt(!0)):(o.dataReport.setIsReportDt(!1),o.dataReport.setIsCollectDt(!1)),i&&i({isRetry:a,data:l});var p=e.rest.hosts,d=o.https?"https":"http";if($.info("httpType: "+d),!p)return Promise.reject(!1);for(var h=p.filter((function(e){if(e.protocol===d)return e})),f=0;f<h.length;f++)if(h[f].protocol===d){var m=h[f];h.splice(f,1),h.unshift(m)}o.restHosts=h,o.restTotal=h.length;var g=e["msync-ws"].hosts;if(!g)return Promise.reject(!1);var E=g.filter((function(e){return e.protocol===d&&e}));o.socketHost=E,o.hostTotal=E.length,ca.call(o),"refresh"!==t&&("login"===t?ta.call(o,r,{rpt:i}):ea.call(o,r,{rpt:i}))}||Xi,error:function(e){var n=e.extraInfo,c=n.elapse,u=n.httpCode,l=n.errDesc,p={requestUrl:s,requestName:T.GET_DNS,isSuccess:0,code:u,codeDesc:l,requestElapse:c};i&&i({isRetry:a,data:p}),$.debug("getHttpDNS fail: "+o.dnsIndex),o.dnsIndex++,o.dnsIndex<o.dnsTotal&&sa.call(o,t,r,{rpt:i,isRetry:!0})}||Xi};return le.ajax(c).catch((function(t){e("warn",t," at SDK/4.1.7-uniapp-log.js:1")}))}function ca(){var e,t;if(this.restIndex>this.restTotal)return $.debug("restIndex > restTotal"),"";var r="",n=this.restHosts[this.restIndex],o=n.domain,i=n.ip,a=n.port,s=this.https?"https:":"http:";return i&&"undefined"!=typeof window&&"http:"===(null===(e=null===window||void 0===window?void 0:window.location)||void 0===e?void 0:e.protocol)?r=s+"//"+i+":"+a:(r=s+"//"+o,a&&"80"!==a&&"443"!==a&&(r+=":".concat(a)),"undefined"==typeof window||window.location||(r="https://"+o),"undefined"!=typeof window&&window.location&&"file:"===(null===(t=window.location)||void 0===t?void 0:t.protocol)&&(r="https://"+o)),"undefined"==typeof window&&(r=s+"//"+o),this.apiUrl=r,r}var ua=le.getEnvInfo(),la=ua.global;m.util.Long=E(),m.configure();var pa=m.Root.fromJSON({nested:{easemob:{nested:{pb:{nested:{MessageBody:{fields:{type:{type:"Type",id:1},from:{type:"JID",id:2},to:{type:"JID",id:3},contents:{rule:"repeated",type:"Content",id:4},ext:{rule:"repeated",type:"KeyValue",id:5},ackMessageId:{type:"uint64",id:6},msgConfig:{type:"MessageConfig",id:7},ackContent:{type:"string",id:8},meta:{type:"string",id:9}},nested:{Content:{fields:{type:{type:"Type",id:1},text:{type:"string",id:2},latitude:{type:"double",id:3},longitude:{type:"double",id:4},address:{type:"string",id:5},displayName:{type:"string",id:6},remotePath:{type:"string",id:7},secretKey:{type:"string",id:8},fileLength:{type:"int32",id:9},action:{type:"string",id:10},params:{rule:"repeated",type:"KeyValue",id:11},duration:{type:"int32",id:12},size:{type:"Size",id:13},thumbnailRemotePath:{type:"string",id:14},thumbnailSecretKey:{type:"string",id:15},thumbnailDisplayName:{type:"string",id:16},thumbnailFileLength:{type:"int32",id:17},thumbnailSize:{type:"Size",id:18},customEvent:{type:"string",id:19},customExts:{rule:"repeated",type:"KeyValue",id:20},buildingName:{type:"string",id:21}},nested:{Type:{values:{TEXT:0,IMAGE:1,VIDEO:2,LOCATION:3,VOICE:4,FILE:5,COMMAND:6,CUSTOM:7}},Size:{fields:{width:{type:"double",id:1},height:{type:"double",id:2}}}}},Type:{values:{NORMAL:0,CHAT:1,GROUPCHAT:2,CHATROOM:3,READ_ACK:4,DELIVER_ACK:5,RECALL:6,CHANNEL_ACK:7}},MessageConfig:{fields:{allowGroupAck:{type:"bool",id:1}}}}},KeyValue:{oneofs:{value:{oneof:["varintValue","floatValue","doubleValue","stringValue"]}},fields:{key:{type:"string",id:1},type:{type:"ValueType",id:2},varintValue:{type:"int64",id:3},floatValue:{type:"float",id:4},doubleValue:{type:"double",id:5},stringValue:{type:"string",id:6}},nested:{ValueType:{values:{BOOL:1,INT:2,UINT:3,LLINT:4,FLOAT:5,DOUBLE:6,STRING:7,JSON_STRING:8}}}},JID:{fields:{appKey:{type:"string",id:1},name:{type:"string",id:2},domain:{type:"string",id:3},clientResource:{type:"string",id:4}}},ConferenceBody:{fields:{sessionId:{type:"string",id:1},operation:{type:"Operation",id:2},conferenceId:{type:"string",id:3},type:{type:"Type",id:4},content:{type:"string",id:5},network:{type:"string",id:6},version:{type:"string",id:7},identity:{type:"Identity",id:8},duration:{type:"string",id:9},peerName:{type:"string",id:10},endReason:{type:"EndReason",id:11},status:{type:"Status",id:12},isDirect:{type:"bool",id:13},controlType:{type:"StreamControlType",id:14},routeFlag:{type:"int32",id:15},routeKey:{type:"string",id:16}},nested:{Status:{fields:{errorCode:{type:"int32",id:1}}},Operation:{values:{JOIN:0,INITIATE:1,ACCEPT_INITIATE:2,ANSWER:3,TERMINATE:4,REMOVE:5,STREAM_CONTROL:6,MEDIA_REQUEST:7}},Type:{values:{VOICE:0,VIDEO:1}},Identity:{values:{CALLER:0,CALLEE:1}},EndReason:{values:{HANGUP:0,NORESPONSE:1,REJECT:2,BUSY:3,FAIL:4,UNSUPPORTED:5,OFFLINE:6}},StreamControlType:{values:{PAUSE_VOICE:0,RESUME_VOICE:1,PAUSE_VIDEO:2,RESUME_VIDEO:3}}}},MSync:{fields:{version:{type:"Version",id:1,options:{default:"MSYNC_V1"}},guid:{type:"JID",id:2},auth:{type:"string",id:3},compressAlgorimth:{type:"uint32",id:4},crypto:{type:"uint32",id:5},userAgent:{type:"string",id:6},pov:{type:"uint64",id:7},command:{type:"Command",id:8},deviceId:{type:"uint32",id:10},encryptType:{rule:"repeated",type:"EncryptType",id:11,options:{packed:!1}},encryptKey:{type:"string",id:12},payload:{type:"bytes",id:9}},nested:{Version:{values:{MSYNC_V1:0,MSYNC_V2:1}},Command:{values:{SYNC:0,UNREAD:1,NOTICE:2,PROVISION:3}}}},EncryptType:{values:{ENCRYPT_NONE:0,ENCRYPT_AES_128_CBC:1,ENCRYPT_AES_256_CBC:2}},CommSyncUL:{fields:{meta:{type:"Meta",id:1},key:{type:"uint64",id:2},queue:{type:"JID",id:3},isRoam:{type:"bool",id:4},lastFullRoamKey:{type:"uint64",id:5}}},CommSyncDL:{fields:{status:{type:"Status",id:1},metaId:{type:"uint64",id:2},serverId:{type:"uint64",id:3},metas:{rule:"repeated",type:"Meta",id:4},nextKey:{type:"uint64",id:5},queue:{type:"JID",id:6},isLast:{type:"bool",id:7},timestamp:{type:"uint64",id:8},isRoam:{type:"bool",id:9}}},CommNotice:{fields:{queue:{type:"JID",id:1}}},CommUnreadUL:{fields:{}},CommUnreadDL:{fields:{status:{type:"Status",id:1},unread:{rule:"repeated",type:"MetaQueue",id:2},timestamp:{type:"uint64",id:3}}},MetaQueue:{fields:{queue:{type:"JID",id:1},n:{type:"uint32",id:2}}},Meta:{fields:{id:{type:"uint64",id:1},from:{type:"JID",id:2},to:{type:"JID",id:3},timestamp:{type:"uint64",id:4},ns:{type:"NameSpace",id:5},payload:{type:"bytes",id:6},routetype:{type:"RouteType",id:7},ext:{type:"KeyValue",id:8},meta:{type:"bytes",id:9},directedUsers:{rule:"repeated",type:"string",id:10}},nested:{NameSpace:{values:{STATISTIC:0,CHAT:1,MUC:2,ROSTER:3,CONFERENCE:4,NOTIFY:5,QUERY:6}},RouteType:{values:{ROUTE_ALL:0,ROUTE_ONLINE:1,ROUTE_DIRECT:2}}}},Status:{fields:{errorCode:{type:"ErrorCode",id:1},reason:{type:"string",id:2},redirectInfo:{rule:"repeated",type:"RedirectInfo",id:3}},nested:{ErrorCode:{values:{OK:0,FAIL:1,UNAUTHORIZED:2,MISSING_PARAMETER:3,WRONG_PARAMETER:4,REDIRECT:5,TOKEN_EXPIRED:6,PERMISSION_DENIED:7,NO_ROUTE:8,UNKNOWN_COMMAND:9,PB_PARSER_ERROR:10,BIND_ANOTHER_DEVICE:11,IM_FORBIDDEN:12,TOO_MANY_DEVICES:13,PLATFORM_LIMIT:14,USER_MUTED:15,ENCRYPT_DISABLE:16,ENCRYPT_ENABLE:17,DECRYPT_FAILURE:18,PERMISSION_DENIED_EXTERNAL:19}}}},RedirectInfo:{fields:{host:{type:"string",id:1},port:{type:"uint32",id:2}}},Provision:{fields:{osType:{type:"OsType",id:1},version:{type:"string",id:2},networkType:{type:"NetworkType",id:3},appSign:{type:"string",id:4},compressType:{rule:"repeated",type:"CompressType",id:5,options:{packed:!1}},encryptType:{rule:"repeated",type:"EncryptType",id:6,options:{packed:!1}},encryptKey:{type:"string",id:7},status:{type:"Status",id:8},deviceUuid:{type:"string",id:9},isManualLogin:{type:"bool",id:10},password:{type:"string",id:11},deviceName:{type:"string",id:12},resource:{type:"string",id:13},auth:{type:"string",id:14},serviceId:{type:"string",id:16},actionVersion:{type:"string",id:17}},nested:{OsType:{values:{OS_IOS:0,OS_ANDROID:1,OS_LINUX:2,OS_OSX:3,OS_WIN:4,OS_OTHER:16}},NetworkType:{values:{NETWORK_NONE:0,NETWORK_WIFI:1,NETWORK_4G:2,NETWORK_3G:3,NETWORK_2G:4,NETWORK_WIRE:5}},CompressType:{values:{COMPRESS_NONE:0,COMPRESS_ZLIB:1}}}},MUCBody:{fields:{mucId:{type:"JID",id:1},operation:{type:"Operation",id:2},from:{type:"JID",id:3},to:{rule:"repeated",type:"JID",id:4},setting:{type:"Setting",id:5},reason:{type:"string",id:6},isChatroom:{type:"bool",id:7},status:{type:"Status",id:8},isThread:{type:"bool",id:9},mucParentId:{type:"JID",id:10},mucName:{type:"string",id:11},eventInfo:{type:"EventInfo",id:12}},nested:{Operation:{values:{CREATE:0,DESTROY:1,JOIN:2,LEAVE:3,APPLY:4,APPLY_ACCEPT:5,APPLY_DECLINE:6,INVITE:7,INVITE_ACCEPT:8,INVITE_DECLINE:9,KICK:10,GET_BLACKLIST:11,BAN:12,ALLOW:13,UPDATE:14,BLOCK:15,UNBLOCK:16,PRESENCE:17,ABSENCE:18,DIRECT_JOINED:19,ASSIGN_OWNER:20,ADD_ADMIN:21,REMOVE_ADMIN:22,ADD_MUTE:23,REMOVE_MUTE:24,UPDATE_ANNOUNCEMENT:25,DELETE_ANNOUNCEMENT:26,UPLOAD_FILE:27,DELETE_FILE:28,ADD_USER_WHITE_LIST:29,REMOVE_USER_WHITE_LIST:30,BAN_GROUP:31,REMOVE_BAN_GROUP:32,THREAD_CREATE:33,THREAD_DESTROY:34,THREAD_JOIN:35,THREAD_LEAVE:36,THREAD_KICK:37,THREAD_UPDATE:38,THREAD_PRESENCE:39,THREAD_ABSENCE:40,DISABLE_GROUP:41,ABLE_GROUP:42,SET_METADATA:43,DELETE_METADATA:44,GROUP_MEMBER_METADATA_UPDATE:45}},Setting:{fields:{name:{type:"string",id:1},desc:{type:"string",id:2},type:{type:"Type",id:3},maxUsers:{type:"int32",id:4},owner:{type:"string",id:5}},nested:{Type:{values:{PRIVATE_OWNER_INVITE:0,PRIVATE_MEMBER_INVITE:1,PUBLIC_JOIN_APPROVAL:2,PUBLIC_JOIN_OPEN:3,PUBLIC_ANONYMOUS:4}}}},Status:{fields:{errorCode:{type:"ErrorCode",id:1},description:{type:"string",id:2}},nested:{ErrorCode:{values:{OK:0,PERMISSION_DENIED:1,WRONG_PARAMETER:2,MUC_NOT_EXIST:3,USER_NOT_EXIST:4,UNKNOWN:5}}}},EventInfo:{fields:{eventType:{type:"EventType",id:1,options:{default:"EVENT_NONE"}},ext:{type:"string",id:2}},nested:{EventType:{values:{EVENT_NONE:0,CIRCLE_CHANNEL:1}}}}}},RosterBody:{fields:{operation:{type:"Operation",id:1},status:{type:"Status",id:2},from:{type:"JID",id:3},to:{rule:"repeated",type:"JID",id:4},reason:{type:"string",id:5},rosterVer:{type:"string",id:6},biDirection:{type:"bool",id:7}},nested:{Operation:{values:{GET_ROSTER:0,GET_BLACKLIST:1,ADD:2,REMOVE:3,ACCEPT:4,DECLINE:5,BAN:6,ALLOW:7,REMOTE_ACCEPT:8,REMOTE_DECLINE:9}},Status:{fields:{errorCode:{type:"ErrorCode",id:1},description:{type:"string",id:2}},nested:{ErrorCode:{values:{OK:0,USER_NOT_EXIST:1,USER_ALREADY_FRIEND:2,USER_ALREADY_BLACKLIST:3}}}}}},StatisticsBody:{fields:{operation:{type:"Operation",id:1},os:{type:"OsType",id:2},version:{type:"string",id:3},network:{type:"NetworkType",id:4},imTime:{type:"uint32",id:5},chatTime:{type:"uint32",id:6},location:{type:"string",id:7}},nested:{Operation:{values:{INFORMATION:0,USER_REMOVED:1,USER_LOGIN_ANOTHER_DEVICE:2,USER_KICKED_BY_CHANGE_PASSWORD:3,USER_KICKED_BY_OTHER_DEVICE:4}},OsType:{values:{OS_IOS:0,OS_ANDROID:1,OS_LINUX:2,OS_OSX:3,OS_WIN:4,OS_OTHER:16}},NetworkType:{values:{NETWORK_NONE:0,NETWORK_WIFI:1,NETWORK_4G:2,NETWORK_3G:3,NETWORK_2G:4,NETWORK_WIRE:5}}}}}}}}}});Zi.prototype.root=pa;var da=function(e){this.onOpen=la.onSocketOpen,this.onClose=la.onSocketClose,this.onMessage=la.onSocketMessage,this.onError=la.onSocketError,this.close=la.closeSocket,this.send=la.sendSocketMessage,this.connectSocket=la.connectSocket,this.readyState=3,this.offSocketOpen=la.offSocketOpen,this.offSocketMessage=la.offSocketMessage,this.offSocketError=la.offSocketError,this.offSocketClose=la.offSocketClose,this.connect=function(){this.offSocketOpen(),this.offSocketMessage(),this.offSocketClose(),this.offSocketError(),la.connectSocket({url:e.url,header:{"content-type":"application/json"},success:function(e){},fail:function(){}})}};Zi.prototype._getSock=function(){var e;return this.sock&&this.sock.close&&this.sock.close(),(e="zfb"===ua.platform||"dd"===ua.platform?new da(this):la.connectSocket({url:this.url,header:{"content-type":"application/json"},success:function(e){},fail:function(e){e.errMsg.indexOf("suspend")},complete:function(){}})).connect&&e.connect(),e},Zi.prototype.getUniqueId=le.getUniqueId,Zi.prototype.deviceId="miniProgram_"+ua.platform;var ha=$.getLogger("defaultLogger");ha.setConfig({useCache:!1,maxCache:3145728}),ha.enableAll(),le.ajax=le.wxRequest;var fa={connection:Zi,message:Ce,utils:le,logger:ha,statusCode:f}}(),i}()}))}).call(this,r("0de9")["default"],r("fe07")["default"],r("62e4")(e))},"11b0":function(e,t){e.exports=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports["default"]=e.exports},"14f7":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={path:"../static/images/faces/",map:{"[):]":"ee_1.png","[:D]":"ee_2.png","[;)]":"ee_3.png","[:-o]":"ee_4.png","[:p]":"ee_5.png","[(H)]":"ee_6.png","[:@]":"ee_7.png","[:s]":"ee_8.png","[:$]":"ee_9.png","[:(]":"ee_10.png","[:'(]":"ee_11.png","[<o)]":"ee_12.png","[(a)]":"ee_13.png","[8o|]":"ee_14.png","[8-|]":"ee_15.png","[+o(]":"ee_16.png","[|-)]":"ee_17.png","[:|]":"ee_18.png","[*-)]":"ee_19.png","[:-#]":"ee_20.png","[^o)]":"ee_21.png","[:-*]":"ee_22.png","[8-)]":"ee_23.png","[del]":"btn_del.png","[(|)]":"ee_24.png","[(u)]":"ee_25.png","[(S)]":"ee_26.png","[(*)]":"ee_27.png","[(#)]":"ee_28.png","[(R)]":"ee_29.png","[({)]":"ee_30.png","[(})]":"ee_31.png","[(k)]":"ee_32.png","[(F)]":"ee_33.png","[(W)]":"ee_34.png","[(D)]":"ee_35.png"}},o=function(e){if("undefined"===typeof n||"undefined"===typeof n.map)return e;var t=n,r=null,o=[],i=[];for(var a in t.map)if(t.map.hasOwnProperty(a))while(e.indexOf(a)>-1)e=e.replace(a,"^"+t.map[a]+"^");for(var s=e.split("^"),c=(r=/^e.*g$/,0);c<s.length;c++)""!=s[c]&&o.push(s[c]);for(c=0;c<o.length;c++)if(r.test(o[c])){var u={};u.data=o[c],u.type="emoji",i.push(u)}else{u={};u.data=o[c],u.type="txt",i.push(u)}return i};t.default=o},1628:function(e,t,r){"use strict";r.r(t);var n=r("83c7");for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);var i=r("f0c5"),a=Object(i["a"])(n["default"],void 0,void 0,!1,null,null,null,!1,void 0,void 0);t["default"]=a.exports},"1a02":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.emConnectListener=void 0;var n=r("1023"),o=r("0893");t.emConnectListener=function(t,r){e("log",">>>>\u8fde\u63a5\u76d1\u542c\u5df2\u6302\u8f7d"," at EaseIM/emListener/emConnectListener.js:4");var i={onConnected:function(){e("log","connected..."," at EaseIM/emListener/emConnectListener.js:7"),t&&t(o.CONNECT_CALLBACK_TYPE.CONNECT_CALLBACK)},onDisconnected:function(){t&&t(o.CONNECT_CALLBACK_TYPE.DISCONNECT_CALLBACK),e("log","disconnected..."," at EaseIM/emListener/emConnectListener.js:12")},onReconnecting:function(){t&&t(o.CONNECT_CALLBACK_TYPE.RECONNECTING_CALLBACK)}};n.EMClient.removeEventHandler(r||o.HANDLER_EVENT_NAME.CONNECT_EVENT),n.EMClient.addEventHandler(r||o.HANDLER_EVENT_NAME.CONNECT_EVENT,i)}}).call(this,r("0de9")["default"])},2236:function(e,t,r){var n=r("5a43");e.exports=function(e){if(Array.isArray(e))return n(e)},e.exports.__esModule=!0,e.exports["default"]=e.exports},"24c3":function(e,t,r){"use strict";var n=r("4ea4"),o=n(r("9523"));r("b563");var i=n(r("1628")),a=n(r("326d")),s=n(r("8bbf"));function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}r("0a4e"),s.default.config.productionTip=!1,s.default.prototype.$store=a.default,i.default.mpType="app";var u=new s.default(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},i.default));u.$mount()},"26cb":function(e,t,r){"use strict";(function(t){var r="undefined"!==typeof window?window:"undefined"!==typeof t?t:{},n=r.__VUE_DEVTOOLS_GLOBAL_HOOK__;function o(e,t){if(void 0===t&&(t=[]),null===e||"object"!==typeof e)return e;var r=function(e,t){return e.filter(t)[0]}(t,(function(t){return t.original===e}));if(r)return r.copy;var n=Array.isArray(e)?[]:{};return t.push({original:e,copy:n}),Object.keys(e).forEach((function(r){n[r]=o(e[r],t)})),n}function i(e,t){Object.keys(e).forEach((function(r){return t(e[r],r)}))}function a(e){return null!==e&&"object"===typeof e}var s=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var r=e.state;this.state=("function"===typeof r?r():r)||{}},c={namespaced:{configurable:!0}};c.namespaced.get=function(){return!!this._rawModule.namespaced},s.prototype.addChild=function(e,t){this._children[e]=t},s.prototype.removeChild=function(e){delete this._children[e]},s.prototype.getChild=function(e){return this._children[e]},s.prototype.hasChild=function(e){return e in this._children},s.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},s.prototype.forEachChild=function(e){i(this._children,e)},s.prototype.forEachGetter=function(e){this._rawModule.getters&&i(this._rawModule.getters,e)},s.prototype.forEachAction=function(e){this._rawModule.actions&&i(this._rawModule.actions,e)},s.prototype.forEachMutation=function(e){this._rawModule.mutations&&i(this._rawModule.mutations,e)},Object.defineProperties(s.prototype,c);var u=function(e){this.register([],e,!1)};u.prototype.get=function(e){return e.reduce((function(e,t){return e.getChild(t)}),this.root)},u.prototype.getNamespace=function(e){var t=this.root;return e.reduce((function(e,r){return t=t.getChild(r),e+(t.namespaced?r+"/":"")}),"")},u.prototype.update=function(e){(function e(t,r,n){0;if(r.update(n),n.modules)for(var o in n.modules){if(!r.getChild(o))return void 0;e(t.concat(o),r.getChild(o),n.modules[o])}})([],this.root,e)},u.prototype.register=function(e,t,r){var n=this;void 0===r&&(r=!0);var o=new s(t,r);if(0===e.length)this.root=o;else{var a=this.get(e.slice(0,-1));a.addChild(e[e.length-1],o)}t.modules&&i(t.modules,(function(t,o){n.register(e.concat(o),t,r)}))},u.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),r=e[e.length-1],n=t.getChild(r);n&&n.runtime&&t.removeChild(r)},u.prototype.isRegistered=function(e){var t=this.get(e.slice(0,-1)),r=e[e.length-1];return!!t&&t.hasChild(r)};var l;var p=function(e){var t=this;void 0===e&&(e={}),!l&&"undefined"!==typeof window&&window.Vue&&v(window.Vue);var r=e.plugins;void 0===r&&(r=[]);var o=e.strict;void 0===o&&(o=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new u(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new l,this._makeLocalGettersCache=Object.create(null);var i=this,a=this.dispatch,s=this.commit;this.dispatch=function(e,t){return a.call(i,e,t)},this.commit=function(e,t,r){return s.call(i,e,t,r)},this.strict=o;var c=this._modules.root.state;g(this,c,[],this._modules.root),m(this,c),r.forEach((function(e){return e(t)}));var p=void 0!==e.devtools?e.devtools:l.config.devtools;p&&function(e){n&&(e._devtoolHook=n,n.emit("vuex:init",e),n.on("vuex:travel-to-state",(function(t){e.replaceState(t)})),e.subscribe((function(e,t){n.emit("vuex:mutation",e,t)}),{prepend:!0}),e.subscribeAction((function(e,t){n.emit("vuex:action",e,t)}),{prepend:!0}))}(this)},d={state:{configurable:!0}};function h(e,t,r){return t.indexOf(e)<0&&(r&&r.prepend?t.unshift(e):t.push(e)),function(){var r=t.indexOf(e);r>-1&&t.splice(r,1)}}function f(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var r=e.state;g(e,r,[],e._modules.root,!0),m(e,r,t)}function m(e,t,r){var n=e._vm;e.getters={},e._makeLocalGettersCache=Object.create(null);var o=e._wrappedGetters,a={};i(o,(function(t,r){a[r]=function(e,t){return function(){return e(t)}}(t,e),Object.defineProperty(e.getters,r,{get:function(){return e._vm[r]},enumerable:!0})}));var s=l.config.silent;l.config.silent=!0,e._vm=new l({data:{$$state:t},computed:a}),l.config.silent=s,e.strict&&function(e){e._vm.$watch((function(){return this._data.$$state}),(function(){0}),{deep:!0,sync:!0})}(e),n&&(r&&e._withCommit((function(){n._data.$$state=null})),l.nextTick((function(){return n.$destroy()})))}function g(e,t,r,n,o){var i=!r.length,a=e._modules.getNamespace(r);if(n.namespaced&&(e._modulesNamespaceMap[a],e._modulesNamespaceMap[a]=n),!i&&!o){var s=E(t,r.slice(0,-1)),c=r[r.length-1];e._withCommit((function(){l.set(s,c,n.state)}))}var u=n.context=function(e,t,r){var n=""===t,o={dispatch:n?e.dispatch:function(r,n,o){var i=y(r,n,o),a=i.payload,s=i.options,c=i.type;return s&&s.root||(c=t+c),e.dispatch(c,a)},commit:n?e.commit:function(r,n,o){var i=y(r,n,o),a=i.payload,s=i.options,c=i.type;s&&s.root||(c=t+c),e.commit(c,a,s)}};return Object.defineProperties(o,{getters:{get:n?function(){return e.getters}:function(){return function(e,t){if(!e._makeLocalGettersCache[t]){var r={},n=t.length;Object.keys(e.getters).forEach((function(o){if(o.slice(0,n)===t){var i=o.slice(n);Object.defineProperty(r,i,{get:function(){return e.getters[o]},enumerable:!0})}})),e._makeLocalGettersCache[t]=r}return e._makeLocalGettersCache[t]}(e,t)}},state:{get:function(){return E(e.state,r)}}}),o}(e,a,r);n.forEachMutation((function(t,r){var n=a+r;(function(e,t,r,n){var o=e._mutations[t]||(e._mutations[t]=[]);o.push((function(t){r.call(e,n.state,t)}))})(e,n,t,u)})),n.forEachAction((function(t,r){var n=t.root?r:a+r,o=t.handler||t;(function(e,t,r,n){var o=e._actions[t]||(e._actions[t]=[]);o.push((function(t){var o=r.call(e,{dispatch:n.dispatch,commit:n.commit,getters:n.getters,state:n.state,rootGetters:e.getters,rootState:e.state},t);return function(e){return e&&"function"===typeof e.then}(o)||(o=Promise.resolve(o)),e._devtoolHook?o.catch((function(t){throw e._devtoolHook.emit("vuex:error",t),t})):o}))})(e,n,o,u)})),n.forEachGetter((function(t,r){var n=a+r;(function(e,t,r,n){if(e._wrappedGetters[t])return void 0;e._wrappedGetters[t]=function(e){return r(n.state,n.getters,e.state,e.getters)}})(e,n,t,u)})),n.forEachChild((function(n,i){g(e,t,r.concat(i),n,o)}))}function E(e,t){return t.reduce((function(e,t){return e[t]}),e)}function y(e,t,r){return a(e)&&e.type&&(r=t,t=e,e=e.type),{type:e,payload:t,options:r}}function v(e){l&&e===l||(l=e,
/*!
 * vuex v3.6.2
 * (c) 2021 Evan You
 * @license MIT
 */
function(e){var t=Number(e.version.split(".")[0]);if(t>=2)e.mixin({beforeCreate:n});else{var r=e.prototype._init;e.prototype._init=function(e){void 0===e&&(e={}),e.init=e.init?[n].concat(e.init):n,r.call(this,e)}}function n(){var e=this.$options;e.store?this.$store="function"===typeof e.store?e.store():e.store:e.parent&&e.parent.$store&&(this.$store=e.parent.$store)}}(l))}d.state.get=function(){return this._vm._data.$$state},d.state.set=function(e){0},p.prototype.commit=function(e,t,r){var n=this,o=y(e,t,r),i=o.type,a=o.payload,s=(o.options,{type:i,payload:a}),c=this._mutations[i];c&&(this._withCommit((function(){c.forEach((function(e){e(a)}))})),this._subscribers.slice().forEach((function(e){return e(s,n.state)})))},p.prototype.dispatch=function(e,t){var r=this,n=y(e,t),o=n.type,i=n.payload,a={type:o,payload:i},s=this._actions[o];if(s){try{this._actionSubscribers.slice().filter((function(e){return e.before})).forEach((function(e){return e.before(a,r.state)}))}catch(u){0}var c=s.length>1?Promise.all(s.map((function(e){return e(i)}))):s[0](i);return new Promise((function(e,t){c.then((function(t){try{r._actionSubscribers.filter((function(e){return e.after})).forEach((function(e){return e.after(a,r.state)}))}catch(u){0}e(t)}),(function(e){try{r._actionSubscribers.filter((function(e){return e.error})).forEach((function(t){return t.error(a,r.state,e)}))}catch(u){0}t(e)}))}))}},p.prototype.subscribe=function(e,t){return h(e,this._subscribers,t)},p.prototype.subscribeAction=function(e,t){var r="function"===typeof e?{before:e}:e;return h(r,this._actionSubscribers,t)},p.prototype.watch=function(e,t,r){var n=this;return this._watcherVM.$watch((function(){return e(n.state,n.getters)}),t,r)},p.prototype.replaceState=function(e){var t=this;this._withCommit((function(){t._vm._data.$$state=e}))},p.prototype.registerModule=function(e,t,r){void 0===r&&(r={}),"string"===typeof e&&(e=[e]),this._modules.register(e,t),g(this,this.state,e,this._modules.get(e),r.preserveState),m(this,this.state)},p.prototype.unregisterModule=function(e){var t=this;"string"===typeof e&&(e=[e]),this._modules.unregister(e),this._withCommit((function(){var r=E(t.state,e.slice(0,-1));l.delete(r,e[e.length-1])})),f(this)},p.prototype.hasModule=function(e){return"string"===typeof e&&(e=[e]),this._modules.isRegistered(e)},p.prototype[[104,111,116,85,112,100,97,116,101].map((function(e){return String.fromCharCode(e)})).join("")]=function(e){this._modules.update(e),f(this,!0)},p.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t},Object.defineProperties(p.prototype,d);var _=S((function(e,t){var r={};return I(t).forEach((function(t){var n=t.key,o=t.val;r[n]=function(){var t=this.$store.state,r=this.$store.getters;if(e){var n=C(this.$store,"mapState",e);if(!n)return;t=n.context.state,r=n.context.getters}return"function"===typeof o?o.call(this,t,r):t[o]},r[n].vuex=!0})),r})),T=S((function(e,t){var r={};return I(t).forEach((function(t){var n=t.key,o=t.val;r[n]=function(){var t=[],r=arguments.length;while(r--)t[r]=arguments[r];var n=this.$store.commit;if(e){var i=C(this.$store,"mapMutations",e);if(!i)return;n=i.context.commit}return"function"===typeof o?o.apply(this,[n].concat(t)):n.apply(this.$store,[o].concat(t))}})),r})),O=S((function(e,t){var r={};return I(t).forEach((function(t){var n=t.key,o=t.val;o=e+o,r[n]=function(){if(!e||C(this.$store,"mapGetters",e))return this.$store.getters[o]},r[n].vuex=!0})),r})),R=S((function(e,t){var r={};return I(t).forEach((function(t){var n=t.key,o=t.val;r[n]=function(){var t=[],r=arguments.length;while(r--)t[r]=arguments[r];var n=this.$store.dispatch;if(e){var i=C(this.$store,"mapActions",e);if(!i)return;n=i.context.dispatch}return"function"===typeof o?o.apply(this,[n].concat(t)):n.apply(this.$store,[o].concat(t))}})),r}));function I(e){return function(e){return Array.isArray(e)||a(e)}(e)?Array.isArray(e)?e.map((function(e){return{key:e,val:e}})):Object.keys(e).map((function(t){return{key:t,val:e[t]}})):[]}function S(e){return function(t,r){return"string"!==typeof t?(r=t,t=""):"/"!==t.charAt(t.length-1)&&(t+="/"),e(t,r)}}function C(e,t,r){var n=e._modulesNamespaceMap[r];return n}function N(e,t,r){var n=r?e.groupCollapsed:e.group;try{n.call(e,t)}catch(o){e.log(t)}}function A(e){try{e.groupEnd()}catch(t){e.log("\u2014\u2014 log end \u2014\u2014")}}function b(){var e=new Date;return" @ "+M(e.getHours(),2)+":"+M(e.getMinutes(),2)+":"+M(e.getSeconds(),2)+"."+M(e.getMilliseconds(),3)}function M(e,t){return function(e,t){return new Array(t+1).join(e)}("0",t-e.toString().length)+e}var w={Store:p,install:v,version:"3.6.2",mapState:_,mapMutations:T,mapGetters:O,mapActions:R,createNamespacedHelpers:function(e){return{mapState:_.bind(null,e),mapGetters:O.bind(null,e),mapMutations:T.bind(null,e),mapActions:R.bind(null,e)}},createLogger:function(e){void 0===e&&(e={});var t=e.collapsed;void 0===t&&(t=!0);var r=e.filter;void 0===r&&(r=function(e,t,r){return!0});var n=e.transformer;void 0===n&&(n=function(e){return e});var i=e.mutationTransformer;void 0===i&&(i=function(e){return e});var a=e.actionFilter;void 0===a&&(a=function(e,t){return!0});var s=e.actionTransformer;void 0===s&&(s=function(e){return e});var c=e.logMutations;void 0===c&&(c=!0);var u=e.logActions;void 0===u&&(u=!0);var l=e.logger;return void 0===l&&(l=console),function(e){var p=o(e.state);"undefined"!==typeof l&&(c&&e.subscribe((function(e,a){var s=o(a);if(r(e,p,s)){var c=b(),u=i(e),d="mutation "+e.type+c;N(l,d,t),l.log("%c prev state","color: #9E9E9E; font-weight: bold",n(p)),l.log("%c mutation","color: #03A9F4; font-weight: bold",u),l.log("%c next state","color: #4CAF50; font-weight: bold",n(s)),A(l)}p=s})),u&&e.subscribeAction((function(e,r){if(a(e,r)){var n=b(),o=s(e),i="action "+e.type+n;N(l,i,t),l.log("%c action","color: #03A9F4; font-weight: bold",o),A(l)}})))}}};e.exports=w}).call(this,r("c8ba"))},"278c":function(e,t,r){var n=r("c135"),o=r("9b42"),i=r("6613"),a=r("c240");e.exports=function(e,t){return n(e)||o(e,t)||i(e,t)||a()},e.exports.__esModule=!0,e.exports["default"]=e.exports},"2a7c":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t,r,n){var o="";return"singleChat"===n?o=e===t?r:t:"groupChat"===n&&(o=r),o};t.default=n},"326d":function(e,t,r){"use strict";var n=r("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r("8bbf")),i=n(r("26cb")),a=n(r("ead3"));o.default.use(i.default);var s=new i.default.Store({modules:{LoginStore:a.default}}),c=s;t.default=c},3566:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={};return t.groupName=e.name,t.groupId=e.id,t.maxUsers=e.maxusers,t.allowInvites=e.allowinvites,t.affiliationsCount=e.affiliations_count,t.shieldgroup=e.shieldgroup,t.affiliations=e.affiliations,t.mute=e.mute,t.custom=e.custom,t.created=e.created,t.owner=e.owner,t.membersonly=e.membersonly,t.description=e.description,t.disabled=e.disabled,t.public=e.public,t}},3954:function(e,t,r){"use strict";var n=r("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r("9523")),i=r("1023");function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var s=function(){return{fetchUserInfoWithLoginId:function(){var e=i.EMClient.user;return new Promise((function(t,r){e&&i.EMClient.fetchUserInfoById(e).then((function(e){var r=e.data;t(r)})).catch((function(e){r(e)}))}))},fetchOtherInfoFromServer:function(e){var t;return t=Object.assign([],e),new Promise((function(e,r){if(t.length&&t.length<99)i.EMClient.fetchUserInfoById(t).then((function(t){var r=t.data;e(r)})).catch((function(e){r(e)}));else for(var n=function(e,t){if(e.sort((function(e,t){return e-t})),e.length<=0)return e;var r=[];if(Math.ceil(e.length/t)<=1)return r.push(e),r;for(var n=0;n<e.length;n+=t)r.push(e.slice(n,n+t));return r}(t,99),o=0;o<n.length;o++)i.EMClient.fetchUserInfoById(n[o]).then((function(t){var r=t.data;e(r)})).catch((function(e){r(e)}))}))},updateUserInfosFromServer:function(e){return new Promise((function(t,r){i.EMClient.updateUserInfo(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e)).then((function(e){var r=e.data;t(r)})).catch((function(e){r(e)}))}))}}};t.default=s},"3c63":function(e,t,r){"use strict";(function(e){var n=r("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r("448a")),i=r("1023"),a=function(){return{fetchContactsListFromServer:function(){return new Promise((function(t,r){i.EMClient.getAllContacts().then((function(r){var n=r.data;e("log",">>>>>\u83b7\u53d6\u5168\u90e8\u597d\u53cb\u5217\u8868"," at EaseIM/emApis/emContacts.js:8"),t(n)})).catch((function(e){r(e)}))}))},removeContactFromServer:function(e){e&&i.EMClient.deleteContact(e)},acceptContactInvite:function(e){e&&i.EMClient.acceptContactInvite(e)},declineContactInvite:function(e){e&&i.EMClient.declineContactInvite(e)},addContact:function(e,t){e&&i.EMClient.addContact(e,t)},getBlocklistFromServer:function(){return new Promise((function(e,t){i.EMClient.getBlocklist().then((function(t){var r=t.data;e(r)})).catch((function(e){t(e)}))}))},addUsersToBlocklist:function(e){return new Promise((function(t,r){i.EMClient.addUsersToBlocklist({name:(0,o.default)(e)}).then((function(e){var r=e.data;t(r)})).catch((function(e){r(e)}))}))},removeUsersFromBlocklist:function(e){return new Promise((function(t,r){i.EMClient.removeUsersFromBlocklist({name:(0,o.default)(e)}).then((function(e){var r=e.data;t(r)})).catch((function(e){r(e)}))}))}}};t.default=a}).call(this,r("0de9")["default"])},"448a":function(e,t,r){var n=r("2236"),o=r("11b0"),i=r("6613"),a=r("0676");e.exports=function(e){return n(e)||o(e)||i(e)||a()},e.exports.__esModule=!0,e.exports["default"]=e.exports},"4ea4":function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports["default"]=e.exports},5932:function(e,t,r){"use strict";(function(e){var n=r("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r("1023"),i=r("fbf6"),a=(n(r("326d")),function(){return{reportMessages:function(e){var t=e.reportType,r=e.reportReason,n=e.messageId;return new Promise((function(e,i){o.EMClient.reportMessage({reportType:t,reportReason:r,messageId:n}).then((function(t){e(t)})).catch((function(e){i(e)}))}))},fetchHistoryMessagesFromServer:function(e){var t=e.targetId,r=e.cursor,n=e.chatType;return new Promise((function(e,i){var a={targetId:t,pageSize:20,cursor:r||-1,chatType:n,searchDirection:"up"};o.EMClient.getHistoryMessages(a).then((function(t){e(t)})).catch((function(e){i(e)}))}))},sendDisplayMessages:function(t){t.from=o.EMClient.user;var r=(0,i.getEMKey)(o.EMClient.user,t.from,t.to,t.chatType);return e("log",">>>>\u8981\u53d1\u9001\u7684\u6d88\u606fkey",r," at EaseIM/emApis/emMessages.js:54"),new Promise((function(r,n){var i=o.EaseSDK.message.create(t);e("log",">>>>\u6784\u5efa\u7684\u6d88\u606fmsg",i," at EaseIM/emApis/emMessages.js:57"),o.EMClient.send(i).then((function(e){r(e),i.id=e.serverMsgId})).catch((function(t){n(t),e("log",">>>>>\u53d1\u9001\u5931\u8d25",t," at EaseIM/emApis/emMessages.js:73")}))}))}}});t.default=a}).call(this,r("0de9")["default"])},"5a43":function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports["default"]=e.exports},"62e4":function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},6613:function(e,t,r){var n=r("5a43");e.exports=function(e,t){if(e){if("string"===typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports["default"]=e.exports},"6caf":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.emMountGlobalListener=void 0;var n=r("bd75"),o=r("7113"),i=r("9858"),a=r("99a4");t.emMountGlobalListener=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};"function"===typeof t?((0,i.emMessagesListener)(t),(0,n.emContactsListener)(t),(0,o.emGroupListener)(t),(0,a.emErrorListener)(t)):e("error","\u4f20\u5165\u7684\u53c2\u6570\u4e0d\u662f\u4e00\u4e2a\u51fd\u6570"," at EaseIM/emListener/emMountGlobalListener.js:14"),e("log",">>>>\u5168\u5c40\u76d1\u542c"," at EaseIM/emListener/emMountGlobalListener.js:16")}}).call(this,r("0de9")["default"])},7037:function(e,t){function r(t){return e.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports["default"]=e.exports,r(t)}e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},7113:function(e,t,r){"use strict";(function(e){var n=r("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.emGroupListener=void 0;var o=n(r("9523")),i=r("1023"),a=r("0893"),s=n(r("326d"));function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}t.emGroupListener=function(t,r){e("log",">>>>\u7fa4\u7ec4\u4e8b\u4ef6\u76d1\u542c\u6302\u8f7d"," at EaseIM/emListener/emGroupListener.js:5");var n={onGroupEvent:function(r){e("log",">>>>\u7fa4\u7ec4\u4e8b\u4ef6\u76d1\u542c\u89e6\u53d1",r," at EaseIM/emListener/emGroupListener.js:12");var n=r.operation;switch(t(a.HANDLER_EVENT_NAME.GROUP_EVENT,r),n){case"create":break;case"unmuteAllMembers":break;case"muteAllMembers":break;case"removeAllowlistMember":break;case"addUserToAllowlist":break;case"deleteFile":break;case"uploadFile":break;case"deleteAnnouncement":break;case"updateAnnouncement":break;case"updateInfo":break;case"unmuteMember":break;case"muteMember":break;case"removeAdmin":break;case"setAdmin":break;case"changeOwner":break;case"directJoined":break;case"memberAbsence":break;case"memberPresence":break;case"removeMember":break;case"rejectInvite":break;case"acceptInvite":break;case"inviteToJoin":(function(e){s.default.commit("ADD_NEW_RECEIVE_INVITE_MSG",e)})(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({chatType:a.CHAT_TYPE.GROUP_CHAT},r));break;case"joinPublicGroupDeclined":break;case"acceptRequest":break;case"requestToJoin":break;case"destroy":break;case"memberAttributesUpdate":break;default:break}}};i.EMClient.removeEventHandler(r||a.HANDLER_EVENT_NAME.GROUP_EVENT),i.EMClient.addEventHandler(r||a.HANDLER_EVENT_NAME.GROUP_EVENT,n)}}).call(this,r("0de9")["default"])},"7ec2":function(e,t,r){var n=r("7037")["default"];function o(){"use strict";
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e.exports=o=function(){return t},e.exports.__esModule=!0,e.exports["default"]=e.exports;var t={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},s="function"==typeof Symbol?Symbol:{},c=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function p(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(w){p=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof m?t:m,i=Object.create(o.prototype),s=new A(n||[]);return a(i,"_invoke",{value:I(e,r,s)}),i}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(w){return{type:"throw",arg:w}}}t.wrap=d;var f={};function m(){}function g(){}function E(){}var y={};p(y,c,(function(){return this}));var v=Object.getPrototypeOf,_=v&&v(v(b([])));_&&_!==r&&i.call(_,c)&&(y=_);var T=E.prototype=m.prototype=Object.create(y);function O(e){["next","throw","return"].forEach((function(t){p(e,t,(function(e){return this._invoke(t,e)}))}))}function R(e,t){var r;a(this,"_invoke",{value:function(o,a){function s(){return new t((function(r,s){(function r(o,a,s,c){var u=h(e[o],e,a);if("throw"!==u.type){var l=u.arg,p=l.value;return p&&"object"==n(p)&&i.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,s,c)}),(function(e){r("throw",e,s,c)})):t.resolve(p).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,c)}))}c(u.arg)})(o,a,r,s)}))}return r=r?r.then(s,s):s()}})}function I(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return M()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=S(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=h(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function S(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator["return"]&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=h(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function b(e){if(e){var t=e[c];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(i.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:M}}function M(){return{value:void 0,done:!0}}return g.prototype=E,a(T,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:g,configurable:!0}),g.displayName=p(E,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,p(e,l,"GeneratorFunction")),e.prototype=Object.create(T),e},t.awrap=function(e){return{__await:e}},O(R.prototype),p(R.prototype,u,(function(){return this})),t.AsyncIterator=R,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new R(d(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},O(T),p(T,l,"Generator"),p(T,c,(function(){return this})),p(T,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=b,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(N),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:b(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}e.exports=o,e.exports.__esModule=!0,e.exports["default"]=e.exports},"83c7":function(e,t,r){"use strict";r.r(t);var n=r("b55b"),o=r.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i);t["default"]=o.a},8500:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"emConnectListener",{enumerable:!0,get:function(){return n.emConnectListener}}),Object.defineProperty(t,"emContactsListener",{enumerable:!0,get:function(){return o.emContactsListener}}),Object.defineProperty(t,"emMountGlobalListener",{enumerable:!0,get:function(){return i.emMountGlobalListener}});var n=r("1a02"),o=r("bd75"),i=r("6caf")},"8bbf":function(e,t){e.exports=Vue},9523:function(e,t,r){var n=r("a395");e.exports=function(e,t,r){return t=n(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports["default"]=e.exports},9858:function(e,t,r){"use strict";(function(e){var n=r("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.emMessagesListener=void 0;var o=n(r("9523")),i=r("1023"),a=n(r("326d")),s=r("0893"),c=r("fbf6");function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.emMessagesListener=function(t,r){e("log","\u6d88\u606f\u76d1\u542c\u5df2\u6302\u8f7d"," at EaseIM/emListener/emMessagesListener.js:6");var n=function(t){e("log",">>>>\u5f00\u59cb\u5904\u7406\u6536\u5230\u7684\u6d88\u606f",t," at EaseIM/emListener/emMessagesListener.js:9");var r=(0,c.getEMKey)(i.EMClient.user,t.from,t.to,t.chatType);a.default.commit("UPDATE_MESSAGE_COLLECTION",{key:r,message:t}),a.default.commit("UPDATE_CONVERSATION_ITEM",{conversationId:r,lastMessage:t})},o=function(t){e("log",">>>>\u5f00\u59cb\u5904\u7406\u56de\u6267\u7c7b\u578b\u6d88\u606f",t," at EaseIM/emListener/emMessagesListener.js:31")},u={onTextMessage:function(e){n(l({},e))},onImageMessage:function(e){n(l({},e))},onCmdMessage:function(e){n(l({},e))},onAudioMessage:function(e){n(l({},e))},onLocationMessage:function(e){n(l({},e))},onFileMessage:function(e){n(l({},e))},onCustomMessage:function(e){n(l({},e))},onVideoMessage:function(e){n(l({},e))},onRecallMessage:function(t){(function(t){e("log",">>>>\u5f00\u59cb\u5904\u7406\u64a4\u56de\u7c7b\u578b\u6d88\u606f"," at EaseIM/emListener/emMessagesListener.js:35")})(l({},t))},onReceivedMessage:function(e){o(l({},e))},onDeliveredMessage:function(e){o(l({},e))},onReadMessage:function(e){o(l({},e))},onChannelMessage:function(e){o(l({},e))}};i.EMClient.removeEventHandler(r||s.HANDLER_EVENT_NAME.MESSAGES_EVENT),i.EMClient.addEventHandler(r||s.HANDLER_EVENT_NAME.MESSAGES_EVENT,u)}}).call(this,r("0de9")["default"])},"99a4":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.emErrorListener=void 0;var n=r("1023"),o=r("0893");t.emErrorListener=function(t,r){e("log",">>>>error\u76d1\u542c\u5df2\u6302\u8f7d"," at EaseIM/emListener/emErrorListener.js:4");var i={onError:function(r){e("log",">>>>>onError",r," at EaseIM/emListener/emErrorListener.js:7"),t&&t(o.HANDLER_EVENT_NAME.ERROR_EVENT,r)}};n.EMClient.removeEventHandler(r||o.HANDLER_EVENT_NAME.ERROR_EVENT),n.EMClient.addEventHandler(r||o.HANDLER_EVENT_NAME.ERROR_EVENT,i)}}).call(this,r("0de9")["default"])},"9b42":function(e,t){e.exports=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(l){u=!0,o=l}finally{try{if(!c&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(u)throw o}}return s}},e.exports.__esModule=!0,e.exports["default"]=e.exports},a34a:function(e,t,r){var n=r("7037"),o=r("7ec2")();e.exports=o;try{regeneratorRuntime=o}catch(i){"object"===("undefined"===typeof globalThis?"undefined":n(globalThis))?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}},a395:function(e,t,r){var n=r("7037")["default"],o=r("e50d");e.exports=function(e){var t=o(e,"string");return"symbol"===n(t)?t:String(t)},e.exports.__esModule=!0,e.exports["default"]=e.exports},a7c3:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("1023"),o=function(){return{sendReadAckMsg:function(e){var t=e.chatType,r=e.from,o=e.id,i={type:"read",chatType:t,to:r,id:o},a=n.EaseSDK.message.create(i);n.EMClient.send(a)}}};t.default=o},b55b:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("1023"),o=r("cf5b"),i=r("8500"),a=r("0893"),s=(0,o.emConnect)(),c=s.closeEaseIM,u=(s.loginWithAccessToken,{onLaunch:function(){var t=this;e("log","App Launch"," at App.vue:9");(0,i.emConnectListener)((function(r){e("log",">>>>>\u8fde\u63a5\u76f8\u5173\u56de\u8c03",r," at App.vue:12"),r===a.CONNECT_CALLBACK_TYPE.CONNECT_CALLBACK&&t.onConnectedSuccess(),r===a.CONNECT_CALLBACK_TYPE.DISCONNECT_CALLBACK&&t.onDisconnect(),r===a.CONNECT_CALLBACK_TYPE.RECONNECTING_CALLBACK&&t.onReconnecting()})),(0,i.emMountGlobalListener)()},methods:{onConnectedSuccess:function(){var e=this.loginStoreUserBaseInfos||{},t=e.loginUserId,r=t||n.EMClient.user;this.loginStoreStatus,this.$store.commit("SET_LOGIN_USER_BASE_INFOS",{loginUserId:r}),this.$store.commit("SET_LOGIN_STATUS",!0),uni.showToast({title:"\u8fde\u63a5\u6210\u529f",icon:"none",duration:2e3})},onDisconnect:function(){uni.showToast({icon:"none",title:"\u65ad\u5f00IM\u8fde\u63a5"}),this.loginStatus||(uni.showToast({title:"\u9000\u51fa\u767b\u5f55",icon:"none",duration:2e3}),c())},onReconnecting:function(){uni.showToast({title:"\u91cd\u8fde\u4e2d\uff0c\u8bf7\u52ff\u6267\u884c\u53d1\u9001\u6d88\u606f",icon:"none"})}}});t.default=u}).call(this,r("0de9")["default"])},b563:function(e,t,r){if("undefined"===typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){var t=this.constructor;return this.then((function(r){return t.resolve(e()).then((function(){return r}))}),(function(r){return t.resolve(e()).then((function(){throw r}))}))}),"undefined"!==typeof uni&&uni&&uni.requireGlobal){var n=uni.requireGlobal();ArrayBuffer=n.ArrayBuffer,Int8Array=n.Int8Array,Uint8Array=n.Uint8Array,Uint8ClampedArray=n.Uint8ClampedArray,Int16Array=n.Int16Array,Uint16Array=n.Uint16Array,Int32Array=n.Int32Array,Uint32Array=n.Uint32Array,Float32Array=n.Float32Array,Float64Array=n.Float64Array,BigInt64Array=n.BigInt64Array,BigUint64Array=n.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),__definePage("pages/index/index",(function(){return Vue.extend(r("ce7e").default)}))},b9d7:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("1023"),o=function(){return{loginWithPassword:function(e,t){if(!e||!t)throw Error("empty params");return new Promise((function(r,o){n.EMClient.open({user:e,pwd:t}).then((function(e){r(e)})).catch((function(e){return o(e)}))}))},loginWithAccessToken:function(e,t){if(!e||!t)throw Error("empty params");return new Promise((function(r,o){n.EMClient.open({user:e,accessToken:t}).then((function(e){r(e)})).catch((function(e){return o(e)}))}))},closeEaseIM:function(){n.EMClient.close()}}};t.default=o},bafa:function(e,t,r){"use strict";(function(e){var n=r("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r("9523")),i=r("1023");function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var c=function(){return{fetchJoinedGroupListFromServer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return new Promise((function(n,o){e("log",">>>>\u5f00\u59cb\u83b7\u53d6\u52a0\u5165\u7684\u7fa4\u7ec4\u5217\u8868"," at EaseIM/emApis/emGroups.js:5"),i.EMClient.getJoinedGroups({pageNum:t,pageSize:r,needAffiliations:!0,needRole:!0}).then((function(e){n(e)})).catch((function(e){o(e)}))}))},createNewGroup:function(t){return new Promise((function(r,n){e("log",">>>>\u5f00\u59cb\u521b\u5efa\u7fa4\u7ec4"," at EaseIM/emApis/emGroups.js:22"),i.EMClient.createGroup({data:s({},t)}).then((function(e){r(e.data)})).catch((function(e){n(e)}))}))},getGroupInfosFromServer:function(e){return new Promise((function(t,r){i.EMClient.getGroupInfo({groupId:e}).then((function(e){t(e.data)})).catch((function(e){r(e)}))}))},getGroupMembersFromServer:function(e){return new Promise((function(t,r){i.EMClient.listGroupMembers({pageNum:1,pageSize:100,groupId:e}).then((function(e){t(e.data)})).catch((function(e){r(e)}))}))},inviteUsersToGroup:function(e,t){return new Promise((function(r,n){i.EMClient.inviteUsersToGroup({groupId:e,users:t}).then((function(e){r(e.data)})).catch((function(e){n(e)}))}))},leaveGroupFromServer:function(e){return new Promise((function(t,r){i.EMClient.leaveGroup({groupId:e}).then((function(e){t(e.data)})).catch((function(e){r(e)}))}))},destroyGroupFromServer:function(e){return new Promise((function(t,r){i.EMClient.destroyGroup({groupId:e}).then((function(e){t(e.data)})).catch((function(e){r(e)}))}))},acceptGroupInvite:function(e,t){return new Promise((function(r,n){i.EMClient.acceptGroupInvite({groupId:t,invitee:e}).then((function(e){r(e.data)})).catch((function(e){n(e)}))}))},rejectGroupInvite:function(e,t){return new Promise((function(r,n){i.EMClient.rejectGroupInvite({groupId:t,invitee:e}).then((function(e){r(e.data)})).catch((function(e){n(e)}))}))},joinPublicGroup:function(e){return new Promise((function(t,r){i.EMClient.joinGroup({groupId:e,message:"I want to join the group"}).then((function(e){t(e.data)})).catch((function(e){r(e)}))}))},modifyGroupInfo:function(e,t){return new Promise((function(r,n){i.EMClient.modifyGroup(s({groupId:e},t)).then((function(e){r(e)})).catch((function(e){n(e)}))}))},listGroupMembersFromServer:function(e){e.pageNum,e.pageSize,e.groupId;return new Promise((function(t,r){i.EMClient.listGroupMembers(s({},e)).then((function(e){t(e.data)})).catch((function(e){r(e)}))}))},getSingleGroupAttributesFromServer:function(e,t){var r={groupId:e,userId:t};return new Promise((function(e,t){i.EMClient.getGroupMemberAttributes(s({},r)).then((function(t){e(t)})).catch((function(e){t(e)}))}))},getMultiGroupAttributesFromServer:function(e){var t=e.groupId,r=e.userIds,n=e.keys;return new Promise((function(e,o){i.EMClient.getGroupMembersAttributes({groupId:t,userIds:r,keys:n}).then((function(t){e(t.data)})).catch((function(e){o(e)}))}))},setSingleGroupAttributesFromServer:function(e){var t=e.groupId,r=e.userId,n=e.memberAttributes;return new Promise((function(e,o){i.EMClient.setGroupMemberAttributes({groupId:t,userId:r,memberAttributes:s({},n)}).then((function(t){e(t)})).catch((function(e){o(e)}))}))}}};t.default=c}).call(this,r("0de9")["default"])},bd75:function(e,t,r){"use strict";(function(e){var n=r("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.emContactsListener=void 0;var o=n(r("9523")),i=r("1023"),a=r("0893"),s=n(r("326d"));function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}e("log",">>>>>>vuex store",s.default," at EaseIM/emListener/emContactsListener.js:4");t.emContactsListener=function(t,r){e("log",">>>>>\u597d\u53cb\u5173\u7cfb\u76d1\u542c\u6302\u8f7d"," at EaseIM/emListener/emContactsListener.js:6");var n=function(e){s.default.commit("ADD_NEW_INFORM",{informType:a.INFORM_TYPE.CONTACTS,inform:e})},o={onContactInvited:function(e){var r=Object.assign({},e);t&&t(r),n(u({},e)),function(e){s.default.commit("ADD_NEW_RECEIVE_INVITE_MSG",e)}(u({chatType:a.CHAT_TYPE.SINGLE_CHAT},e))},onContactDeleted:function(e){t&&t(e),n(e)},onContactAdded:function(e){t&&t(e),n(e)},onContactRefuse:function(e){t&&t(e),n(e)},onContactAgreed:function(e){t&&t(e),n(e)}};i.EMClient.removeEventHandler(r||a.HANDLER_EVENT_NAME.CONTACTS_EVENT),i.EMClient.addEventHandler(r||a.HANDLER_EVENT_NAME.CONTACTS_EVENT,o)}}).call(this,r("0de9")["default"])},c135:function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports["default"]=e.exports},c240:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports["default"]=e.exports},c8ba:function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(n){"object"===typeof window&&(r=window)}e.exports=r},c912:function(e,t,r){"use strict";r.r(t);var n=r("d1ef"),o=r.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i);t["default"]=o.a},c973:function(e,t){function r(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(u){return void r(u)}s.done?t(c):Promise.resolve(c).then(n,o)}e.exports=function(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function s(e){r(a,o,i,s,c,"next",e)}function c(e){r(a,o,i,s,c,"throw",e)}s(void 0)}))}},e.exports.__esModule=!0,e.exports["default"]=e.exports},cc26:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("view",{staticClass:e._$s(0,"sc","content"),attrs:{_i:0}},[r("image",{staticClass:e._$s(1,"sc","logo"),attrs:{_i:1}}),r("view",{staticClass:e._$s(2,"sc","text-area"),attrs:{_i:2}},[r("text",{staticClass:e._$s(3,"sc","title"),attrs:{_i:3}},[e._v(e._$s(3,"t0-0",e._s(e.loginStatus)))])]),r("view",{staticClass:e._$s(4,"sc","input_container"),attrs:{_i:4}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.loginId,expression:"loginId"}],attrs:{_i:5},domProps:{value:e._$s(5,"v-model",e.loginId)},on:{input:function(t){t.target.composing||(e.loginId=t.target.value)}}})]),r("view",{staticClass:e._$s(6,"sc","input_container"),attrs:{_i:6}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.loginPwd,expression:"loginPwd"}],attrs:{_i:7},domProps:{value:e._$s(7,"v-model",e.loginPwd)},on:{input:function(t){t.target.composing||(e.loginPwd=t.target.value)}}})]),r("view",[r("button",{attrs:{_i:9},on:{click:e.loginIM}})]),r("view",[r("button",{attrs:{_i:11},on:{click:e.closeIM}})]),r("view",[r("button",{attrs:{_i:13},on:{click:e.sendTextMessage}})])])},o=[]},ce7e:function(e,t,r){"use strict";r.r(t);var n=r("cc26"),o=r("c912");for(var i in o)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return o[e]}))}(i);var a=r("f0c5"),s=Object(a["a"])(o["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);t["default"]=s.exports},cf5b:function(e,t,r){"use strict";var n=r("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"emConnect",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"emContacts",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"emConversation",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"emGroups",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"emMessages",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"emSendReadAck",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"emUserInfos",{enumerable:!0,get:function(){return i.default}});var o=n(r("b9d7")),i=n(r("3954")),a=n(r("3c63")),s=n(r("bafa")),c=n(r("a7c3")),u=n(r("e056")),l=n(r("5932"))},d1ef:function(e,t,r){"use strict";(function(e){var n=r("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r("a34a")),i=n(r("9523")),a=n(r("c973")),s=r("1023"),c=r("cf5b");function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p=(0,c.emConnect)(),d=p.loginWithPassword,h=p.loginWithAccessToken,f=p.closeEaseIM,m=(0,c.emMessages)(),g=m.sendDisplayMessages,E={data:function(){return{title:"Hello",loginId:"cunjin1",loginPwd:"1",storageData:uni.getStorageSync("EM_TOKEN"),sendMsgTimmer:null,seddMsgMaxTimeout:5e3}},onLoad:function(){},computed:{loginStatus:function(){return this.$store.getters.loginStatus}},methods:{loginIM:function(){var t=this;d(this.loginId,this.loginPwd).then((function(r){e("log",">>>>token\u83b7\u53d6\u6210\u529f",r," at pages/index/index.vue:51"),t.setUserAccessToken(t.loginId,r.accessToken)})).catch((function(t){e("log",">>>>>>fail",t," at pages/index/index.vue:55")}))},closeIM:function(){f(),this.$store.commit("SET_LOGIN_STATUS",!1)},sendTextMessage:function(){var t=this;return(0,a.default)(o.default.mark((function r(){var n,i;return o.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.sendMsgTimmer&&clearTimeout(t.sendMsgTimmer),t.sendMsgTimmer=setTimeout((function(){e("log",">>>>>\u8be5\u6761\u6d88\u606f\u8d85\u65f6\u65f6\u95f4\u5927\u4e8e5s",s.EMClient.sock.readyState," at pages/index/index.vue:66"),uni.showToast({icon:"none",title:"\u8be5\u6d88\u606f\u8d85\u65f6\u672a\u54cd\u5e94".concat(s.EMClient.sock.readyState,"\u6267\u884c\u91cd\u65b0\u767b\u5f55")}),f(),t.compensationLoginIM()}),t.seddMsgMaxTimeout),n={type:"txt",msg:"test message!",to:"pfh",chatType:"singleChat"},r.prev=3,r.next=6,g(l({},n));case 6:i=r.sent,e("log",">>>>>>>>\u53d1\u9001\u6d88\u606f\u6210\u529f",i," at pages/index/index.vue:96"),t.sendMsgTimmer&&clearTimeout(t.sendMsgTimmer),uni.showToast({icon:"none",title:"\u53d1\u9001\u6210\u529f\uff01".concat(i.serverMsgId)}),r.next=18;break;case 12:r.prev=12,r.t0=r["catch"](3),t.sendMsgTimmer&&clearTimeout(t.sendMsgTimmer),e("log",">>>>>>>\u53d1\u9001\u5931\u8d25",r.t0," at pages/index/index.vue:104"),39===(null===r.t0||void 0===r.t0?void 0:r.t0.type)&&(e("log",">>>>>IM \u672a\u8fde\u63a5 \u8c03\u7528\u8865\u507f\u767b\u5f55"," at pages/index/index.vue:107"),t.compensationLoginIM()),uni.showToast({icon:"none",title:"\u53d1\u9001\u5931\u8d25\uff1a".concat(JSON.stringify(r.t0))});case 18:case"end":return r.stop()}}),r,null,[[3,12]])})))()},setUserAccessToken:function(t,r){var n={key:"EM_TOKEN",data:{userId:t,token:r}};uni.setStorageSync(n.key,n.data),e("log",">>>>>token\u5199\u5165\u672c\u5730\u6210\u529f"," at pages/index/index.vue:122")},compensationLoginIM:function(){var t=this;e("log","\u5f53\u524dSDK socket status",s.EMClient.sock.readyState," at pages/index/index.vue:127"),f(),setTimeout((function(){var r,n;if(null!==(r=t.storageData)&&void 0!==r&&r.token||null!==(n=t.storageData)&&void 0!==n&&n.userId){var o,i,a=null===(o=t.storageData)||void 0===o?void 0:o.userId,s=null===(i=t.storageData)||void 0===i?void 0:i.token;e("log",">>>>>>>\u5f00\u59cb\u6267\u884ctoken\u767b\u5f55",t.storageData," at pages/index/index.vue:133"),h(a,s)}}),200)}}};t.default=E}).call(this,r("0de9")["default"])},e056:function(e,t,r){"use strict";(function(e){var n=r("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r("9523")),i=r("1023"),a=r("0893");function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var u=function(){return{fetchPinConversationFromServer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Promise((function(n,o){i.EMClient.getServerPinnedConversations({pageSize:t,cursor:r}).then((function(t){e("log",">>>>\u7f6e\u9876\u4f1a\u8bdd\u5217\u8868\u6570\u636e\u83b7\u53d6\u6210\u529f"," at EaseIM/emApis/emConversation.js:9"),n(t)})).catch((function(e){o(e)}))}))},pinConversationItem:function(t){var r=t.conversationId,n=t.conversationType,o=t.isPinned;return new Promise((function(t,a){i.EMClient.pinConversation({conversationId:r,conversationType:n,isPinned:o}).then((function(r){e("log",">>>>\u7f6e\u9876\u4f1a\u8bdd\u5217\u8868\u6dfb\u52a0\u6210\u529f"," at EaseIM/emApis/emConversation.js:27"),t(r)})).catch((function(e){a(e)}))}))},fetchConversationFromServer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pageSize:20,cursor:""};return new Promise((function(r,n){i.EMClient.getServerConversations(c({},t)).then((function(t){e("log",">>>>\u4f1a\u8bdd\u5217\u8868\u6570\u636e\u83b7\u53d6\u6210\u529f"," at EaseIM/emApis/emConversation.js:43");var n=t.data.conversations;r(n)})).catch((function(e){n(e)}))}))},removeConversationFromServer:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.CHAT_TYPE.SINGLE_CHAT,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t)return new Promise((function(o,a){i.EMClient.deleteConversation({channel:t,chatType:r,deleteRoam:n}).then((function(t){e("log",">>>>\u4f1a\u8bdd\u5220\u9664\u6210\u529f"," at EaseIM/emApis/emConversation.js:62"),o(t)})).catch((function(e){a(e)}))}))},sendChannelAck:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.CHAT_TYPE.SINGLE_CHAT;if(e){var r={chatType:t,type:"channel",to:e},n=i.EaseSDK.message.create(r);i.EMClient.send(n)}}}};t.default=u}).call(this,r("0de9")["default"])},e50d:function(e,t,r){var n=r("7037")["default"];e.exports=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports["default"]=e.exports},ead3:function(e,t,r){"use strict";(function(e){var n=r("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r("a34a")),i=n(r("c973")),a=r("1023"),s=r("cf5b"),c=(0,s.emUserInfos)(),u=c.fetchUserInfoWithLoginId;s.emUserInfos;var l={state:{loginStatus:!1,loginUserBaseInfos:{loginUserId:"",phoneNumber:""},loginUserProfiles:{}},mutations:{SET_LOGIN_STATUS:function(e,t){e.loginStatus=t},SET_LOGIN_USER_BASE_INFOS:function(e,t){e.loginUserBaseInfos=Object.assign({},t)},SET_LOGIN_USER_PROFILES:function(e,t){e.loginUserProfiles=Object.assign({},t)}},actions:{fetchLoginUserProfile:function(t){return(0,i.default)(o.default.mark((function r(){var n,i;return o.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.commit,r.prev=1,r.next=4,u();case 4:i=r.sent,n("SET_LOGIN_USER_PROFILES",i[a.EMClient.user]),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](1),e("log",">>>>\u767b\u5f55\u7528\u6237\u4e2a\u4eba\u4fe1\u606f\u83b7\u53d6\u5931\u8d25",r.t0," at store/modules/login.js:32");case 11:case"end":return r.stop()}}),r,null,[[1,8]])})))()}},getters:{loginStatus:function(e){return e.loginStatus}}},p=l;t.default=p}).call(this,r("0de9")["default"])},f0c5:function(e,t,r){"use strict";function n(e,t,r,n,o,i,a,s,c,u){var l,p="function"===typeof e?e.options:e;if(c){p.components||(p.components={});var d=Object.prototype.hasOwnProperty;for(var h in c)d.call(c,h)&&!d.call(p.components,h)&&(p.components[h]=c[h])}if(u&&("function"===typeof u.beforeCreate&&(u.beforeCreate=[u.beforeCreate]),(u.beforeCreate||(u.beforeCreate=[])).unshift((function(){this[u.__module]=this})),(p.mixins||(p.mixins=[])).push(u)),t&&(p.render=t,p.staticRenderFns=r,p._compiled=!0),n&&(p.functional=!0),i&&(p._scopeId="data-v-"+i),a?(l=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},p._ssrRegister=l):o&&(l=s?function(){o.call(this,this.$root.$options.shadowRoot)}:o),l)if(p.functional){p._injectStyles=l;var f=p.render;p.render=function(e,t){return l.call(t),f(e,t)}}else{var m=p.beforeCreate;p.beforeCreate=m?[].concat(m,l):[l]}return{exports:e,options:p}}r.d(t,"a",(function(){return n}))},fbf6:function(e,t,r){"use strict";var n=r("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"convertGroupDetailsToGroupList",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"getEMKey",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"paseEmoji",{enumerable:!0,get:function(){return o.default}});var o=n(r("14f7")),i=n(r("2a7c")),a=n(r("3566"))},fe07:function(e,t,r){"use strict";(function(e){var n=r("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.Behavior=function(e){return e},t.Component=function(t){var r=function(t){var r=t.data,n=t.options,o=t.methods,i=t.behaviors,a=t.lifetimes,s=t.observers,l=t.relations,p=t.properties,h=t.pageLifetimes,f=t.externalClasses,m={mixins:[],props:{},watch:{},mpOptions:{mpObservers:[]}};return u(m),c(r,m),function(e,t){if(!e)return;t.mpOptions.options=e}(n,m),I(o,m),b(i,m),function(e,t){if(!e)return;S(e,t)}(a,m),function(e,t){if(!e)return;var r=t.mpOptions.mpObservers;Object.keys(e).forEach((function(t){r.push({paths:M(t),observer:e[t]})}))}(s,m),function(t,r){if(!t)return;Object.keys(t).forEach((function(r){var n=t[r];n.name=r,n.target=n.target?String(n.target):function(e,t){0===t.indexOf("/")&&(e="");var r=e.split("/"),n=t.split("/");r.pop();while(n.length){var o=n.shift();""!==o&&"."!==o&&(".."!==o?r.push(o):r.pop())}return r.join("/")}(e.__wxRoute,r)})),r.mpOptions.relations=t}(l,m),R(p,m),function(e,t){if(!e)return;T.forEach((function(r){var n=e[r];d(n)&&(t[_[r]]=n)}))}(h,m),function(e,t){if(!e)return;Array.isArray(e)||(e=[e]);t.mpOptions.externalClasses=e,t.mpOptions.properties||(t.mpOptions.properties=Object.create(null));e.forEach((function(e){t.mpOptions.properties[E(e)]={type:String,value:""}}))}(f,m),S(t,m),N(t),m}(t);r.mixins.unshift(X),r.mpOptions.path=e.__wxRoute,function(e){e.onServiceAttached||(e.onServiceAttached=[]);e.onServiceAttached.push((function(){D(this,"linked")}))}(r),e.__wxComponents[e.__wxRoute]=r},t.Page=function(t){var r=function(e){var t={mixins:[],mpOptions:{}};return u(t),c(e.data,t),function(e,t){var r=Object.create(null);Object.keys(e).forEach((function(t){var n=e[t];d(n)&&-1===O.indexOf(t)&&(r[t]=n)})),t.methods=r}(e,t),function(e,t){Object.keys(e).forEach((function(r){-1!==O.indexOf(r)&&(t[r]=e[r])}))}(e,t),t}(t);r.mixins.unshift(X),r.mpOptions.path=e.__wxRoute,e.__wxComponents[e.__wxRoute]=r},t.nextTick=t.default=void 0;var o,i=n(r("9523")),a=n(r("278c")),s=n(r("8bbf"));function c(e,t){e&&(t.mpOptions.data=e)}function u(t){t.components=e.__wxVueOptions.components}var l=Object.prototype.toString,p=Object.prototype.hasOwnProperty;function d(e){return"function"===typeof e}function h(e){return"[object Object]"===l.call(e)}function f(e,t){return p.call(e,t)}function m(){}var g=/-(\w)/g,E=function(e){var t=Object.create(null);return function(r){var n=t[r];return n||(t[r]=e(r))}}((function(e){return e.replace(g,(function(e,t){return t?t.toUpperCase():""}))})),y={created:"onServiceCreated",attached:"onServiceAttached",ready:"mounted",moved:"moved",detached:"destroyed"},v=Object.keys(y),_={show:"onPageShow",hide:"onPageHide",resize:"onPageResize"},T=Object.keys(_),O=["onLoad","onShow","onReady","onHide","onUnload","onPullDownRefresh","onReachBottom","onShareAppMessage","onPageScroll","onResize","onTabItemTap"];function R(e,t){e&&(t.mpOptions.properties=e)}function I(e,t){e&&(e.$emit&&(console.warn('Method "$emit" conflicts with an existing Vue instance method'),delete e.$emit),t.methods=e)}function S(e,t){v.forEach((function(r){f(e,r)&&(t[y[r]]||(t[y[r]]=[])).push(e[r])}))}var C={"wx://form-field":{},"wx://component-export":{}};function N(e,t){(function(e){var t=e.behaviors,r=e.definitionFilter,n=[];if(Array.isArray(t)&&t.forEach((function(t){t="string"===typeof t?C[t]:t,t.definitionFilter&&(n.push(t.definitionFilter),t.definitionFilter.call(null,e,[]))})),d(r));})(e)}var A={"wx://form-field":{beforeCreate:function(){var e=this.$options.mpOptions;e.properties||(e.properties=Object.create(null));var t=e.properties;f(t,"name")||(t.name={type:String}),f(t,"value")||(t.value={type:String})}}};function b(e,t){e&&e.forEach((function(e){"string"===typeof e?A[e]&&t.mixins.push(A[e]):t.mixins.push(function(e){var t=e.data,r=e.methods,n=e.behaviors,o=e.properties,i={watch:{},mpOptions:{mpObservers:[]}};return c(t,i),I(r,i),b(n,i),R(o,i),S(e,i),N(e),i}(e))}))}function M(e){return e.split(",").map((function(e){return function(e){return e.split(".")}(e)}))}function w(e,t,r,n){if(t){var o="_$".concat(e,"Handlers");(n[o]||(n[o]=[])).push((function(){t.call(n,r)}))}}function U(e,t,r){var n=e.name,o=r._$relationNodes||(r._$relationNodes=Object.create(null));(o[n]||(o[n]=[])).push(t),w("linked",e["linked"],t,r)}function P(e,t,r){w("unlinked",e["unlinked"],t,r)}function k(e,t,r){var n=e&&e.$options.mpOptions&&e.$options.mpOptions.relations;if(!n)return[];var o=Object.keys(n).find((function(e){var o=n[e];return o.target===t&&o.type===r}));return o?[n[o],e]:[]}function L(e,t,r){var n=r(e,e.$options.mpOptions.path),o=(0,a.default)(n,2),i=o[0],s=o[1];i&&(U(i,e,s),U(t,s,e),P(i,e,s),P(t,s,e))}function x(e){var t=e.$options.mpOptions||{},r=t.relations;r&&Object.keys(r).forEach((function(t){(function(e,t){var r=e.type;"parent"===r?L(t,e,(function(e,t){return k(e.$parent,t,"child")})):"ancestor"===r&&L(t,e,(function(e,t){var r=e.$parent;while(r){var n=k(r,t,"descendant");if(n.length)return n;r=r.$parent}return[]}))})(r[t],e)}))}function D(e,t){var r=e["_$".concat(t,"Handlers")];r&&r.forEach((function(e){return e()}))}var j={enumerable:!0,configurable:!0,get:m,set:m};function G(e,t,r){j.get=function(){return this[t][r]},j.set=function(e){this[t][r]=e},Object.defineProperty(e,r,j)}function B(e,t){var r=this;h(e)&&(Object.keys(e).forEach((function(t){(function(e,t,r){var n=e.replace(/\[(\d+?)\]/g,".$1").split(".");return n.reduce((function(e,r,o){if(o!==n.length-1)return"undefined"===typeof e[r]&&(e[r]={}),e[r];e[r]=t}),r),1===n.length})(t,e[t],r.data)&&!f(r,t)&&G(r,"__data__",t)})),this.$forceUpdate(),d(t)&&this.$nextTick(t))}var H=Object.prototype.toString,F=function(e){return function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,n=H.call(r);if("[object Array]"===n)return t=r.slice(0),t;if("[object Object]"===n){for(var o in r)t[o]=e(t[o],r[o]);return t}if("[object Date]"===n)return new Date(r.getTime());if("[object RegExp]"===n){var i=String(r),a=i.lastIndexOf("/");return new RegExp(i.slice(1,a),i.slice(a+1))}return r}("[object Array]"===H.call(e)?[]:{},e)},W=(o={},(0,i.default)(o,String,""),(0,i.default)(o,Number,0),(0,i.default)(o,Boolean,!1),(0,i.default)(o,Object,null),(0,i.default)(o,Array,[]),(0,i.default)(o,null,null),o);function K(e){return W[e]}function V(e){return h(e)?e.type:e}function q(e,t,r,n){var o=r[e];if(void 0!==o){var i=t[e],a=V(i);o=z(o,a);var s=i&&i.observer;return s&&setTimeout((function(){J(s,n,o)}),4),o}return function(e){return h(e)?f(e,"value")?e.value:K(e.type):K(e)}(t[e])}function z(e,t){return t===Boolean?!!e:t===String?String(e):e}function J(e,t,r,n){try{"function"===typeof e?e.call(t,r,n):"string"===typeof e&&"function"===typeof t[e]&&t[e](r,n)}catch(o){console.error("execute observer ".concat(e," callback fail! err: ").concat(o))}}function $(e){var t=e.$options.mpOptions&&e.$options.mpOptions.properties,r=e.$options.propsData;r&&t&&Object.keys(t).forEach((function(n){f(r,n)&&(e[n]=z(r[n],V(t[n])))}))}function Y(e){var t=JSON.parse(JSON.stringify(e.$options.mpOptions.data||{}));e["__data__"]=t;var r={get:function(){return e["__data__"]},set:function(t){e["__data__"]=t}};Object.defineProperties(e,{data:r,properties:r}),e.setData=B,function(e,t){var r=e.$options.mpOptions.properties;if(r){var n=F(e.$options.propsData)||{},o=function(o){var i=!!h(r[o])&&r[o].observer,a=q(o,r,n,e);Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:function(){return a},set:function(t){var r=a;t===a||t!==t&&a!==a||(a=Array.isArray(t)?t.slice(0):t,i&&J(i,e,t,r),e.$forceUpdate())}})};for(var i in r)o(i)}}(e,t),Object.keys(t).forEach((function(t){G(e,"__data__",t)}))}var X={beforeCreate:function(){this._renderProxy=this,this._$self=this,this._$noop=m},created:function(){Y(this),function(e){var t=e.$emit;e.triggerEvent=function(r,n,o){var i={dataset:e.$el.dataset},a={target:i,currentTarget:i,detail:n,preventDefault:m,stopPropagation:m};t.call(e,r,a)},e.$emit=function(){e.triggerEvent.apply(e,arguments)},e.getRelationNodes=function(t){return(e._$relationNodes&&e._$relationNodes[t]||[]).filter((function(e){return!e._isDestroyed}))},e._$updateProperties=$}(this),x(this)},mounted:function(){(function(e){var t=e.$options.watch;t&&Object.keys(t).forEach((function(r){var n=t[r];if(n.mounted){var o=e[r],i=n.handler;"string"===typeof i&&(i=e[i]),i&&i.call(e,o,o)}}))})(this)},destroyed:function(){D(this,"unlinked")}};e.__wxRoute="",e.__wxComponents=Object.create(null),e.__wxVueOptions=Object.create(null);var Q=s.default.nextTick;t.nextTick=Q;var Z=uni.__$wx__,ee=Z;t.default=ee}).call(this,r("c8ba"))}},[["24c3","app-config"]]]);